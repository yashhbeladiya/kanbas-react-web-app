!function(){window.liQd=window.liQd||[];window.liQd.push({"globalVarName":"liQd_did_004d","distributorId":"did-004d","defaultEventDelay":1000,"identityResolutionConfig":{"source":"did-004d"},"identifiersToResolve":"_aalyticsuid,trc_cookie_storage,dtm_token,_pubcid,hid,muuid,globalTI_SID,ajs_user_id,_li_uuid,s_ecid,_shopify_y,gup_anonid,s_vi,IXWRAPPERLiveIntentIp,_parrable_id,tmguid,_sharedid","contextSelectors":"title,meta[name='description'],h1,link[rel='canonical']","contextElementsLength":5000,"urlCollectionMode":"full","resolutionSync":{"enabled":true,"strategy":"ls","targetKey":"__infoLinksLIResolveResult","resolutionOptions":{"resolve":["nonId","uid2","index","openx","pubmatic","magnite","bidswitch","medianet","sovrn","connatix","thetradedesk"]}}})}();!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n=function(e){try{return!!e()}catch(e){return!0}},r=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),o=r,i=Function.prototype,s=i.call,a=o&&i.bind.bind(s,s),c=o?a:function(e){return function(){return s.apply(e,arguments)}},l=function(e){return null==e},u=l,d=TypeError,f=function(e){if(u(e))throw new d("Can't call method on "+e);return e},p=f,h=Object,g=function(e){return h(p(e))},v=g,y=c({}.hasOwnProperty),m=Object.hasOwn||function(e,t){return y(v(e),t)},w=c,b=w({}.toString),S=w("".slice),E=function(e){return S(b(e),8,-1)},C=E,x=Array.isArray||function(e){return"Array"===C(e)},k="object"==typeof document&&document.all,P=void 0===k&&void 0!==k?function(e){return"function"==typeof e||e===k}:function(e){return"function"==typeof e},R=n,O=P,_=/#|\.prototype\./,I=function(e,t){var n=L[A(e)];return n===j||n!==T&&(O(t)?R(t):!!t)},A=I.normalize=function(e){return String(e).replace(_,".").toLowerCase()},L=I.data={},T=I.NATIVE="N",j=I.POLYFILL="P",U=I,D={exports:{}},H=!0,F=function(e){return e&&e.Math===Math&&e},$=F("object"==typeof globalThis&&globalThis)||F("object"==typeof window&&window)||F("object"==typeof self&&self)||F("object"==typeof e&&e)||F("object"==typeof e&&e)||function(){return this}()||Function("return this")(),N=$,q=Object.defineProperty,M=$,B=function(e,t){try{q(N,e,{value:t,configurable:!0,writable:!0})}catch(n){N[e]=t}return t},G="__core-js_shared__",Q=D.exports=M[G]||B(G,{});(Q.versions||(Q.versions=[])).push({version:"3.38.0",mode:"pure",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE",source:"https://github.com/zloirock/core-js"});var V=D.exports,z=m,J=x,W=U,X=V,K=W.data,Y=W.normalize,Z="USE_FUNCTION_CONSTRUCTOR",ee="AsyncIteratorPrototype",te=function(e,t){if(J(e))for(var n=0;n<e.length;n++)K[Y(e[n])]=t};t((function(e){"object"==typeof e&&(te(e.useNative,W.NATIVE),te(e.usePolyfill,W.POLYFILL),te(e.useFeatureDetection,null),z(e,Z)&&(X[Z]=!!e[Z]),z(e,ee)&&(X[ee]=e[ee]))}))({usePolyfill:["Date.now"]});var ne=c({}.isPrototypeOf),re=r,oe=Function.prototype,ie=oe.apply,se=oe.call,ae="object"==typeof Reflect&&Reflect.apply||(re?se.bind(ie):function(){return se.apply(ie,arguments)}),ce=E,le=c,ue=function(e){if("Function"===ce(e))return le(e)},de={},fe=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),pe=r,he=Function.prototype.call,ge=pe?he.bind(he):function(){return he.apply(he,arguments)},ve={},ye={}.propertyIsEnumerable,me=Object.getOwnPropertyDescriptor,we=me&&!ye.call({1:2},1);ve.f=we?function(e){var t=me(this,e);return!!t&&t.enumerable}:ye;var be,Se,Ee=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ce=n,xe=E,ke=Object,Pe=c("".split),Re=Ce((function(){return!ke("z").propertyIsEnumerable(0)}))?function(e){return"String"===xe(e)?Pe(e,""):ke(e)}:ke,Oe=Re,_e=f,Ie=function(e){return Oe(_e(e))},Ae=P,Le=function(e){return"object"==typeof e?null!==e:Ae(e)},Te={},je=Te,Ue=$,De=P,He=function(e){return De(e)?e:void 0},Fe=function(e,t){return arguments.length<2?He(je[e])||He(Ue[e]):je[e]&&je[e][t]||Ue[e]&&Ue[e][t]},$e=$.navigator,Ne=$e&&$e.userAgent,qe=Ne?String(Ne):"",Me=$,Be=qe,Ge=Me.process,Qe=Me.Deno,Ve=Ge&&Ge.versions||Qe&&Qe.version,ze=Ve&&Ve.v8;ze&&(Se=(be=ze.split("."))[0]>0&&be[0]<4?1:+(be[0]+be[1])),!Se&&Be&&(!(be=Be.match(/Edge\/(\d+)/))||be[1]>=74)&&(be=Be.match(/Chrome\/(\d+)/))&&(Se=+be[1]);var Je=Se,We=Je,Xe=n,Ke=$.String,Ye=!!Object.getOwnPropertySymbols&&!Xe((function(){var e=Symbol("symbol detection");return!Ke(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&We&&We<41})),Ze=Ye&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,et=Fe,tt=P,nt=ne,rt=Object,ot=Ze?function(e){return"symbol"==typeof e}:function(e){var t=et("Symbol");return tt(t)&&nt(t.prototype,rt(e))},it=String,st=function(e){try{return it(e)}catch(e){return"Object"}},at=P,ct=st,lt=TypeError,ut=function(e){if(at(e))return e;throw new lt(ct(e)+" is not a function")},dt=ut,ft=l,pt=function(e,t){var n=e[t];return ft(n)?void 0:dt(n)},ht=ge,gt=P,vt=Le,yt=TypeError,mt=V,wt=function(e,t){return mt[e]||(mt[e]=t||{})},bt=c,St=0,Et=Math.random(),Ct=bt(1..toString),xt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ct(++St+Et,36)},kt=wt,Pt=m,Rt=xt,Ot=Ye,_t=Ze,It=$.Symbol,At=kt("wks"),Lt=_t?It.for||It:It&&It.withoutSetter||Rt,Tt=function(e){return Pt(At,e)||(At[e]=Ot&&Pt(It,e)?It[e]:Lt("Symbol."+e)),At[e]},jt=ge,Ut=Le,Dt=ot,Ht=pt,Ft=function(e,t){var n,r;if("string"===t&&gt(n=e.toString)&&!vt(r=ht(n,e)))return r;if(gt(n=e.valueOf)&&!vt(r=ht(n,e)))return r;if("string"!==t&&gt(n=e.toString)&&!vt(r=ht(n,e)))return r;throw new yt("Can't convert object to primitive value")},$t=TypeError,Nt=Tt("toPrimitive"),qt=function(e,t){if(!Ut(e)||Dt(e))return e;var n,r=Ht(e,Nt);if(r){if(void 0===t&&(t="default"),n=jt(r,e,t),!Ut(n)||Dt(n))return n;throw new $t("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ft(e,t)},Mt=ot,Bt=function(e){var t=qt(e,"string");return Mt(t)?t:t+""},Gt=Le,Qt=$.document,Vt=Gt(Qt)&&Gt(Qt.createElement),zt=function(e){return Vt?Qt.createElement(e):{}},Jt=zt,Wt=!fe&&!n((function(){return 7!==Object.defineProperty(Jt("div"),"a",{get:function(){return 7}}).a})),Xt=fe,Kt=ge,Yt=ve,Zt=Ee,en=Ie,tn=Bt,nn=m,rn=Wt,on=Object.getOwnPropertyDescriptor;de.f=Xt?on:function(e,t){if(e=en(e),t=tn(t),rn)try{return on(e,t)}catch(e){}if(nn(e,t))return Zt(!Kt(Yt.f,e,t),e[t])};var sn=ut,an=r,cn=ue(ue.bind),ln=function(e,t){return sn(e),void 0===t?e:an?cn(e,t):function(){return e.apply(t,arguments)}},un={},dn=fe&&n((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),fn=Le,pn=String,hn=TypeError,gn=function(e){if(fn(e))return e;throw new hn(pn(e)+" is not an object")},vn=fe,yn=Wt,mn=dn,wn=gn,bn=Bt,Sn=TypeError,En=Object.defineProperty,Cn=Object.getOwnPropertyDescriptor,xn="enumerable",kn="configurable",Pn="writable";un.f=vn?mn?function(e,t,n){if(wn(e),t=bn(t),wn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Pn in n&&!n[Pn]){var r=Cn(e,t);r&&r[Pn]&&(e[t]=n.value,n={configurable:kn in n?n[kn]:r[kn],enumerable:xn in n?n[xn]:r[xn],writable:!1})}return En(e,t,n)}:En:function(e,t,n){if(wn(e),t=bn(t),wn(n),yn)try{return En(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new Sn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Rn=un,On=Ee,_n=fe?function(e,t,n){return Rn.f(e,t,On(1,n))}:function(e,t,n){return e[t]=n,e},In=$,An=ae,Ln=ue,Tn=P,jn=de.f,Un=U,Dn=Te,Hn=ln,Fn=_n,$n=m,Nn=function(e){var t=function(n,r,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,o)}return An(e,this,arguments)};return t.prototype=e.prototype,t},qn=function(e,t){var n,r,o,i,s,a,c,l,u,d=e.target,f=e.global,p=e.stat,h=e.proto,g=f?In:p?In[d]:In[d]&&In[d].prototype,v=f?Dn:Dn[d]||Fn(Dn,d,{})[d],y=v.prototype;for(i in t)r=!(n=Un(f?i:d+(p?".":"#")+i,e.forced))&&g&&$n(g,i),a=v[i],r&&(c=e.dontCallGetSet?(u=jn(g,i))&&u.value:g[i]),s=r&&c?c:t[i],(n||h||typeof a!=typeof s)&&(l=e.bind&&r?Hn(s,In):e.wrap&&r?Nn(s):h&&Tn(s)?Ln(s):s,(e.sham||s&&s.sham||a&&a.sham)&&Fn(l,"sham",!0),Fn(v,i,l),h&&($n(Dn,o=d+"Prototype")||Fn(Dn,o,{}),Fn(Dn[o],i,s),e.real&&y&&(n||!y[i])&&Fn(y,i,s)))},Mn=Math.ceil,Bn=Math.floor,Gn=Math.trunc||function(e){var t=+e;return(t>0?Bn:Mn)(t)},Qn=Gn,Vn=function(e){var t=+e;return t!=t||0===t?0:Qn(t)},zn=Vn,Jn=Math.min,Wn=function(e){var t=zn(e);return t>0?Jn(t,9007199254740991):0},Xn=function(e){return Wn(e.length)},Kn=fe,Yn=x,Zn=TypeError,er=Object.getOwnPropertyDescriptor,tr=Kn&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}()?function(e,t){if(Yn(e)&&!er(e,"length").writable)throw new Zn("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},nr=TypeError,rr=function(e){if(e>9007199254740991)throw nr("Maximum allowed index exceeded");return e},or=g,ir=Xn,sr=tr,ar=rr;qn({target:"Array",proto:!0,arity:1,forced:n((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=or(this),n=ir(t),r=arguments.length;ar(n+r);for(var o=0;o<r;o++)t[n]=arguments[o],n++;return sr(t,n),n}});var cr=$,lr=Te,ur=function(e,t){var n=lr[e+"Prototype"],r=n&&n[t];if(r)return r;var o=cr[e],i=o&&o.prototype;return i&&i[t]},dr=ur("Array","push"),fr=ne,pr=dr,hr=Array.prototype,gr=t((function(e){var t=e.push;return e===hr||fr(hr,e)&&t===hr.push?pr:t}));qn({target:"Object",stat:!0},{hasOwn:m});var vr=t(Te.Object.hasOwn),yr=st,mr=TypeError,wr=g,br=Xn,Sr=tr,Er=function(e,t){if(!delete e[t])throw new mr("Cannot delete property "+yr(t)+" of "+yr(e))},Cr=rr;qn({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=wr(this),n=br(t),r=arguments.length;if(r){Cr(n+r);for(var o=n;o--;){var i=o+r;o in t?t[i]=t[o]:Er(t,i)}for(var s=0;s<r;s++)t[s]=arguments[s]}return Sr(t,n+r)}});var xr,kr,Pr,Rr=ur("Array","unshift"),Or=ne,_r=Rr,Ir=Array.prototype,Ar=t((function(e){var t=e.unshift;return e===Ir||Or(Ir,e)&&t===Ir.unshift?_r:t})),Lr={},Tr=P,jr=$.WeakMap,Ur=Tr(jr)&&/native code/.test(String(jr)),Dr=xt,Hr=wt("keys"),Fr=function(e){return Hr[e]||(Hr[e]=Dr(e))},$r={},Nr=Ur,qr=$,Mr=Le,Br=_n,Gr=m,Qr=V,Vr=Fr,zr=$r,Jr="Object already initialized",Wr=qr.TypeError,Xr=qr.WeakMap;if(Nr||Qr.state){var Kr=Qr.state||(Qr.state=new Xr);Kr.get=Kr.get,Kr.has=Kr.has,Kr.set=Kr.set,xr=function(e,t){if(Kr.has(e))throw new Wr(Jr);return t.facade=e,Kr.set(e,t),t},kr=function(e){return Kr.get(e)||{}},Pr=function(e){return Kr.has(e)}}else{var Yr=Vr("state");zr[Yr]=!0,xr=function(e,t){if(Gr(e,Yr))throw new Wr(Jr);return t.facade=e,Br(e,Yr,t),t},kr=function(e){return Gr(e,Yr)?e[Yr]:{}},Pr=function(e){return Gr(e,Yr)}}var Zr={set:xr,get:kr,has:Pr,enforce:function(e){return Pr(e)?kr(e):xr(e,{})},getterFor:function(e){return function(t){var n;if(!Mr(t)||(n=kr(t)).type!==e)throw new Wr("Incompatible receiver, "+e+" required");return n}}},eo=fe,to=m,no=Function.prototype,ro=eo&&Object.getOwnPropertyDescriptor,oo=to(no,"name"),io={EXISTS:oo,PROPER:oo&&"something"===function(){}.name,CONFIGURABLE:oo&&(!eo||eo&&ro(no,"name").configurable)},so={},ao=Vn,co=Math.max,lo=Math.min,uo=Ie,fo=function(e,t){var n=ao(e);return n<0?co(n+t,0):lo(n,t)},po=Xn,ho=function(e){return function(t,n,r){var o=uo(t),i=po(o);if(0===i)return!e&&-1;var s,a=fo(r,i);if(e&&n!=n){for(;i>a;)if((s=o[a++])!=s)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},go={includes:ho(!0),indexOf:ho(!1)},vo=m,yo=Ie,mo=go.indexOf,wo=$r,bo=c([].push),So=function(e,t){var n,r=yo(e),o=0,i=[];for(n in r)!vo(wo,n)&&vo(r,n)&&bo(i,n);for(;t.length>o;)vo(r,n=t[o++])&&(~mo(i,n)||bo(i,n));return i},Eo=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Co=So,xo=Eo,ko=Object.keys||function(e){return Co(e,xo)},Po=fe,Ro=dn,Oo=un,_o=gn,Io=Ie,Ao=ko;so.f=Po&&!Ro?Object.defineProperties:function(e,t){_o(e);for(var n,r=Io(t),o=Ao(t),i=o.length,s=0;i>s;)Oo.f(e,n=o[s++],r[n]);return e};var Lo,To=Fe("document","documentElement"),jo=gn,Uo=so,Do=Eo,Ho=$r,Fo=To,$o=zt,No="prototype",qo="script",Mo=Fr("IE_PROTO"),Bo=function(){},Go=function(e){return"<"+qo+">"+e+"</"+qo+">"},Qo=function(e){e.write(Go("")),e.close();var t=e.parentWindow.Object;return e=null,t},Vo=function(){try{Lo=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;Vo="undefined"!=typeof document?document.domain&&Lo?Qo(Lo):(t=$o("iframe"),n="java"+qo+":",t.style.display="none",Fo.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(Go("document.F=Object")),e.close(),e.F):Qo(Lo);for(var r=Do.length;r--;)delete Vo[No][Do[r]];return Vo()};Ho[Mo]=!0;var zo,Jo,Wo,Xo=Object.create||function(e,t){var n;return null!==e?(Bo[No]=jo(e),n=new Bo,Bo[No]=null,n[Mo]=e):n=Vo(),void 0===t?n:Uo.f(n,t)},Ko=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Yo=m,Zo=P,ei=g,ti=Ko,ni=Fr("IE_PROTO"),ri=Object,oi=ri.prototype,ii=ti?ri.getPrototypeOf:function(e){var t=ei(e);if(Yo(t,ni))return t[ni];var n=t.constructor;return Zo(n)&&t instanceof n?n.prototype:t instanceof ri?oi:null},si=_n,ai=function(e,t,n,r){return r&&r.enumerable?e[t]=n:si(e,t,n),e},ci=n,li=P,ui=Le,di=Xo,fi=ii,pi=ai,hi=Tt("iterator"),gi=!1;[].keys&&("next"in(Wo=[].keys())?(Jo=fi(fi(Wo)))!==Object.prototype&&(zo=Jo):gi=!0);var vi=!ui(zo)||ci((function(){var e={};return zo[hi].call(e)!==e}));li((zo=vi?{}:di(zo))[hi])||pi(zo,hi,(function(){return this}));var yi={IteratorPrototype:zo,BUGGY_SAFARI_ITERATORS:gi},mi={};mi[Tt("toStringTag")]="z";var wi="[object z]"===String(mi),bi=wi,Si=P,Ei=E,Ci=Tt("toStringTag"),xi=Object,ki="Arguments"===Ei(function(){return arguments}()),Pi=bi?Ei:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=xi(e),Ci))?n:ki?Ei(t):"Object"===(r=Ei(t))&&Si(t.callee)?"Arguments":r},Ri=Pi,Oi=wi?{}.toString:function(){return"[object "+Ri(this)+"]"},_i=wi,Ii=un.f,Ai=_n,Li=m,Ti=Oi,ji=Tt("toStringTag"),Ui=function(e,t,n,r){var o=n?e:e&&e.prototype;o&&(Li(o,ji)||Ii(o,ji,{configurable:!0,value:t}),r&&!_i&&Ai(o,"toString",Ti))},Di=yi.IteratorPrototype,Hi=Xo,Fi=Ee,$i=Ui,Ni=Lr,qi=function(){return this},Mi=function(e,t,n,r){var o=t+" Iterator";return e.prototype=Hi(Di,{next:Fi(+!r,n)}),$i(e,o,!1,!0),Ni[o]=qi,e},Bi=c,Gi=ut,Qi=Le,Vi=function(e){return Qi(e)||null===e},zi=String,Ji=TypeError,Wi=function(e,t,n){try{return Bi(Gi(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},Xi=Le,Ki=f,Yi=function(e){if(Vi(e))return e;throw new Ji("Can't set "+zi(e)+" as a prototype")},Zi=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Wi(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Ki(n),Yi(r),Xi(n)?(t?e(n,r):n.__proto__=r,n):n}}():void 0),es=qn,ts=ge,ns=io,rs=Mi,os=ii,is=Ui,ss=ai,as=Lr,cs=yi,ls=ns.PROPER,us=cs.BUGGY_SAFARI_ITERATORS,ds=Tt("iterator"),fs="keys",ps="values",hs="entries",gs=function(){return this},vs=function(e,t,n,r,o,i,s){rs(n,t,r);var a,c,l,u=function(e){if(e===o&&g)return g;if(!us&&e&&e in p)return p[e];switch(e){case fs:case ps:case hs:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",f=!1,p=e.prototype,h=p[ds]||p["@@iterator"]||o&&p[o],g=!us&&h||u(o),v="Array"===t&&p.entries||h;if(v&&(a=os(v.call(new e)))!==Object.prototype&&a.next&&(is(a,d,!0,!0),as[d]=gs),ls&&o===ps&&h&&h.name!==ps&&(f=!0,g=function(){return ts(h,this)}),o)if(c={values:u(ps),keys:i?g:u(fs),entries:u(hs)},s)for(l in c)(us||f||!(l in p))&&ss(p,l,c[l]);else es({target:t,proto:!0,forced:us||f},c);return s&&p[ds]!==g&&ss(p,ds,g,{name:o}),as[t]=g,c},ys=function(e,t){return{value:e,done:t}},ms=Ie,ws=Lr,bs=Zr;un.f;var Ss=vs,Es=ys,Cs="Array Iterator",xs=bs.set,ks=bs.getterFor(Cs);Ss(Array,"Array",(function(e,t){xs(this,{type:Cs,target:ms(e),index:0,kind:t})}),(function(){var e=ks(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,Es(void 0,!0);switch(e.kind){case"keys":return Es(n,!1);case"values":return Es(t[n],!1)}return Es([n,t[n]],!1)}),"values"),ws.Arguments=ws.Array;var Ps=$,Rs=fe,Os=Object.getOwnPropertyDescriptor,_s=function(e){if(!Rs)return Ps[e];var t=Os(Ps,e);return t&&t.value},Is=n,As=H,Ls=Tt("iterator"),Ts=!Is((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),n.delete("b",void 0),!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b")||!t.size&&As||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Ls]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("https://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("https://x",void 0).host})),js=un,Us=function(e,t,n){return js.f(e,t,n)},Ds=ai,Hs=ne,Fs=TypeError,$s=function(e,t){if(Hs(t,e))return e;throw new Fs("Incorrect invocation")},Ns=Pi,qs=String,Ms=function(e){if("Symbol"===Ns(e))throw new TypeError("Cannot convert a Symbol value to a string");return qs(e)},Bs=Pi,Gs=pt,Qs=l,Vs=Lr,zs=Tt("iterator"),Js=function(e){if(!Qs(e))return Gs(e,zs)||Gs(e,"@@iterator")||Vs[Bs(e)]},Ws=ge,Xs=ut,Ks=gn,Ys=st,Zs=Js,ea=TypeError,ta=function(e,t){var n=arguments.length<2?Zs(e):t;if(Xs(n))return Ks(Ws(n,e));throw new ea(Ys(e)+" is not iterable")},na=TypeError,ra=function(e,t){if(e<t)throw new na("Not enough arguments");return e},oa=c([].slice),ia=oa,sa=Math.floor,aa=function(e,t){var n=e.length;if(n<8)for(var r,o,i=1;i<n;){for(o=i,r=e[i];o&&t(e[o-1],r)>0;)e[o]=e[--o];o!==i++&&(e[o]=r)}else for(var s=sa(n/2),a=aa(ia(e,0,s),t),c=aa(ia(e,s),t),l=a.length,u=c.length,d=0,f=0;d<l||f<u;)e[d+f]=d<l&&f<u?t(a[d],c[f])<=0?a[d++]:c[f++]:d<l?a[d++]:c[f++];return e},ca=qn,la=$,ua=_s,da=ge,fa=c,pa=fe,ha=Ts,ga=ai,va=Us,ya=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Ds(e,r,t[r],n);return e},ma=Ui,wa=Mi,ba=Zr,Sa=$s,Ea=P,Ca=m,xa=ln,ka=Pi,Pa=gn,Ra=Le,Oa=Ms,_a=Xo,Ia=Ee,Aa=ta,La=Js,Ta=ys,ja=ra,Ua=aa,Da=Tt("iterator"),Ha="URLSearchParams",Fa=Ha+"Iterator",$a=ba.set,Na=ba.getterFor(Ha),qa=ba.getterFor(Fa),Ma=ua("fetch"),Ba=ua("Request"),Ga=ua("Headers"),Qa=Ba&&Ba.prototype,Va=Ga&&Ga.prototype,za=la.RegExp,Ja=la.TypeError,Wa=la.decodeURIComponent,Xa=la.encodeURIComponent,Ka=fa("".charAt),Ya=fa([].join),Za=fa([].push),ec=fa("".replace),tc=fa([].shift),nc=fa([].splice),rc=fa("".split),oc=fa("".slice),ic=/\+/g,sc=Array(4),ac=function(e){return sc[e-1]||(sc[e-1]=za("((?:%[\\da-f]{2}){"+e+"})","gi"))},cc=function(e){try{return Wa(e)}catch(t){return e}},lc=function(e){var t=ec(e,ic," "),n=4;try{return Wa(t)}catch(e){for(;n;)t=ec(t,ac(n--),cc);return t}},uc=/[!'()~]|%20/g,dc={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},fc=function(e){return dc[e]},pc=function(e){return ec(Xa(e),uc,fc)},hc=wa((function(e,t){$a(this,{type:Fa,target:Na(e).entries,index:0,kind:t})}),Ha,(function(){var e=qa(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,Ta(void 0,!0);var r=t[n];switch(e.kind){case"keys":return Ta(r.key,!1);case"values":return Ta(r.value,!1)}return Ta([r.key,r.value],!1)}),!0),gc=function(e){this.entries=[],this.url=null,void 0!==e&&(Ra(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Ka(e,0)?oc(e,1):e:Oa(e)))};gc.prototype={type:Ha,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,o,i,s,a,c=this.entries,l=La(e);if(l)for(n=(t=Aa(e,l)).next;!(r=da(n,t)).done;){if(i=(o=Aa(Pa(r.value))).next,(s=da(i,o)).done||(a=da(i,o)).done||!da(i,o).done)throw new Ja("Expected sequence with length 2");Za(c,{key:Oa(s.value),value:Oa(a.value)})}else for(var u in e)Ca(e,u)&&Za(c,{key:u,value:Oa(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=this.entries,o=rc(e,"&"),i=0;i<o.length;)(t=o[i++]).length&&(n=rc(t,"="),Za(r,{key:lc(tc(n)),value:lc(Ya(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],Za(n,pc(e.key)+"="+pc(e.value));return Ya(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var vc=function(){Sa(this,yc);var e=$a(this,new gc(arguments.length>0?arguments[0]:void 0));pa||(this.size=e.entries.length)},yc=vc.prototype;if(ya(yc,{append:function(e,t){var n=Na(this);ja(arguments.length,2),Za(n.entries,{key:Oa(e),value:Oa(t)}),pa||this.length++,n.updateURL()},delete:function(e){for(var t=Na(this),n=ja(arguments.length,1),r=t.entries,o=Oa(e),i=n<2?void 0:arguments[1],s=void 0===i?i:Oa(i),a=0;a<r.length;){var c=r[a];if(c.key!==o||void 0!==s&&c.value!==s)a++;else if(nc(r,a,1),void 0!==s)break}pa||(this.size=r.length),t.updateURL()},get:function(e){var t=Na(this).entries;ja(arguments.length,1);for(var n=Oa(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=Na(this).entries;ja(arguments.length,1);for(var n=Oa(e),r=[],o=0;o<t.length;o++)t[o].key===n&&Za(r,t[o].value);return r},has:function(e){for(var t=Na(this).entries,n=ja(arguments.length,1),r=Oa(e),o=n<2?void 0:arguments[1],i=void 0===o?o:Oa(o),s=0;s<t.length;){var a=t[s++];if(a.key===r&&(void 0===i||a.value===i))return!0}return!1},set:function(e,t){var n=Na(this);ja(arguments.length,1);for(var r,o=n.entries,i=!1,s=Oa(e),a=Oa(t),c=0;c<o.length;c++)(r=o[c]).key===s&&(i?nc(o,c--,1):(i=!0,r.value=a));i||Za(o,{key:s,value:a}),pa||(this.size=o.length),n.updateURL()},sort:function(){var e=Na(this);Ua(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=Na(this).entries,r=xa(e,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new hc(this,"keys")},values:function(){return new hc(this,"values")},entries:function(){return new hc(this,"entries")}},{enumerable:!0}),ga(yc,Da,yc.entries,{name:"entries"}),ga(yc,"toString",(function(){return Na(this).serialize()}),{enumerable:!0}),pa&&va(yc,"size",{get:function(){return Na(this).entries.length},configurable:!0,enumerable:!0}),ma(vc,Ha),ca({global:!0,constructor:!0,forced:!ha},{URLSearchParams:vc}),!ha&&Ea(Ga)){var mc=fa(Va.has),wc=fa(Va.set),bc=function(e){if(Ra(e)){var t,n=e.body;if(ka(n)===Ha)return t=e.headers?new Ga(e.headers):new Ga,mc(t,"content-type")||wc(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),_a(e,{body:Ia(0,Oa(n)),headers:Ia(0,t)})}return e};if(Ea(Ma)&&ca({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return Ma(e,arguments.length>1?bc(arguments[1]):{})}}),Ea(Ba)){var Sc=function(e){return Sa(this,Qa),new Ba(e,arguments.length>1?bc(arguments[1]):{})};Qa.constructor=Sc,Sc.prototype=Qa,ca({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Sc})}}var Ec={URLSearchParams:vc,getState:Na},Cc=c,xc=Vn,kc=Ms,Pc=f,Rc=Cc("".charAt),Oc=Cc("".charCodeAt),_c=Cc("".slice),Ic=function(e){return function(t,n){var r,o,i=kc(Pc(t)),s=xc(n),a=i.length;return s<0||s>=a?e?"":void 0:(r=Oc(i,s))<55296||r>56319||s+1===a||(o=Oc(i,s+1))<56320||o>57343?e?Rc(i,s):r:e?_c(i,s,s+2):o-56320+(r-55296<<10)+65536}},Ac={codeAt:Ic(!1),charAt:Ic(!0)},Lc=Ac.charAt,Tc=Ms,jc=Zr,Uc=vs,Dc=ys,Hc="String Iterator",Fc=jc.set,$c=jc.getterFor(Hc);Uc(String,"String",(function(e){Fc(this,{type:Hc,string:Tc(e),index:0})}),(function(){var e,t=$c(this),n=t.string,r=t.index;return r>=n.length?Dc(void 0,!0):(e=Lc(n,r),t.index+=e.length,Dc(e,!1))}));var Nc={};Nc.f=Object.getOwnPropertySymbols;var qc=fe,Mc=c,Bc=ge,Gc=n,Qc=ko,Vc=Nc,zc=ve,Jc=g,Wc=Re,Xc=Object.assign,Kc=Object.defineProperty,Yc=Mc([].concat),Zc=!Xc||Gc((function(){if(qc&&1!==Xc({b:1},Xc(Kc({},"a",{enumerable:!0,get:function(){Kc(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!==Xc({},e)[n]||Qc(Xc({},t)).join("")!==r}))?function(e,t){for(var n=Jc(e),r=arguments.length,o=1,i=Vc.f,s=zc.f;r>o;)for(var a,c=Wc(arguments[o++]),l=i?Yc(Qc(c),i(c)):Qc(c),u=l.length,d=0;u>d;)a=l[d++],qc&&!Bc(s,c,a)||(n[a]=c[a]);return n}:Xc,el=ge,tl=gn,nl=pt,rl=function(e,t,n){var r,o;tl(e);try{if(!(r=nl(e,"return"))){if("throw"===t)throw n;return n}r=el(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return tl(r),n},ol=gn,il=rl,sl=Lr,al=Tt("iterator"),cl=Array.prototype,ll=function(e){return void 0!==e&&(sl.Array===e||cl[al]===e)},ul=P,dl=V,fl=c(Function.toString);ul(dl.inspectSource)||(dl.inspectSource=function(e){return fl(e)});var pl=dl.inspectSource,hl=c,gl=n,vl=P,yl=Pi,ml=pl,wl=function(){},bl=Fe("Reflect","construct"),Sl=/^\s*(?:class|function)\b/,El=hl(Sl.exec),Cl=!Sl.test(wl),xl=function(e){if(!vl(e))return!1;try{return bl(wl,[],e),!0}catch(e){return!1}},kl=function(e){if(!vl(e))return!1;switch(yl(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Cl||!!El(Sl,ml(e))}catch(e){return!0}};kl.sham=!0;var Pl,Rl=!bl||gl((function(){var e;return xl(xl.call)||!xl(Object)||!xl((function(){e=!0}))||e}))?kl:xl,Ol=fe,_l=un,Il=Ee,Al=function(e,t,n){Ol?_l.f(e,t,Il(0,n)):e[t]=n},Ll=ln,Tl=ge,jl=g,Ul=function(e,t,n,r){try{return r?t(ol(n)[0],n[1]):t(n)}catch(t){il(e,"throw",t)}},Dl=ll,Hl=Rl,Fl=Xn,$l=Al,Nl=ta,ql=Js,Ml=Array,Bl=c,Gl=2147483647,Ql=/[^\0-\u007E]/,Vl=/[.\u3002\uFF0E\uFF61]/g,zl="Overflow: input needs wider integers to process",Jl=RangeError,Wl=Bl(Vl.exec),Xl=Math.floor,Kl=String.fromCharCode,Yl=Bl("".charCodeAt),Zl=Bl([].join),eu=Bl([].push),tu=Bl("".replace),nu=Bl("".split),ru=Bl("".toLowerCase),ou=function(e){return e+22+75*(e<26)},iu=function(e,t,n){var r=0;for(e=n?Xl(e/700):e>>1,e+=Xl(e/t);e>455;)e=Xl(e/35),r+=36;return Xl(r+36*e/(e+38))},su=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=Yl(e,n++);if(o>=55296&&o<=56319&&n<r){var i=Yl(e,n++);56320==(64512&i)?eu(t,((1023&o)<<10)+(1023&i)+65536):(eu(t,o),n--)}else eu(t,o)}return t}(e);var n,r,o=e.length,i=128,s=0,a=72;for(n=0;n<e.length;n++)(r=e[n])<128&&eu(t,Kl(r));var c=t.length,l=c;for(c&&eu(t,"-");l<o;){var u=Gl;for(n=0;n<e.length;n++)(r=e[n])>=i&&r<u&&(u=r);var d=l+1;if(u-i>Xl((Gl-s)/d))throw new Jl(zl);for(s+=(u-i)*d,i=u,n=0;n<e.length;n++){if((r=e[n])<i&&++s>Gl)throw new Jl(zl);if(r===i){for(var f=s,p=36;;){var h=p<=a?1:p>=a+26?26:p-a;if(f<h)break;var g=f-h,v=36-h;eu(t,Kl(ou(h+g%v))),f=Xl(g/v),p+=36}eu(t,Kl(ou(f))),a=iu(s,d,l===c),s=0,l++}}s++,i++}return Zl(t,"")},au=qn,cu=fe,lu=Ts,uu=$,du=ln,fu=c,pu=ai,hu=Us,gu=$s,vu=m,yu=Zc,mu=function(e){var t=jl(e),n=Hl(this),r=arguments.length,o=r>1?arguments[1]:void 0,i=void 0!==o;i&&(o=Ll(o,r>2?arguments[2]:void 0));var s,a,c,l,u,d,f=ql(t),p=0;if(!f||this===Ml&&Dl(f))for(s=Fl(t),a=n?new this(s):Ml(s);s>p;p++)d=i?o(t[p],p):t[p],$l(a,p,d);else for(a=n?new this:[],u=(l=Nl(t,f)).next;!(c=Tl(u,l)).done;p++)d=i?Ul(l,o,[c.value,p],!0):c.value,$l(a,p,d);return a.length=p,a},wu=oa,bu=Ac.codeAt,Su=function(e){var t,n,r=[],o=nu(tu(ru(e),Vl,"."),".");for(t=0;t<o.length;t++)n=o[t],eu(r,Wl(Ql,n)?"xn--"+su(n):n);return Zl(r,".")},Eu=Ms,Cu=Ui,xu=ra,ku=Ec,Pu=Zr,Ru=Pu.set,Ou=Pu.getterFor("URL"),_u=ku.URLSearchParams,Iu=ku.getState,Au=uu.URL,Lu=uu.TypeError,Tu=uu.parseInt,ju=Math.floor,Uu=Math.pow,Du=fu("".charAt),Hu=fu(/./.exec),Fu=fu([].join),$u=fu(1..toString),Nu=fu([].pop),qu=fu([].push),Mu=fu("".replace),Bu=fu([].shift),Gu=fu("".split),Qu=fu("".slice),Vu=fu("".toLowerCase),zu=fu([].unshift),Ju="Invalid scheme",Wu="Invalid host",Xu="Invalid port",Ku=/[a-z]/i,Yu=/[\d+-.a-z]/i,Zu=/\d/,ed=/^0x/i,td=/^[0-7]+$/,nd=/^\d+$/,rd=/^[\da-f]+$/i,od=/[\0\t\n\r #%/:<>?@[\\\]^|]/,id=/[\0\t\n\r #/:<>?@[\\\]^|]/,sd=/^[\u0000-\u0020]+/,ad=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,cd=/[\t\n\r]/g,ld=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)zu(t,e%256),e=ju(e/256);return Fu(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n?r:t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=$u(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ud={},dd=yu({},ud,{" ":1,'"':1,"<":1,">":1,"`":1}),fd=yu({},dd,{"#":1,"?":1,"{":1,"}":1}),pd=yu({},fd,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),hd=function(e,t){var n=bu(e,0);return n>32&&n<127&&!vu(t,e)?e:encodeURIComponent(e)},gd={ftp:21,file:null,http:80,https:443,ws:80,wss:443},vd=function(e,t){var n;return 2===e.length&&Hu(Ku,Du(e,0))&&(":"===(n=Du(e,1))||!t&&"|"===n)},yd=function(e){var t;return e.length>1&&vd(Qu(e,0,2))&&(2===e.length||"/"===(t=Du(e,2))||"\\"===t||"?"===t||"#"===t)},md=function(e){return"."===e||"%2e"===Vu(e)},wd={},bd={},Sd={},Ed={},Cd={},xd={},kd={},Pd={},Rd={},Od={},_d={},Id={},Ad={},Ld={},Td={},jd={},Ud={},Dd={},Hd={},Fd={},$d={},Nd=function(e,t,n){var r,o,i,s=Eu(e);if(t){if(o=this.parse(s))throw new Lu(o);this.searchParams=null}else{if(void 0!==n&&(r=new Nd(n,!0)),o=this.parse(s,null,r))throw new Lu(o);(i=Iu(new _u)).bindURL(this),this.searchParams=i}};Nd.prototype={type:"URL",parse:function(e,t,n){var r,o,i,s,a,c=this,l=t||wd,u=0,d="",f=!1,p=!1,h=!1;for(e=Eu(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=Mu(e,sd,""),e=Mu(e,ad,"$1")),e=Mu(e,cd,""),r=mu(e);u<=r.length;){switch(o=r[u],l){case wd:if(!o||!Hu(Ku,o)){if(t)return Ju;l=Sd;continue}d+=Vu(o),l=bd;break;case bd:if(o&&(Hu(Yu,o)||"+"===o||"-"===o||"."===o))d+=Vu(o);else{if(":"!==o){if(t)return Ju;d="",l=Sd,u=0;continue}if(t&&(c.isSpecial()!==vu(gd,d)||"file"===d&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&gd[c.scheme]===c.port&&(c.port=null));d="","file"===c.scheme?l=Ld:c.isSpecial()&&n&&n.scheme===c.scheme?l=Ed:c.isSpecial()?l=Pd:"/"===r[u+1]?(l=Cd,u++):(c.cannotBeABaseURL=!0,qu(c.path,""),l=Hd)}break;case Sd:if(!n||n.cannotBeABaseURL&&"#"!==o)return Ju;if(n.cannotBeABaseURL&&"#"===o){c.scheme=n.scheme,c.path=wu(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=$d;break}l="file"===n.scheme?Ld:xd;continue;case Ed:if("/"!==o||"/"!==r[u+1]){l=xd;continue}l=Rd,u++;break;case Cd:if("/"===o){l=Od;break}l=Dd;continue;case xd:if(c.scheme=n.scheme,o===Pl)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=wu(n.path),c.query=n.query;else if("/"===o||"\\"===o&&c.isSpecial())l=kd;else if("?"===o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=wu(n.path),c.query="",l=Fd;else{if("#"!==o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=wu(n.path),c.path.length--,l=Dd;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=wu(n.path),c.query=n.query,c.fragment="",l=$d}break;case kd:if(!c.isSpecial()||"/"!==o&&"\\"!==o){if("/"!==o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=Dd;continue}l=Od}else l=Rd;break;case Pd:if(l=Rd,"/"!==o||"/"!==Du(d,u+1))continue;u++;break;case Rd:if("/"!==o&&"\\"!==o){l=Od;continue}break;case Od:if("@"===o){f&&(d="%40"+d),f=!0,i=mu(d);for(var g=0;g<i.length;g++){var v=i[g];if(":"!==v||h){var y=hd(v,pd);h?c.password+=y:c.username+=y}else h=!0}d=""}else if(o===Pl||"/"===o||"?"===o||"#"===o||"\\"===o&&c.isSpecial()){if(f&&""===d)return"Invalid authority";u-=mu(d).length+1,d="",l=_d}else d+=o;break;case _d:case Id:if(t&&"file"===c.scheme){l=jd;continue}if(":"!==o||p){if(o===Pl||"/"===o||"?"===o||"#"===o||"\\"===o&&c.isSpecial()){if(c.isSpecial()&&""===d)return Wu;if(t&&""===d&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(d))return s;if(d="",l=Ud,t)return;continue}"["===o?p=!0:"]"===o&&(p=!1),d+=o}else{if(""===d)return Wu;if(s=c.parseHost(d))return s;if(d="",l=Ad,t===Id)return}break;case Ad:if(!Hu(Zu,o)){if(o===Pl||"/"===o||"?"===o||"#"===o||"\\"===o&&c.isSpecial()||t){if(""!==d){var m=Tu(d,10);if(m>65535)return Xu;c.port=c.isSpecial()&&m===gd[c.scheme]?null:m,d=""}if(t)return;l=Ud;continue}return Xu}d+=o;break;case Ld:if(c.scheme="file","/"===o||"\\"===o)l=Td;else{if(!n||"file"!==n.scheme){l=Dd;continue}switch(o){case Pl:c.host=n.host,c.path=wu(n.path),c.query=n.query;break;case"?":c.host=n.host,c.path=wu(n.path),c.query="",l=Fd;break;case"#":c.host=n.host,c.path=wu(n.path),c.query=n.query,c.fragment="",l=$d;break;default:yd(Fu(wu(r,u),""))||(c.host=n.host,c.path=wu(n.path),c.shortenPath()),l=Dd;continue}}break;case Td:if("/"===o||"\\"===o){l=jd;break}n&&"file"===n.scheme&&!yd(Fu(wu(r,u),""))&&(vd(n.path[0],!0)?qu(c.path,n.path[0]):c.host=n.host),l=Dd;continue;case jd:if(o===Pl||"/"===o||"\\"===o||"?"===o||"#"===o){if(!t&&vd(d))l=Dd;else if(""===d){if(c.host="",t)return;l=Ud}else{if(s=c.parseHost(d))return s;if("localhost"===c.host&&(c.host=""),t)return;d="",l=Ud}continue}d+=o;break;case Ud:if(c.isSpecial()){if(l=Dd,"/"!==o&&"\\"!==o)continue}else if(t||"?"!==o)if(t||"#"!==o){if(o!==Pl&&(l=Dd,"/"!==o))continue}else c.fragment="",l=$d;else c.query="",l=Fd;break;case Dd:if(o===Pl||"/"===o||"\\"===o&&c.isSpecial()||!t&&("?"===o||"#"===o)){if(".."===(a=Vu(a=d))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(c.shortenPath(),"/"===o||"\\"===o&&c.isSpecial()||qu(c.path,"")):md(d)?"/"===o||"\\"===o&&c.isSpecial()||qu(c.path,""):("file"===c.scheme&&!c.path.length&&vd(d)&&(c.host&&(c.host=""),d=Du(d,0)+":"),qu(c.path,d)),d="","file"===c.scheme&&(o===Pl||"?"===o||"#"===o))for(;c.path.length>1&&""===c.path[0];)Bu(c.path);"?"===o?(c.query="",l=Fd):"#"===o&&(c.fragment="",l=$d)}else d+=hd(o,fd);break;case Hd:"?"===o?(c.query="",l=Fd):"#"===o?(c.fragment="",l=$d):o!==Pl&&(c.path[0]+=hd(o,ud));break;case Fd:t||"#"!==o?o!==Pl&&("'"===o&&c.isSpecial()?c.query+="%27":c.query+="#"===o?"%23":hd(o,ud)):(c.fragment="",l=$d);break;case $d:o!==Pl&&(c.fragment+=hd(o,dd))}u++}},parseHost:function(e){var t,n,r;if("["===Du(e,0)){if("]"!==Du(e,e.length-1))return Wu;if(t=function(e){var t,n,r,o,i,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,f=function(){return Du(e,d)};if(":"===f()){if(":"!==Du(e,1))return;d+=2,u=++l}for(;f();){if(8===l)return;if(":"!==f()){for(t=n=0;n<4&&Hu(rd,f());)t=16*t+Tu(f(),16),d++,n++;if("."===f()){if(0===n)return;if(d-=n,l>6)return;for(r=0;f();){if(o=null,r>0){if(!("."===f()&&r<4))return;d++}if(!Hu(Zu,f()))return;for(;Hu(Zu,f());){if(i=Tu(f(),10),null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;d++}c[l]=256*c[l]+o,2!=++r&&4!==r||l++}if(4!==r)return;break}if(":"===f()){if(d++,!f())return}else if(f())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(s=l-u,l=7;0!==l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!==l)return;return c}(Qu(e,1,-1)),!t)return Wu;this.host=t}else if(this.isSpecial()){if(e=Su(e),Hu(od,e))return Wu;if(t=function(e){var t,n,r,o,i,s,a,c=Gu(e,".");if(c.length&&""===c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""===(o=c[r]))return e;if(i=10,o.length>1&&"0"===Du(o,0)&&(i=Hu(ed,o)?16:8,o=Qu(o,8===i?1:2)),""===o)s=0;else{if(!Hu(10===i?nd:8===i?td:rd,o))return e;s=Tu(o,i)}qu(n,s)}for(r=0;r<t;r++)if(s=n[r],r===t-1){if(s>=Uu(256,5-t))return null}else if(s>255)return null;for(a=Nu(n),r=0;r<n.length;r++)a+=n[r]*Uu(256,3-r);return a}(e),null===t)return Wu;this.host=t}else{if(Hu(id,e))return Wu;for(t="",n=mu(e),r=0;r<n.length;r++)t+=hd(n[r],ud);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return vu(gd,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&vd(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==o?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=ld(o),null!==i&&(l+=":"+i)):"file"===t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+Fu(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw new Lu(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new qd(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+ld(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Eu(e)+":",wd)},getUsername:function(){return this.username},setUsername:function(e){var t=mu(Eu(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=hd(t[n],pd)}},getPassword:function(){return this.password},setPassword:function(e){var t=mu(Eu(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=hd(t[n],pd)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?ld(e):ld(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,_d)},getHostname:function(){var e=this.host;return null===e?"":ld(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Id)},getPort:function(){var e=this.port;return null===e?"":Eu(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=Eu(e))?this.port=null:this.parse(e,Ad))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Fu(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Ud))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=Eu(e))?this.query=null:("?"===Du(e,0)&&(e=Qu(e,1)),this.query="",this.parse(e,Fd)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=Eu(e))?("#"===Du(e,0)&&(e=Qu(e,1)),this.fragment="",this.parse(e,$d)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var qd=function(e){var t=gu(this,Md),n=xu(arguments.length,1)>1?arguments[1]:void 0,r=Ru(t,new Nd(e,!1,n));cu||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Md=qd.prototype,Bd=function(e,t){return{get:function(){return Ou(this)[e]()},set:t&&function(e){return Ou(this)[t](e)},configurable:!0,enumerable:!0}};if(cu&&(hu(Md,"href",Bd("serialize","setHref")),hu(Md,"origin",Bd("getOrigin")),hu(Md,"protocol",Bd("getProtocol","setProtocol")),hu(Md,"username",Bd("getUsername","setUsername")),hu(Md,"password",Bd("getPassword","setPassword")),hu(Md,"host",Bd("getHost","setHost")),hu(Md,"hostname",Bd("getHostname","setHostname")),hu(Md,"port",Bd("getPort","setPort")),hu(Md,"pathname",Bd("getPathname","setPathname")),hu(Md,"search",Bd("getSearch","setSearch")),hu(Md,"searchParams",Bd("getSearchParams")),hu(Md,"hash",Bd("getHash","setHash"))),pu(Md,"toJSON",(function(){return Ou(this).serialize()}),{enumerable:!0}),pu(Md,"toString",(function(){return Ou(this).serialize()}),{enumerable:!0}),Au){var Gd=Au.createObjectURL,Qd=Au.revokeObjectURL;Gd&&pu(qd,"createObjectURL",du(Gd,Au)),Qd&&pu(qd,"revokeObjectURL",du(Qd,Au))}Cu(qd,"URL"),au({global:!0,constructor:!0,forced:!lu,sham:!cu},{URL:qd});var Vd=qn,zd=n,Jd=ra,Wd=Ms,Xd=Ts,Kd=Fe("URL"),Yd=Xd&&zd((function(){Kd.canParse()})),Zd=zd((function(){return 1!==Kd.canParse.length}));Vd({target:"URL",stat:!0,forced:!Yd||Zd},{canParse:function(e){var t=Jd(arguments.length,1),n=Wd(e),r=t<2||void 0===arguments[1]?void 0:Wd(arguments[1]);try{return!!new Kd(n,r)}catch(e){return!1}}});var ef=qn,tf=ra,nf=Ms,rf=Ts,of=Fe("URL");ef({target:"URL",stat:!0,forced:!rf},{parse:function(e){var t=tf(arguments.length,1),n=nf(e),r=t<2||void 0===arguments[1]?void 0:nf(arguments[1]);try{return new of(n,r)}catch(e){return null}}});var sf=t(Te.URL),af="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",cf=f,lf=Ms,uf=af,df=c("".replace),ff=RegExp("^["+uf+"]+"),pf=RegExp("(^|[^"+uf+"])["+uf+"]+$"),hf=function(e){return function(t){var n=lf(cf(t));return 1&e&&(n=df(n,ff,"")),2&e&&(n=df(n,pf,"$1")),n}},gf={start:hf(1),end:hf(2),trim:hf(3)},vf=io.PROPER,yf=n,mf=af,wf=gf.trim;qn({target:"String",proto:!0,forced:function(e){return yf((function(){return!!mf[e]()||"âÂá "!=="âÂá "[e]()||vf&&mf[e].name!==e}))}("trim")},{trim:function(){return wf(this)}});var bf=ur("String","trim"),Sf=ne,Ef=bf,Cf=String.prototype,xf=t((function(e){var t=e.trim;return"string"==typeof e||e===Cf||Sf(Cf,e)&&t===Cf.trim?Ef:t})),kf=qn,Pf=Date,Rf=c(Pf.prototype.getTime);kf({target:"Date",stat:!0},{now:function(){return Rf(new Pf)}});var Of=t(Te.Date.now),_f=go.includes;qn({target:"Array",proto:!0,forced:n((function(){return!Array(1).includes()}))},{includes:function(e){return _f(this,e,arguments.length>1?arguments[1]:void 0)}});var If=ur("Array","includes"),Af=Le,Lf=E,Tf=Tt("match"),jf=function(e){var t;return Af(e)&&(void 0!==(t=e[Tf])?!!t:"RegExp"===Lf(e))},Uf=TypeError,Df=Tt("match"),Hf=qn,Ff=function(e){if(jf(e))throw new Uf("The method doesn't accept regular expressions");return e},$f=f,Nf=Ms,qf=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Df]=!1,"/./"[e](t)}catch(e){}}return!1},Mf=c("".indexOf);Hf({target:"String",proto:!0,forced:!qf("includes")},{includes:function(e){return!!~Mf(Nf($f(this)),Nf(Ff(e)),arguments.length>1?arguments[1]:void 0)}});var Bf=ur("String","includes"),Gf=ne,Qf=If,Vf=Bf,zf=Array.prototype,Jf=String.prototype,Wf=t((function(e){var t=e.includes;return e===zf||Gf(zf,e)&&t===zf.includes?Qf:"string"==typeof e||e===Jf||Gf(Jf,e)&&t===Jf.includes?Vf:t})),Xf=g,Kf=ko;qn({target:"Object",stat:!0,forced:n((function(){Kf(1)}))},{keys:function(e){return Kf(Xf(e))}});var Yf=c,Zf=m,ep=SyntaxError,tp=parseInt,np=String.fromCharCode,rp=Yf("".charAt),op=Yf("".slice),ip=Yf(/./.exec),sp={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},ap=/^[\da-f]{4}$/i,cp=/^[\u0000-\u001F]$/,lp=qn,up=fe,dp=$,fp=Fe,pp=c,hp=ge,gp=P,vp=Le,yp=x,mp=m,wp=Ms,bp=Xn,Sp=Al,Ep=n,Cp=function(e,t){for(var n=!0,r="";t<e.length;){var o=rp(e,t);if("\\"===o){var i=op(e,t,t+2);if(Zf(sp,i))r+=sp[i],t+=2;else{if("\\u"!==i)throw new ep('Unknown escape sequence: "'+i+'"');var s=op(e,t+=2,t+4);if(!ip(ap,s))throw new ep("Bad Unicode escape at: "+t);r+=np(tp(s,16)),t+=4}}else{if('"'===o){n=!1,t++;break}if(ip(cp,o))throw new ep("Bad control character in string literal at: "+t);r+=o,t++}}if(n)throw new ep("Unterminated string at: "+t);return{value:r,end:t}},xp=Ye,kp=dp.JSON,Pp=dp.Number,Rp=dp.SyntaxError,Op=kp&&kp.parse,_p=fp("Object","keys"),Ip=Object.getOwnPropertyDescriptor,Ap=pp("".charAt),Lp=pp("".slice),Tp=pp(/./.exec),jp=pp([].push),Up=/^\d$/,Dp=/^[1-9]$/,Hp=/^[\d-]$/,Fp=/^[\t\n\r ]$/,$p=function(e,t,n,r){var o,i,s,a,c,l=e[t],u=r&&l===r.value,d=u&&"string"==typeof r.source?{source:r.source}:{};if(vp(l)){var f=yp(l),p=u?r.nodes:f?[]:{};if(f)for(o=p.length,s=bp(l),a=0;a<s;a++)Np(l,a,$p(l,""+a,n,a<o?p[a]:void 0));else for(i=_p(l),s=bp(i),a=0;a<s;a++)c=i[a],Np(l,c,$p(l,c,n,mp(p,c)?p[c]:void 0))}return hp(n,e,t,l,d)},Np=function(e,t,n){if(up){var r=Ip(e,t);if(r&&!r.configurable)return}void 0===n?delete e[t]:Sp(e,t,n)},qp=function(e,t,n,r){this.value=e,this.end=t,this.source=n,this.nodes=r},Mp=function(e,t){this.source=e,this.index=t};Mp.prototype={fork:function(e){return new Mp(this.source,e)},parse:function(){var e=this.source,t=this.skip(Fp,this.index),n=this.fork(t),r=Ap(e,t);if(Tp(Hp,r))return n.number();switch(r){case"{":return n.object();case"[":return n.array();case'"':return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null)}throw new Rp('Unexpected character: "'+r+'" at: '+t)},node:function(e,t,n,r,o){return new qp(t,r,e?null:Lp(this.source,n,r),o)},object:function(){for(var e=this.source,t=this.index+1,n=!1,r={},o={};t<e.length;){if(t=this.until(['"',"}"],t),"}"===Ap(e,t)&&!n){t++;break}var i=this.fork(t).string(),s=i.value;t=i.end,t=this.until([":"],t)+1,t=this.skip(Fp,t),i=this.fork(t).parse(),Sp(o,s,i),Sp(r,s,i.value),t=this.until([",","}"],i.end);var a=Ap(e,t);if(","===a)n=!0,t++;else if("}"===a){t++;break}}return this.node(1,r,this.index,t,o)},array:function(){for(var e=this.source,t=this.index+1,n=!1,r=[],o=[];t<e.length;){if(t=this.skip(Fp,t),"]"===Ap(e,t)&&!n){t++;break}var i=this.fork(t).parse();if(jp(o,i),jp(r,i.value),t=this.until([",","]"],i.end),","===Ap(e,t))n=!0,t++;else if("]"===Ap(e,t)){t++;break}}return this.node(1,r,this.index,t,o)},string:function(){var e=this.index,t=Cp(this.source,this.index+1);return this.node(0,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,n=t;if("-"===Ap(e,n)&&n++,"0"===Ap(e,n))n++;else{if(!Tp(Dp,Ap(e,n)))throw new Rp("Failed to parse number at: "+n);n=this.skip(Up,n+1)}if(("."===Ap(e,n)&&(n=this.skip(Up,n+1)),"e"===Ap(e,n)||"E"===Ap(e,n))&&(n++,"+"!==Ap(e,n)&&"-"!==Ap(e,n)||n++,n===(n=this.skip(Up,n))))throw new Rp("Failed to parse number's exponent value at: "+n);return this.node(0,Pp(Lp(e,t,n)),t,n)},keyword:function(e){var t=""+e,n=this.index,r=n+t.length;if(Lp(this.source,n,r)!==t)throw new Rp("Failed to parse value at: "+n);return this.node(0,e,n,r)},skip:function(e,t){for(var n=this.source;t<n.length&&Tp(e,Ap(n,t));t++);return t},until:function(e,t){t=this.skip(Fp,t);for(var n=Ap(this.source,t),r=0;r<e.length;r++)if(e[r]===n)return t;throw new Rp('Unexpected character: "'+n+'" at: '+t)}};var Bp=Ep((function(){var e,t="9007199254740993";return Op(t,(function(t,n,r){e=r.source})),e!==t})),Gp=xp&&!Ep((function(){return 1/Op("-0 \t")!=-1/0}));lp({target:"JSON",stat:!0,forced:Bp},{parse:function(e,t){return Gp&&!gp(t)?Op(e):function(e,t){e=wp(e);var n=new Mp(e,0),r=n.parse(),o=r.value,i=n.skip(Fp,r.end);if(i<e.length)throw new Rp('Unexpected extra character: "'+Ap(e,i)+'" after the parsed data at: '+i);return gp(t)?$p({"":o},"",t,r):o}(e,t)}});var Qp=t(Te.JSON.parse),Vp=ln,zp=ge,Jp=gn,Wp=st,Xp=ll,Kp=Xn,Yp=ne,Zp=ta,eh=Js,th=rl,nh=TypeError,rh=function(e,t){this.stopped=e,this.result=t},oh=rh.prototype,ih=function(e,t,n){var r,o,i,s,a,c,l,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),g=Vp(t,u),v=function(e){return r&&th(r,"normal",e),new rh(!0,e)},y=function(e){return d?(Jp(e),h?g(e[0],e[1],v):g(e[0],e[1])):h?g(e,v):g(e)};if(f)r=e.iterator;else if(p)r=e;else{if(!(o=eh(e)))throw new nh(Wp(e)+" is not iterable");if(Xp(o)){for(i=0,s=Kp(e);s>i;i++)if((a=y(e[i]))&&Yp(oh,a))return a;return new rh(!1)}r=Zp(e,o)}for(c=f?e.next:r.next;!(l=zp(c,r)).done;){try{a=y(l.value)}catch(e){th(r,"throw",e)}if("object"==typeof a&&a&&Yp(oh,a))return a}return new rh(!1)},sh=ih,ah=Al;qn({target:"Object",stat:!0},{fromEntries:function(e){var t={};return sh(e,(function(e,n){ah(t,e,n)}),{AS_ENTRIES:!0}),t}});var ch=Te.Object.fromEntries,lh={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},uh=$,dh=Ui,fh=Lr;for(var ph in lh)dh(uh[ph],ph),fh[ph]=fh.Array;var hh=t(ch),gh=fe,vh=n,yh=c,mh=ii,wh=ko,bh=Ie,Sh=yh(ve.f),Eh=yh([].push),Ch=gh&&vh((function(){var e=Object.create(null);return e[2]=2,!Sh(e,2)})),xh=function(e){return function(t){for(var n,r=bh(t),o=wh(r),i=Ch&&null===mh(r),s=o.length,a=0,c=[];s>a;)n=o[a++],gh&&!(i?n in r:Sh(r,n))||Eh(c,e?[n,r[n]]:r[n]);return c}},kh={entries:xh(!0),values:xh(!1)}.entries;qn({target:"Object",stat:!0},{entries:function(e){return kh(e)}});var Ph=t(Te.Object.entries),Rh={},Oh=So,_h=Eo.concat("length","prototype");Rh.f=Object.getOwnPropertyNames||function(e){return Oh(e,_h)};var Ih=Fe,Ah=Rh,Lh=Nc,Th=gn,jh=c([].concat),Uh=Ih("Reflect","ownKeys")||function(e){var t=Ah.f(Th(e)),n=Lh.f;return n?jh(t,n(e)):t},Dh=m,Hh=Uh,Fh=de,$h=un,Nh=Le,qh=_n,Mh=Error,Bh=c("".replace),Gh=String(new Mh("zxcasd").stack),Qh=/\n\s*at [^:]*:[^\n]*/,Vh=Qh.test(Gh),zh=Ee,Jh=!n((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",zh(1,7)),7!==e.stack)})),Wh=_n,Xh=function(e,t){if(Vh&&"string"==typeof e&&!Mh.prepareStackTrace)for(;t--;)e=Bh(e,Qh,"");return e},Kh=Jh,Yh=Error.captureStackTrace,Zh=Ms,eg=qn,tg=ne,ng=ii,rg=Zi,og=function(e,t,n){for(var r=Hh(t),o=$h.f,i=Fh.f,s=0;s<r.length;s++){var a=r[s];Dh(e,a)||n&&Dh(n,a)||o(e,a,i(t,a))}},ig=Xo,sg=_n,ag=Ee,cg=function(e,t){Nh(t)&&"cause"in t&&qh(e,"cause",t.cause)},lg=function(e,t,n,r){Kh&&(Yh?Yh(e,t):Wh(e,"stack",Xh(n,r)))},ug=ih,dg=function(e,t){return void 0===e?arguments.length<2?"":t:Zh(e)},fg=Tt("toStringTag"),pg=Error,hg=[].push,gg=function(e,t){var n,r=tg(vg,this);rg?n=rg(new pg,r?ng(this):vg):(n=r?this:ig(vg),sg(n,fg,"Error")),void 0!==t&&sg(n,"message",dg(t)),lg(n,gg,n.stack,1),arguments.length>2&&cg(n,arguments[2]);var o=[];return ug(e,hg,{that:o}),sg(n,"errors",o),n};rg?rg(gg,pg):og(gg,pg,{name:!0});var vg=gg.prototype=ig(pg.prototype,{constructor:ag(1,gg),message:ag(1,""),name:ag(1,"AggregateError")});eg({global:!0,constructor:!0,arity:2},{AggregateError:gg});var yg,mg,wg,bg,Sg=$,Eg=qe,Cg=E,xg=function(e){return Eg.slice(0,e.length)===e},kg=xg("Bun/")?"BUN":xg("Cloudflare-Workers")?"CLOUDFLARE":xg("Deno/")?"DENO":xg("Node.js/")?"NODE":Sg.Bun&&"string"==typeof Bun.version?"BUN":Sg.Deno&&"object"==typeof Deno.version?"DENO":"process"===Cg(Sg.process)?"NODE":Sg.window&&Sg.document?"BROWSER":"REST",Pg="NODE"===kg,Rg=Fe,Og=Us,_g=fe,Ig=Tt("species"),Ag=Rl,Lg=st,Tg=TypeError,jg=gn,Ug=function(e){if(Ag(e))return e;throw new Tg(Lg(e)+" is not a constructor")},Dg=l,Hg=Tt("species"),Fg=function(e,t){var n,r=jg(e).constructor;return void 0===r||Dg(n=jg(r)[Hg])?t:Ug(n)},$g=/(?:ipad|iphone|ipod).*applewebkit/i.test(qe),Ng=$,qg=ae,Mg=ln,Bg=P,Gg=m,Qg=n,Vg=To,zg=oa,Jg=zt,Wg=ra,Xg=$g,Kg=Pg,Yg=Ng.setImmediate,Zg=Ng.clearImmediate,ev=Ng.process,tv=Ng.Dispatch,nv=Ng.Function,rv=Ng.MessageChannel,ov=Ng.String,iv=0,sv={},av="onreadystatechange";Qg((function(){yg=Ng.location}));var cv=function(e){if(Gg(sv,e)){var t=sv[e];delete sv[e],t()}},lv=function(e){return function(){cv(e)}},uv=function(e){cv(e.data)},dv=function(e){Ng.postMessage(ov(e),yg.protocol+"//"+yg.host)};Yg&&Zg||(Yg=function(e){Wg(arguments.length,1);var t=Bg(e)?e:nv(e),n=zg(arguments,1);return sv[++iv]=function(){qg(t,void 0,n)},mg(iv),iv},Zg=function(e){delete sv[e]},Kg?mg=function(e){ev.nextTick(lv(e))}:tv&&tv.now?mg=function(e){tv.now(lv(e))}:rv&&!Xg?(bg=(wg=new rv).port2,wg.port1.onmessage=uv,mg=Mg(bg.postMessage,bg)):Ng.addEventListener&&Bg(Ng.postMessage)&&!Ng.importScripts&&yg&&"file:"!==yg.protocol&&!Qg(dv)?(mg=dv,Ng.addEventListener("message",uv,!1)):mg=av in Jg("script")?function(e){Vg.appendChild(Jg("script"))[av]=function(){Vg.removeChild(this),cv(e)}}:function(e){setTimeout(lv(e),0)});var fv={set:Yg,clear:Zg},pv=function(){this.head=null,this.tail=null};pv.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var hv,gv,vv,yv,mv,wv=pv,bv=/ipad|iphone|ipod/i.test(qe)&&"undefined"!=typeof Pebble,Sv=/web0s(?!.*chrome)/i.test(qe),Ev=$,Cv=_s,xv=ln,kv=fv.set,Pv=wv,Rv=$g,Ov=bv,_v=Sv,Iv=Pg,Av=Ev.MutationObserver||Ev.WebKitMutationObserver,Lv=Ev.document,Tv=Ev.process,jv=Ev.Promise,Uv=Cv("queueMicrotask");if(!Uv){var Dv=new Pv,Hv=function(){var e,t;for(Iv&&(e=Tv.domain)&&e.exit();t=Dv.get();)try{t()}catch(e){throw Dv.head&&hv(),e}e&&e.enter()};Rv||Iv||_v||!Av||!Lv?!Ov&&jv&&jv.resolve?((yv=jv.resolve(void 0)).constructor=jv,mv=xv(yv.then,yv),hv=function(){mv(Hv)}):Iv?hv=function(){Tv.nextTick(Hv)}:(kv=xv(kv,Ev),hv=function(){kv(Hv)}):(gv=!0,vv=Lv.createTextNode(""),new Av(Hv).observe(vv,{characterData:!0}),hv=function(){vv.data=gv=!gv}),Uv=function(e){Dv.head||hv(),Dv.add(e)}}var Fv=Uv,$v=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Nv=$.Promise,qv=$,Mv=Nv,Bv=P,Gv=U,Qv=pl,Vv=Tt,zv=kg,Jv=Je,Wv=Mv&&Mv.prototype,Xv=Vv("species"),Kv=!1,Yv=Bv(qv.PromiseRejectionEvent),Zv=Gv("Promise",(function(){var e=Qv(Mv),t=e!==String(Mv);if(!t&&66===Jv)return!0;if(!Wv.catch||!Wv.finally)return!0;if(!Jv||Jv<51||!/native code/.test(e)){var n=new Mv((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[Xv]=r,!(Kv=n.then((function(){}))instanceof r))return!0}return!(t||"BROWSER"!==zv&&"DENO"!==zv||Yv)})),ey={CONSTRUCTOR:Zv,REJECTION_EVENT:Yv,SUBCLASSING:Kv},ty={},ny=ut,ry=TypeError,oy=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new ry("Bad Promise constructor");t=e,n=r})),this.resolve=ny(t),this.reject=ny(n)};ty.f=function(e){return new oy(e)};var iy,sy,ay=qn,cy=Pg,ly=$,uy=ge,dy=ai,fy=Ui,py=function(e){var t=Rg(e);_g&&t&&!t[Ig]&&Og(t,Ig,{configurable:!0,get:function(){return this}})},hy=ut,gy=P,vy=Le,yy=$s,my=Fg,wy=fv.set,by=Fv,Sy=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}},Ey=$v,Cy=wv,xy=Zr,ky=Nv,Py=ey,Ry=ty,Oy="Promise",_y=Py.CONSTRUCTOR,Iy=Py.REJECTION_EVENT,Ay=xy.getterFor(Oy),Ly=xy.set,Ty=ky&&ky.prototype,jy=ky,Uy=Ty,Dy=ly.TypeError,Hy=ly.document,Fy=ly.process,$y=Ry.f,Ny=$y,qy=!!(Hy&&Hy.createEvent&&ly.dispatchEvent),My="unhandledrejection",By=function(e){var t;return!(!vy(e)||!gy(t=e.then))&&t},Gy=function(e,t){var n,r,o,i=t.value,s=1===t.state,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&Wy(t),t.rejection=1),!0===a?n=i:(u&&u.enter(),n=a(i),u&&(u.exit(),o=!0)),n===e.promise?l(new Dy("Promise-chain cycle")):(r=By(n))?uy(r,n,c,l):c(n)):l(i)}catch(e){u&&!o&&u.exit(),l(e)}},Qy=function(e,t){e.notified||(e.notified=!0,by((function(){for(var n,r=e.reactions;n=r.get();)Gy(n,e);e.notified=!1,t&&!e.rejection&&zy(e)})))},Vy=function(e,t,n){var r,o;qy?((r=Hy.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),ly.dispatchEvent(r)):r={promise:t,reason:n},!Iy&&(o=ly["on"+e])?o(r):e===My&&Sy("Unhandled promise rejection",n)},zy=function(e){uy(wy,ly,(function(){var t,n=e.facade,r=e.value;if(Jy(e)&&(t=Ey((function(){cy?Fy.emit("unhandledRejection",r,n):Vy(My,n,r)})),e.rejection=cy||Jy(e)?2:1,t.error))throw t.value}))},Jy=function(e){return 1!==e.rejection&&!e.parent},Wy=function(e){uy(wy,ly,(function(){var t=e.facade;cy?Fy.emit("rejectionHandled",t):Vy("rejectionhandled",t,e.value)}))},Xy=function(e,t,n){return function(r){e(t,r,n)}},Ky=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Qy(e,!0))},Yy=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new Dy("Promise can't be resolved itself");var r=By(t);r?by((function(){var n={done:!1};try{uy(r,t,Xy(Yy,n,e),Xy(Ky,n,e))}catch(t){Ky(n,t,e)}})):(e.value=t,e.state=1,Qy(e,!1))}catch(t){Ky({done:!1},t,e)}}};_y&&(Uy=(jy=function(e){yy(this,Uy),hy(e),uy(iy,this);var t=Ay(this);try{e(Xy(Yy,t),Xy(Ky,t))}catch(e){Ky(t,e)}}).prototype,(iy=function(e){Ly(this,{type:Oy,done:!1,notified:!1,parent:!1,reactions:new Cy,rejection:!1,state:0,value:void 0})}).prototype=dy(Uy,"then",(function(e,t){var n=Ay(this),r=$y(my(this,jy));return n.parent=!0,r.ok=!gy(e)||e,r.fail=gy(t)&&t,r.domain=cy?Fy.domain:void 0,0===n.state?n.reactions.add(r):by((function(){Gy(r,n)})),r.promise})),sy=function(){var e=new iy,t=Ay(e);this.promise=e,this.resolve=Xy(Yy,t),this.reject=Xy(Ky,t)},Ry.f=$y=function(e){return e===jy||undefined===e?new sy(e):Ny(e)}),ay({global:!0,constructor:!0,wrap:!0,forced:_y},{Promise:jy}),fy(jy,Oy,!1,!0),py(Oy);var Zy=Tt("iterator"),em=!1;try{var tm=0,nm={next:function(){return{done:!!tm++}},return:function(){em=!0}};nm[Zy]=function(){return this},Array.from(nm,(function(){throw 2}))}catch(e){}var rm=Nv,om=function(e,t){try{if(!t&&!em)return!1}catch(e){return!1}var n=!1;try{var r={};r[Zy]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},im=ey.CONSTRUCTOR||!om((function(e){rm.all(e).then(void 0,(function(){}))})),sm=ge,am=ut,cm=ty,lm=$v,um=ih;qn({target:"Promise",stat:!0,forced:im},{all:function(e){var t=this,n=cm.f(t),r=n.resolve,o=n.reject,i=lm((function(){var n=am(t.resolve),i=[],s=0,a=1;um(e,(function(e){var c=s++,l=!1;a++,sm(n,t,e).then((function(e){l||(l=!0,i[c]=e,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise}});var dm=qn,fm=ey.CONSTRUCTOR;Nv&&Nv.prototype,dm({target:"Promise",proto:!0,forced:fm,real:!0},{catch:function(e){return this.then(void 0,e)}});var pm=ge,hm=ut,gm=ty,vm=$v,ym=ih;qn({target:"Promise",stat:!0,forced:im},{race:function(e){var t=this,n=gm.f(t),r=n.reject,o=vm((function(){var o=hm(t.resolve);ym(e,(function(e){pm(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var mm=ty;qn({target:"Promise",stat:!0,forced:ey.CONSTRUCTOR},{reject:function(e){var t=mm.f(this);return(0,t.reject)(e),t.promise}});var wm=gn,bm=Le,Sm=ty,Em=function(e,t){if(wm(e),bm(t)&&t.constructor===e)return t;var n=Sm.f(e);return(0,n.resolve)(t),n.promise},Cm=qn,xm=Nv,km=ey.CONSTRUCTOR,Pm=Em,Rm=Fe("Promise"),Om=!km;Cm({target:"Promise",stat:!0,forced:true},{resolve:function(e){return Pm(Om&&this===Rm?xm:this,e)}});var _m=ge,Im=ut,Am=ty,Lm=$v,Tm=ih;qn({target:"Promise",stat:!0,forced:im},{allSettled:function(e){var t=this,n=Am.f(t),r=n.resolve,o=n.reject,i=Lm((function(){var n=Im(t.resolve),o=[],i=0,s=1;Tm(e,(function(e){var a=i++,c=!1;s++,_m(n,t,e).then((function(e){c||(c=!0,o[a]={status:"fulfilled",value:e},--s||r(o))}),(function(e){c||(c=!0,o[a]={status:"rejected",reason:e},--s||r(o))}))})),--s||r(o)}));return i.error&&o(i.value),n.promise}});var jm=ge,Um=ut,Dm=Fe,Hm=ty,Fm=$v,$m=ih,Nm="No one promise resolved";qn({target:"Promise",stat:!0,forced:im},{any:function(e){var t=this,n=Dm("AggregateError"),r=Hm.f(t),o=r.resolve,i=r.reject,s=Fm((function(){var r=Um(t.resolve),s=[],a=0,c=1,l=!1;$m(e,(function(e){var u=a++,d=!1;c++,jm(r,t,e).then((function(e){d||l||(l=!0,o(e))}),(function(e){d||l||(d=!0,s[u]=e,--c||i(new n(s,Nm)))}))})),--c||i(new n(s,Nm))}));return s.error&&i(s.value),r.promise}});var qm=ty;qn({target:"Promise",stat:!0},{withResolvers:function(){var e=qm.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var Mm=qn,Bm=Nv,Gm=n,Qm=Fe,Vm=P,zm=Fg,Jm=Em,Wm=Bm&&Bm.prototype;Mm({target:"Promise",proto:!0,real:!0,forced:!!Bm&&Gm((function(){Wm.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=zm(this,Qm("Promise")),n=Vm(e);return this.then(n?function(n){return Jm(t,e()).then((function(){return n}))}:e,n?function(n){return Jm(t,e()).then((function(){throw n}))}:e)}});var Xm=Te.Promise,Km=qn,Ym=ae,Zm=oa,ew=ty,tw=ut,nw=$v,rw=$.Promise,ow=!1;Km({target:"Promise",stat:!0,forced:!rw||!rw.try||nw((function(){rw.try((function(e){ow=8===e}),8)})).error||!ow},{try:function(e){var t=arguments.length>1?Zm(arguments,1):[],n=ew.f(this),r=nw((function(){return Ym(tw(e),void 0,t)}));return(r.error?n.reject:n.resolve)(r.value),n.promise}});var iw=t(Xm),sw=ur("Array","values"),aw=Pi,cw=m,lw=ne,uw=sw,dw=Array.prototype,fw={DOMTokenList:!0,NodeList:!0},pw=t((function(e){var t=e.values;return e===dw||lw(dw,e)&&t===dw.values||cw(fw,aw(e))?uw:t})),hw=Uh,gw=Ie,vw=de,yw=Al;qn({target:"Object",stat:!0,sham:!fe},{getOwnPropertyDescriptors:function(e){for(var t,n,r=gw(e),o=vw.f,i=hw(r),s={},a=0;i.length>a;)void 0!==(n=o(r,t=i[a++]))&&yw(s,t,n);return s}});var mw=t(Te.Object.getOwnPropertyDescriptors);function ww(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):iw.resolve(c).then(r,o)}function bw(e){return function(){var t=this,n=arguments;return new iw((function(r,o){var i=e.apply(t,n);function s(e){ww(i,r,o,s,a,"next",e)}function a(e){ww(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),gr(n).apply(n,r)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sw(Object(n),!0).forEach((function(t){Cw(e,t,n[t])})):mw?Object.defineProperties(e,mw(n)):Sw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xw(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?null!==(n=e&&(null===(r=Object.getPrototypeOf(e))||void 0===r||null===(r=r.constructor)||void 0===r?void 0:r.name))&&void 0!==n?n:"null":t;var n,r}function kw(e,t,n,r,o){var i,s,a,c,l,u,d,f;const p=o&&"input"in o?o.input:n.value,h=null!==(i=null!==(s=null==o?void 0:o.expected)&&void 0!==s?s:e.expects)&&void 0!==i?i:null,g=null!==(a=null==o?void 0:o.received)&&void 0!==a?a:xw(p),v={kind:e.kind,type:e.type,input:p,expected:h,received:g,message:`Invalid ${t}: ${h?`Expected ${h} but r`:"R"}eceived ${g}`,requirement:e.requirement,path:null==o?void 0:o.path,issues:null==o?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},y="schema"===e.kind,m=null!==(c=null!==(l=null!==(u=null!==(d=null!==(f=null==o?void 0:o.message)&&void 0!==f?f:e.message)&&void 0!==d?d:(e.reference,void v.lang))&&void 0!==u?u:y?void v.lang:null)&&void 0!==l?l:r.message)&&void 0!==c?c:void v.lang;var w;(m&&(v.message="function"==typeof m?m(v):m),y&&(n.typed=!1),n.issues)?gr(w=n.issues).call(w,v):n.issues=[v]}function Pw(e,t){return vr(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function Rw(e){return{kind:"transformation",type:"transform",reference:Rw,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function Ow(e,t){return{kind:"schema",type:"array",reference:Ow,expects:"Array",async:!1,item:e,message:t,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let s=0;s<n.length;s++){var r;const a=n[s],c=this.item._run({typed:!1,value:a},t);if(c.issues){const r={type:"array",origin:"value",input:n,key:s,value:a};for(const t of c.issues){var o,i;if(t.path)Ar(i=t.path).call(i,r);else t.path=[r];null===(o=e.issues)||void 0===o||gr(o).call(o,t)}if(e.issues||(e.issues=c.issues),t.abortEarly){e.typed=!1;break}}c.typed||(e.typed=!1),gr(r=e.value).call(r,c.value)}}else kw(this,"type",e,t);return e}}}function _w(e){return{kind:"schema",type:"boolean",reference:_w,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:kw(this,"type",e,t),e}}}function Iw(e,t){return{kind:"schema",type:"custom",reference:Iw,expects:"unknown",async:!1,check:e,message:t,_run(e,t){return this.check(e.value)?e.typed=!0:kw(this,"type",e,t),e}}}function Aw(e,t){if(typeof e==typeof t){if(e===t||e instanceof Date&&t instanceof Date&&+e==+t)return{value:e};if(e&&t&&e.constructor===Object&&t.constructor===Object){for(const n in t)if(n in e){const r=Aw(e[n],t[n]);if(r.issue)return r;e[n]=r.value}else e[n]=t[n];return{value:e}}if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){for(let n=0;n<e.length;n++){const r=Aw(e[n],t[n]);if(r.issue)return r;e[n]=r.value}return{value:e}}}return{issue:!0}}function Lw(e){return{kind:"schema",type:"lazy",reference:Lw,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function Tw(e,t){return{kind:"schema",type:"literal",reference:Tw,expects:xw(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:kw(this,"type",e,t),e}}}function jw(e,t){return{kind:"schema",type:"loose_object",reference:jw,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const i in this.entries){const s=n[i],a=this.entries[i]._run({typed:!1,value:s},t);if(a.issues){const c={type:"object",origin:"value",input:n,key:i,value:s};for(const t of a.issues){var r,o;if(t.path)Ar(o=t.path).call(o,c);else t.path=[c];null===(r=e.issues)||void 0===r||gr(r).call(r,t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),(void 0!==a.value||i in n)&&(e.value[i]=a.value)}if(!e.issues||!t.abortEarly)for(const t in n)Pw(n,t)&&!(t in this.entries)&&(e.value[t]=n[t])}else kw(this,"type",e,t);return e}}}function Uw(e){return{kind:"schema",type:"number",reference:Uw,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?kw(this,"type",e,t):e.typed=!0,e}}}function Dw(e,t){return{kind:"schema",type:"object",reference:Dw,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const i in this.entries){const s=n[i],a=this.entries[i]._run({typed:!1,value:s},t);if(a.issues){const c={type:"object",origin:"value",input:n,key:i,value:s};for(const t of a.issues){var r,o;if(t.path)Ar(o=t.path).call(o,c);else t.path=[c];null===(r=e.issues)||void 0===r||gr(r).call(r,t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),(void 0!==a.value||i in n)&&(e.value[i]=a.value)}}else kw(this,"type",e,t);return e}}}function Hw(e,...t){const n={kind:"schema",type:"optional",reference:Hw,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=function(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function Fw(e,t,n){return{kind:"schema",type:"record",reference:Fw,expects:"Object",async:!1,key:e,value:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const s in n)if(Pw(n,s)){const a=n[s],c=this.key._run({typed:!1,value:s},t);if(c.issues){const o={type:"object",origin:"key",input:n,key:s,value:a};for(const t of c.issues){var r;t.path=[o],null===(r=e.issues)||void 0===r||gr(r).call(r,t)}if(e.issues||(e.issues=c.issues),t.abortEarly){e.typed=!1;break}}const l=this.value._run({typed:!1,value:a},t);if(l.issues){const r={type:"object",origin:"value",input:n,key:s,value:a};for(const t of l.issues){var o,i;if(t.path)Ar(i=t.path).call(i,r);else t.path=[r];null===(o=e.issues)||void 0===o||gr(o).call(o,t)}if(e.issues||(e.issues=l.issues),t.abortEarly){e.typed=!1;break}}c.typed&&l.typed||(e.typed=!1),c.typed&&(e.value[c.value]=l.value)}}else kw(this,"type",e,t);return e}}}function $w(e){return{kind:"schema",type:"string",reference:$w,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:kw(this,"type",e,t),e}}}function Nw(e){let t;if(e)for(const n of e)t?gr(t).call(t,...n.issues):t=n.issues;return t}function qw(e,t){return{kind:"schema",type:"union",reference:qw,expects:[...new Set(e.map((e=>e.expects)))].join(" | ")||"never",async:!1,options:e,message:t,_run(e,t){var n;let r,o,i;for(const n of this.options){const s=n._run({typed:!1,value:e.value},t);if(s.typed){if(!s.issues){r=s;break}o?gr(o).call(o,s):o=[s]}else i?gr(i).call(i,s):i=[s]}if(r)return r;if(o){if(1===o.length)return o[0];kw(this,"type",e,t,{issues:Nw(o)}),e.typed=!0}else{if(1===(null===(n=i)||void 0===n?void 0:n.length))return i[0];kw(this,"type",e,t,{issues:Nw(i)})}return e}}}function Mw(e,t,n=new Set){for(const r of t)"variant"===r.type?Mw(e,r.options,n):n.add(r.entries[e].expects);return n}function Bw(e,t,n){let r;return{kind:"schema",type:"variant",reference:Bw,expects:"Object",async:!1,key:e,options:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){const o=n[this.key];if(this.key in n){let e;for(const r of this.options)if("variant"===r.type||!r.entries[this.key]._run({typed:!1,value:o},t).issues){const o=r._run({typed:!1,value:n},t);if(!o.issues)return o;(!e||!e.typed&&o.typed)&&(e=o)}if(e)return e}r||(r=[...Mw(this.key,this.options)].join(" | ")||"never"),kw(this,"type",e,t,{input:o,expected:r,path:[{type:"object",origin:"value",input:n,key:this.key,value:o}]})}else kw(this,"type",e,t);return e}}}function Gw(e,t){const n={};for(const t in e.entries)n[t]=Hw(e.entries[t]);return Ew(Ew({},e),{},{entries:n})}function Qw(...e){return Ew(Ew({},e[0]),{},{pipe:e,_run(t,n){for(let r=0;r<e.length;r++){if(t.issues&&("schema"===e[r].kind||"transformation"===e[r].kind)){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=e[r]._run(t,n))}return t}})}function Vw(e,t,n){const r=e._run({typed:!1,value:t},function(e){var t,n,r;return{lang:null!==(t=null==e?void 0:e.lang)&&void 0!==t?t:void 0,message:null==e?void 0:e.message,abortEarly:null!==(n=null==e?void 0:e.abortEarly)&&void 0!==n?n:void 0,abortPipeEarly:null!==(r=null==e?void 0:e.abortPipeEarly)&&void 0!==r?r:void 0}}(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}class zw extends Error{constructor(e,t,n){super(t,n),Cw(this,"cause",void 0),this.name=e,n&&n.cause&&(this.cause=n.cause)}}class Jw extends zw{constructor(){super("BlockedByConsentError","Blocked by consent settings")}}function Ww(e){return e instanceof Jw||e instanceof Error&&null!=e.cause&&Ww(e.cause)}function Xw(e){const{pageDetails:t,urlCollectionSettings:n,logger:r}=e;if(null==t.pageUrl)return{isPathRemoved:!1,blockedQueryParams:[]};if("full"===(o=n).mode&&""===o.queryParametersFilter)return{url:t.pageUrl,isPathRemoved:!1,blockedQueryParams:[]};var o;const i=new sf(t.pageUrl),s=function(e,t){if("no_path"===t.mode&&"/"!==e.pathname)return e.pathname="",!0;return!1}(i,n),a=function(e,t,n){if(null==t.queryParametersFilter||""===t.queryParametersFilter)return[];try{const n=new RegExp(t.queryParametersFilter),r=new Set;return e.searchParams.forEach(((e,t)=>{n.test(t)&&r.add(t)})),r.forEach((t=>e.searchParams.delete(t))),Array.from(r)}catch(e){return n.error(new Kw(e)),[]}}(i,n,r);return{url:i,isPathRemoved:s,blockedQueryParams:a}}class Kw extends zw{constructor(e){super("FailedToStripQueryParameterError","Failed to strip query parameters",{cause:e})}}function Yw(e){const t=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt("0x"+t,16))));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}for(var Zw=[],eb=0;eb<64;)Zw[eb]=0|4294967296*Math.sin(++eb%Math.PI);function tb(e){var t,n,r,o=[t=1732584193,n=4023233417,~t,~n],i=[],s=unescape(encodeURI(e))+"Â",a=s.length;for(e=--a/4+2|15,i[--e]=8*a;~a;)i[a>>2]|=s.charCodeAt(a)<<8*a--;for(eb=s=0;eb<e;eb+=16){for(a=o;s<64;a=[r=a[3],t+((r=a[0]+[t&n|~t&r,r&t|~r&n,t^n^r,n^(t|~r)][a=s>>4]+Zw[s]+~~i[eb|15&[s,5*s+1,3*s+5,7*s][a]])<<(a=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*a+s++%4])|r>>>-a),t,n])t=0|a[1],n=a[2];for(s=4;s;)o[--s]+=a[s]}for(e="";s<32;)e+=(o[s>>3]>>4*(1^s++)&15).toString(16);return e}function nb(e){var t,n,r,o,i,s=[],a=[n=1732584193,r=4023233417,~n,~r,3285377520],c=[],l=unescape(encodeURI(e))+"Â",u=l.length;for(c[e=--u/4+2|15]=8*u;~u;)c[u>>2]|=l.charCodeAt(u)<<8*~u--;for(t=u=0;t<e;t+=16){for(n=a;u<80;n=[n[4]+(s[u]=u<16?~~c[t+u]:2*l|l<0)+1518500249+[r&o|~r&i,l=341275144+(r^o^i),882459459+(r&o|r&i|o&i),l+1535694389][u++/5>>2]+((l=n[0])<<5|l>>>27),l,r<<30|r>>>2,o,i])l=s[u-3]^s[u-8]^s[u-14]^s[u-16],r=n[1],o=n[2],i=n[3];for(u=5;u;)a[--u]+=n[u]}for(l="";u<40;)l+=(a[u>>3]>>4*(7-u++)&15).toString(16);return l}for(var rb,ob=18,ib=[],sb=[];ob>1;ob--)for(rb=ob;rb<320;)ib[rb+=ob]=1;function ab(e,t){return 4294967296*Math.pow(e,1/t)|0}for(rb=0;rb<64;)ib[++ob]||(sb[rb]=ab(ob,2),ib[rb++]=ab(ob,3));function cb(e,t){return e>>>t|e<<-t}function lb(e){var t=sb.slice(ob=rb=0,8),n=[],r=unescape(encodeURI(e))+"Â",o=r.length;for(n[e=--o/4+2|15]=8*o;~o;)n[o>>2]|=r.charCodeAt(o)<<8*~o--;for(o=[];ob<e;ob+=16){for(ab=t.slice();rb<64;Ar(ab).call(ab,r+(cb(r=ab[0],2)^cb(r,13)^cb(r,22))+(r&ab[1]^ab[1]&ab[2]^ab[2]&r)))ab[3]+=r=0|(o[rb]=rb<16?~~n[rb+ob]:(cb(r=o[rb-2],17)^cb(r,19)^r>>>10)+o[rb-7]+(cb(r=o[rb-15],7)^cb(r,18)^r>>>3)+o[rb-16])+ab.pop()+(cb(r=ab[4],6)^cb(r,11)^cb(r,25))+(r&ab[5]^~r&ab[6])+ib[rb++];for(rb=8;rb;)t[--rb]+=ab[rb]}for(r="";rb<64;)r+=(t[rb>>3]>>4*(7-rb++)&15).toString(16);return r}const ub="[\\s'\"]",db="*********";function fb(e){return`(?:${function(e){return`(?:${e?`^${ub}*`:"\\b"}([A-Z0-9._%+\\-]+@[A-Z0-9.\\-]+\\.[A-Z]{2,})${e?`${ub}*$`:"\\b"})`}(e)}|${function(e){return`(?:${e?`^${ub}*`:"\\b"}((?:[A-Z0-9._\\-]|%25|%2B)+%40[A-Z0-9.\\-]+\\.[A-Z]{2,})${e?`${ub}*$`:"\\b"})`}(e)})`}function pb(e){return`(?:${function(e){return`(?:${e?`^${ub}*`:"\\b"}([A-F0-9]{32,64})${e?`${ub}*$`:"\\b"})`}(e)}|${fb(e)})`}const hb=new RegExp(fb(!1),"gi"),gb=new RegExp(pb(!0),"i"),vb=new RegExp(pb(!1),"gi"),yb=new Map([[32,"md5"],[40,"sha1"],[64,"sha256"]]);function mb(e,t,n,r){return e.substring(0,t)+r+e.substring(n)}function wb(e){try{const t=[];let n=e,r=hb.exec(e),o=0;for(;r;){let i;i=r[1]?bb(r[1]):bb(decodeURIComponent(r[2])),gr(t).call(t,i),n=mb(n,o+r.index,o+r.index+r[0].length,i.md5),o+=i.md5.length-r[0].length,r=hb.exec(e)}return{stringWithoutRawEmails:n,hashesFromOriginalString:t}}finally{hb.lastIndex=0}}function bb(e){const t=e.toLowerCase();return{md5:tb(t),sha1:nb(t),sha256:lb(t)}}function Sb(e,t){return"string"==typeof t?t.replace(hb,db):t}function Eb(e){return e[1]&&function(e){if(yb.has(e.length))return e.toLowerCase()}(e[1])?{type:"hashed",value:e[1]}:e[2]?{type:"raw",value:e[2]}:e[3]?{type:"raw",value:decodeURIComponent(e[3])}:void 0}function Cb(e){const t=gb.exec(e);if(t)return Eb(t)}function xb(e){const{contextElementCollectionSettings:t}=e;if(!t.enabled)return{};const{contextSelectors:n,maxLength:r}=t;if(""===n||r<=0)return{};const o=function(e,t){const n=window.document.querySelectorAll(e);let r="";return n.forEach((e=>{const n=wb(e.outerHTML).stringWithoutRawEmails,o=r+n;if(i=o,Math.ceil(4*new Blob([i]).size/3)>t)return o;var i;r=o})),r}(n,r);return{collectedElements:Yw(o)}}function kb(e){throw new Error(`Pattern not exhaustive. Encountered unknown value ${e}`)}function Pb(e){return function(e,t){return new Date((new Date).getTime()+e*t)}(e,864e5)}const Rb="lidids.",Ob=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,_b=(e,t,n)=>n.indexOf(e)===t;function Ib(e){return"string"==typeof e&&Ob.test(e)}class Ab extends zw{constructor(e,t){super("LoadAndStoreDecisionsError",e,{cause:t})}}const Lb="_li_dcdm_c";function Tb(e,t){const n=Ub(e,t);if(n)return n;const r=document.domain||document.location&&document.location.host||window&&window.location&&window.location.host||"localhost",o=r.split(".");for(let n=o.length;n>0;n--){const r=`.${o.slice(n-1,o.length).join(".")}`;if(jb(e,r,t),Ub(e,t)===r)return r}return`.${r}`}function jb(e,t,n){try{e.setCookie(Lb,t,{sameSite:"lax",domain:t})}catch(e){n.warn("Failed to set TLD cache",{error:e})}}function Ub(e,t){try{return e.getCookie(Lb)}catch(e){t.warn("Failed to get TLD cache",{error:e})}}class Db extends zw{constructor(e,t){super("GetExternalIdCookieError",e,{cause:t})}}function Hb(e){const{storageHandler:t,partnerCookiesToResolve:n,logger:r}=e;try{return function(e,t){const n=[],r=[];return e.forEach((e=>{const o=t.getCookie(e)||t.getDataFromLocalStorage(e);if(o){const{stringWithoutRawEmails:t,hashesFromOriginalString:i}=wb(o);gr(n).call(n,{name:e,value:t}),gr(r).call(r,...i)}})),{retrieved:n,extractedHashes:Fb(r)}}(function(e){const t=[];return e.forEach((e=>gr(t).call(t,xf(e).call(e)))),t}(n),t)}catch(e){return r.error(new $b("Error while enriching identifiers",{cause:e})),{retrieved:[],extractedHashes:[]}}}function Fb(e){const t=new Set,n=[];return e.forEach((e=>{t.has(e.md5)||(gr(n).call(n,e),t.add(e.md5))})),n}class $b extends zw{constructor(e,t){super("ResolvePartnerCookiesError",e,{cause:t})}}const Nb="0123456789ABCDEFGHJKMNPQRSTVWXYZ",qb=Nb.length,Mb=Math.pow(2,48)-1,Bb=10,Gb=16,Qb=function(){const e="undefined"!=typeof window?window:null,t=e&&(e.crypto||e.msCrypto);if(t)return()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]/255};return()=>Math.random()}();function Vb(){let e=Math.floor(Qb()*qb);return e===qb&&(e=qb-1),Nb.charAt(e)}function zb(){return function(e,t){if(e>Mb)throw new Jb("cannot encode time greater than "+Mb);let n,r="";for(;t>0;t--)n=e%qb,r=Nb.charAt(n)+r,e=(e-n)/qb;return r}(Of(),Bb)+function(e){let t="";for(;e>0;e--)t=Vb()+t;return t}(Gb)}class Jb extends zw{constructor(e){super("UlidError",e)}}const Wb="_lc2_fpi",Xb="_li_duid";function Kb(e){const{storageHandler:t,domainDetails:n,logger:r}=e,o=n.cookieDomain,i=function(e,t,n){let r;try{r=e.getCookie(Wb)}catch(e){n.error(new Yb("Error while loading old FPC from cookie",e))}if(null==r)try{r=e.getDataFromLocalStorage(Xb)}catch(e){n.error(new Yb("Error while loading old FPC from local storage",e))}return null!=r?r:function(e){const t=`${function(e,t=12){return nb(e.replace(/^\./,"")).substring(0,t)}(e)}--${zb()}`;return t.toLocaleLowerCase()}(t)}(t,o,r);try{t.setCookie(Wb,i,{domain:o,expires:Pb(730)})}catch(e){r.error(new Yb("Couldn't store FPC in cookie",e))}try{t.setDataInLocalStorage(Xb,i)}catch(e){r.error(new Yb("Couldn't store FPC in local storage",e))}return{fpc:i}}class Yb extends zw{constructor(e,t){super("GenerateAndStoreLiveConnectIdsError",e,{cause:t})}}const Zb=["email","emailhash","hash","hashedemail"];const eS=["items","itemids"];class tS{constructor(e){Cw(this,"value",void 0),this.value=e}}class nS extends zw{constructor(e,t){super("InvalidSourceEventPageUrlError",e,{cause:t})}}const rS=qw([$w(),Uw(),_w()]),oS=Fw($w(),qw([rS,Ow(rS)]));class iS{constructor(e=[]){Cw(this,"tuples",void 0),this.tuples=e}static empty(){return new iS}add(e,t,n={}){const{stripEmpty:r=!0,prepend:o=!1}=n;return""===e||r&&""===t?this:o?(Ar(i=this.tuples).call(i,[e,t]),this):(gr(s=this.tuples).call(s,[e,t]),this);var i,s}valuesFor(e){return this.tuples.filter((([t])=>t===e)).map((([,e])=>e))}addOptional(e,t,n={}){return null!=t?this.add(e,t,n):this}addParamsMap(e){for(const t in e){const n=e[t];Array.isArray(n)?n.forEach((e=>this.add(t,e))):this.add(t,n)}return this}copy(){return new iS(this.tuples.slice())}build(){let e="";return this.tuples.forEach((([t,n])=>{const r=0===e.length?"?":"&";e=`${e}${r}${encodeURIComponent(t)}=${encodeURIComponent(n)}`})),e}}class sS{constructor(e){Cw(this,"apply",void 0),this.apply=e}map(e){return new sS((t=>e(this.apply(t))))}defaultOnEmpty(e){return new sS((t=>{const n=t.getBodyAsText();return""===n?e:this.apply({getBodyAsText:()=>n})}))}}!function(e){e.ignore=new e((()=>{})),e.constant=function(t){return new e((()=>t))},e.text=new e((e=>e.getBodyAsText())),e.parseJson=function(t){return new e((e=>{const n=e.getBodyAsText();let r;try{r=Qp(n)}catch(e){throw new aS(e)}const o=Vw(t,r);if(o.success)return o.output;throw new cS(`Failed parsing response: ${JSON.stringify(r)}`)}))},e.fail=new e((()=>{throw new lS}))}(sS||(sS={}));class aS extends zw{constructor(e){super("JsonParsingError","Failed parsing response to json",{cause:e})}}class cS extends zw{constructor(e){super("ResponseParsingError",`Failed parsing response: ${e}`)}}class lS extends zw{constructor(){super("UnexpectedResponseError","Unexpected response")}}const uS="idCookie";function dS(){return dS=bw((function*(e){const{callHandler:t,externalIdCookie:n,liveConnectIds:r,resolveSettings:o}=e,i=function(e){var t,n,r,o,i;const{liveConnectIds:s,pageDetails:a,domainDetails:c,partnerCookies:l,consent:u,integration:d,externalIdCookie:f,requestedAttributes:p}=e,h=iS.empty();let g;null!=(null===(t=u.gdpr)||void 0===t?void 0:t.gdprApplies)&&(g=u.gdpr.gdprApplies?"1":"0");h.addOptional("duid",s.fpc);let v="any";switch(d.type){case"application":d.publisherId&&(v=d.publisherId);break;case"distributor":h.add("did",d.distributorId);break;case"custom":d.publisherId&&(v=d.publisherId),h.addOptional("did",d.distributorId);break;default:kb(d)}h.addOptional("cd",c.cookieDomain).addOptional("pu",a.pageUrl?function(e){const t=new sf(e.toString());return t.pathname="",t.search="",t}(a.pageUrl).toString():void 0).addOptional("gdpr",g).addOptional("gdpr_consent",null===(n=u.gdpr)||void 0===n?void 0:n.consentString).addOptional("us_privacy",null===(r=u.usPrivacy)||void 0===r?void 0:r.consentString).addOptional("gpp_s",null===(o=u.gpp)||void 0===o?void 0:o.consentString).addOptional("gpp_as",null===(i=u.gpp)||void 0===i||null===(i=i.applicableSections)||void 0===i?void 0:i.join(",")).addOptional("ic","success"===f.status?f.value:void 0,{stripEmpty:!1}).addOptional("icn","success"===f.status?f.name:void 0),p.forEach((e=>{h.add("resolve",e)})),l.retrieved.forEach((e=>{h.add(e.name,e.value)})),e.additionalResolveParameters&&h.addParamsMap(e.additionalResolveParameters);return{base:`${e.idexEndpointUrl}/${encodeURIComponent(e.resolveSettings.identityPartner)}/${encodeURIComponent(v)}`,query:h}}(e),s=yield function(e){const{callHandler:t,resolutionUrl:n,resolveSettings:r}=e,o=`${n.base}${n.query.build()}`;return t.ajaxGet({url:o,responseHandler:fS,timeout:r.timeout})}({callHandler:t,resolutionUrl:i,resolveSettings:o}),a=i.query.valuesFor("resolve"),c=Ew({},s.data);return Wf(a).call(a,uS)&&("success"===n.status?c[uS]=n.value:"disabled"===n.status&&r.fpc&&(c[uS]=r.fpc)),Ew(Ew({},s),{},{data:c})})),dS.apply(this,arguments)}const fS=sS.parseJson(Fw($w(),$w())).defaultOnEmpty({});const pS=Dw({bakers:Hw(Ow($w()))}),hS=sS.parseJson(pS);function gS(){return gS=bw((function*(e){const{pixelUrls:t,callHandler:n,timestamp:r,collectSettings:o,logger:i,pixelBaseUrl:s}=e,{retries:a,timeout:c}=o;for(let e=0;e<a+1;e++)try{const e=yield n.ajaxGet({url:t.makeJUrl(s),responseHandler:hS,timeout:c});return void(yield yS({callHandler:n,response:e.data,timestamp:r,logger:i}))}catch(e){if(i.error(new wS("Failed to send pixel",e)),Ww(e))return void i.info("Pixel call blocked by consent, not retrying")}i.error(new bS(`Failed to send pixel after all ${a} retries`),{pixelUrls:t,collectSettings:o}),yield function(e){return vS.apply(this,arguments)}(e)})),gS.apply(this,arguments)}function vS(){return(vS=bw((function*(e){const{callHandler:t,pixelUrls:n,pixelBaseUrl:r}=e;try{yield t.pixelGet(n.makePUrl(r))}catch(e){}}))).apply(this,arguments)}function yS(e){return mS.apply(this,arguments)}function mS(){return(mS=bw((function*(e){var t;const{callHandler:n,response:r,timestamp:o,logger:i}=e,s=null!==(t=r.bakers)&&void 0!==t?t:[];for(const e of s)try{i.info(`Calling baker ${e}`),yield n.pixelGet(`${e}?dtstmp=${o.getTime()}`)}catch(e){}}))).apply(this,arguments)}class wS extends zw{constructor(e,t){super("SendPixelError",e,{cause:t})}}class bS extends zw{constructor(e){super("SendPixelRetriesExhaustedError",e)}}const SS={_li_ss:{type:"local_storage"}};function ES(e){const{storageHandler:t,logger:n,syncContainerEndpointUrl:r}=e;try{const i=function(e,t){try{return e.getDataFromLocalStorage("_li_ss")}catch(e){t.error(new CS("Error while loading sync state",{cause:e}))}}(t,n)||"",s=function(e){var t,n,r;const{appId:o,consent:i,domainDetails:s,externalIdCookie:a,liveConnectIds:c,syncState:l,pixelSyncSettings:u,syncContainerEndpointUrl:d,hubVersion:f}=e,p={stripEmpty:!1},h=iS.empty().addOptional("duid",c.fpc,p).add("euns",u.euns?1:0,p).addOptional("pt",u.pixelTimeout,p).addOptional("s",l,p).addOptional("us_privacy",null===(t=i.usPrivacy)||void 0===t?void 0:t.consentString,p).addOptional("gpp_s",null===(n=i.gpp)||void 0===n?void 0:n.consentString,p).addOptional("gpp_as",null===(r=i.gpp)||void 0===r||null===(r=r.applicableSections)||void 0===r?void 0:r.join(","),p).addOptional("version",f,p).addOptional("cd",s.cookieDomain,p).addOptional("ic","success"===a.status?a.value:void 0,p).addOptional("icn","success"===a.status?a.name:void 0,p),g=`${d}/${o}${h.build()}`;return g}(Ew(Ew({},e),{},{syncState:i})),a=document.createElement("iframe");if(!a||!document.body)return void n.error(new CS("Failed to create iframe for sync container"));if(a.style.display="none",a.style.width="0px",a.style.height="0px",a.style.border="0px","postMessage"in window){const e=new sf(r).origin,i=r=>{r.origin===e&&r.data&&"string"==typeof r.data&&function(e,t,n){try{t&&t.replace(/([^=]+)=([^&]*)&?/g,((t,n,r)=>{if(n=decodeURIComponent(n),r=decodeURIComponent(r),n in SS){const t=SS[n];switch(t.type){case"cookie":{const o=t.ttlMillis?new Date(Of()+t.ttlMillis):void 0;e.setCookie(n,r,{expires:o,domain:t.domain});break}case"local_storage":e.setDataInLocalStorage(n,r);break;default:kb(t)}}return""}))}catch(e){n.error(new CS("Error while handling SC message",{cause:e}))}}(t,r.data,n)};o=i,window.addEventListener?window.addEventListener("message",o,!1):window.attachEvent("onmessage",o)}a.src=s,document.body.appendChild(a)}catch(e){n.error(new CS("Error while launching sync container",{cause:e}))}var o}class CS extends zw{constructor(e,t){super("SyncContainerError",e,{cause:t})}}function xS(e){const{cssSelectors:t,logger:n}=e,r=[];if(0===t.length)return r;try{const e=t.join(", ");document.querySelectorAll(e).forEach((e=>{if(e instanceof HTMLInputElement){const t=Cb(e.value);t&&gr(r).call(r,t)}else{const t=function(e){const t=[];try{let n=vb.exec(e);for(;null!=n;){const r=Eb(n);r&&gr(t).call(t,r),n=vb.exec(e)}return t}finally{vb.lastIndex=0}}(e.outerHTML);gr(r).call(r,...t)}}))}catch(e){n.error(new kS(`Failed to collect emails from css selectors ${t}`,e))}return r}class kS extends zw{constructor(e,t){super("CollectEmailsFromCssSelectorError",e,{cause:t})}}class PS extends zw{constructor(e,t){super("CollectEmailsFromQueryParamsError",e,{cause:t})}}class RS extends zw{constructor(e,t){super("CollectEmailsFromWindowPropertyError",e,{cause:t})}}class OS{constructor(e){Cw(this,"props",void 0);const{logger:t,consent:n,storageHandler:r,callHandler:o,clientDetails:i,integration:s,idCookieSettings:a,urlCollectionSettings:c,partnerCookiesToResolve:l,contextElementCollectionSettings:u,collectSettings:d,autoCollectSettings:f,resolveSettings:p,pixelSyncSettings:h,hubConfig:g,emailExtractionSettings:v,eventTriggeredCollectionSettings:y,pageDetails:m}=e,w=function(e){const{storageHandler:t,logger:n}=e;return{cookieDomain:Tb(t,n)}}({storageHandler:r,logger:t}),b=Kb({storageHandler:r,domainDetails:w,logger:t}),S=function(e){var t;const{pageDetails:n,domainDetails:r,storageHandler:o,logger:i}=e,s=((null===(t=n.pageUrl)||void 0===t?void 0:t.searchParams.getAll("li_did"))||[]).map((e=>xf(e).call(e))).filter((e=>e.length>0&&Ib(e))).filter(_b);let a;try{a=o.findSimilarCookies(Rb)}catch(e){i.error(new Ab("Error while searching for decisions in cookies",e)),a=[]}const c=a.map((e=>xf(e).call(e))).filter((e=>e.length>0&&Ib(e)));return s.forEach((e=>{try{o.setCookie(`${Rb}${e}`,e,{expires:Pb(30),sameSite:"lax",domain:r.cookieDomain})}catch(e){i.error(new Ab("Error while storing decision in cookie",e))}})),{decisionIds:s.concat(c).filter(_b)}}({storageHandler:r,pageDetails:m,domainDetails:w,logger:t}),E=Hb({storageHandler:r,partnerCookiesToResolve:l,logger:t}),C=Xw({pageDetails:m,urlCollectionSettings:c,logger:t}),x=xb({contextElementCollectionSettings:u}),k=function(e){const{storageHandler:t,idCookieSettings:n,logger:r}=e;switch(n.type){case"generated":return{status:"disabled"};case"provided":try{const{source:e,key:o}=n;switch(e){case"cookie":{const e=t.getCookie(o);return null==e?(r.error(new Db("Cookie doesn't exist")),{status:"error"}):{status:"success",name:o,value:e}}case"local_storage":{const e=t.getDataFromLocalStorage(o);return null==e?(r.error(new Db("Local storage item doesn't exist")),{status:"error"}):{status:"success",name:o,value:e}}default:kb(e)}}catch(e){return r.error(new Db("Failed fetching provided id cookie",e)),{status:"error"}}}}({storageHandler:r,idCookieSettings:a,logger:t});let P=[];null!=m.pageUrl&&(P=function({pageUrl:e,queryParamRegexes:t,logger:n}){const r=[];if(0===t.length)return r;try{const n=e.searchParams,o=new RegExp(t.join("|"),"i");n.forEach(((e,t)=>{if(o.test(t)){const t=Cb(e);t&&gr(r).call(r,t)}}))}catch(e){n.error(new PS("Failed to collect emails from query params",e))}return r}({pageUrl:m.pageUrl,queryParamRegexes:v.queryParameterRegexes,logger:t})),this.props={logger:t,hubConfig:g,callHandler:o,storageHandler:r,consent:n,pageDetails:m,domainDetails:w,liveConnectIds:b,decisions:S,partnerCookies:E,collectedUrl:C,contextElements:x,externalIdCookie:k,clientDetails:i,integration:s,urlCollectionSettings:c,collectSettings:d,autoCollectSettings:f,resolveSettings:p,pixelSyncSettings:h,emailExtractionSettings:v,emailsFromQueryParams:P,eventTriggeredCollectionSettings:y}}resolve(e){var t=this;return bw((function*(){var n;const{requestedAttributes:r,additionalResolveParameters:o,onSuccess:i,onFailure:s}=e,{logger:a,consent:c,callHandler:l,liveConnectIds:u,pageDetails:d,domainDetails:f,partnerCookies:p,externalIdCookie:h,resolveSettings:g,integration:v,hubConfig:y,storageHandler:m}=t.props;try{const e=yield function(e){return dS.apply(this,arguments)}({consent:c,liveConnectIds:u,pageDetails:d,domainDetails:f,partnerCookies:p,externalIdCookie:h,callHandler:l,resolveSettings:g,integration:v,requestedAttributes:r,additionalResolveParameters:o,idexEndpointUrl:y.idexEndpointUrl});for(const t of i)try{switch(t.type){case"write_to_local_storage":m.setDataInLocalStorage(t.targetKey,JSON.stringify(e.data));break;case"write_to_cookie":m.setCookie(t.targetKey,JSON.stringify(e.data),{expires:null!==(n=e.expiresAt)&&void 0!==n?n:Pb(730),sameSite:t.sameSite,domain:t.domain});break;case"callback":t.callback(e.data);break;default:kb(t)}}catch(e){a.error(new _S("Failed to handle onResolveSuccess action",e))}}catch(e){if(a.error(new _S("Failed to resolve identity",e)),s)try{s(e)}catch(e){a.error(new _S("Failed to call onFailure callback",e))}}}))()}collect(e){var t=this;return bw((function*(){const{callHandler:n,pageDetails:r,collectedUrl:o,urlCollectionSettings:i,contextElements:s,externalIdCookie:a,partnerCookies:c,integration:l,clientDetails:u,collectSettings:d,liveConnectIds:f,decisions:p,consent:h,domainDetails:g,logger:v,hubConfig:y}=t.props;try{const t=new Date,m=function(e){const{pageDetails:t,sourceEvent:n,logger:r}=e;if("pageUrl"in n&&"string"==typeof n.pageUrl)try{return{pageUrl:new sf(n.pageUrl),referrer:t.referrer}}catch(e){r.error(new nS("Cannot create pageUrl with invalid source",e))}}({pageDetails:r,sourceEvent:e,logger:v});let w=o,b=r;null!=m&&(w=Xw({pageDetails:m,urlCollectionSettings:i,logger:v}),b=m);const S=function(e){const{sourceEvent:t}=e,n=[];for(const e in t)if(Wf(Zb).call(Zb,e.toLowerCase())&&0===n.length){const r=t[e];if("string"==typeof r){const e=Cb(r);switch(null==e?void 0:e.type){case"raw":{const t=bb(e.value);gr(n).call(n,t.md5,t.sha1,t.sha256);break}case"hashed":gr(n).call(n,e.value)}}}return{hashedEmails:n}}({sourceEvent:e}),E=function(e){const{sourceEvent:t}=e,n=Ew({},t);for(const e in t)if(Wf(eS).call(eS,e.toLowerCase())){const r=t[e];Array.isArray(r)&&r.length>10&&(n[e]=r.slice(0,10))}return new tS(n)}({sourceEvent:e}),C=function(e){var t,n,r,o,i;const s=iS.empty().add("dtstmp",e.timestamp.getTime());switch(e.integration.type){case"application":s.addOptional("aid",e.integration.appId);break;case"distributor":s.add("did",e.integration.distributorId);break;case"custom":s.addOptional("did",e.integration.distributorId);break;default:kb(e.integration)}let a;s.add("se",Yw(JSON.stringify(e.limitedSourceEvent.value,Sb))).addOptional("duid",e.liveConnectIds.fpc).add("tv",e.hubVersion).addOptional("pu",e.collectedUrl.url?e.collectedUrl.url.toString():void 0).addOptional("pu_rp",e.collectedUrl.isPathRemoved?"1":void 0).add("pu_bqp",e.collectedUrl.blockedQueryParams.join(",")),e.partnerCookies.retrieved.forEach((e=>{s.add(`ext_${e.name}`,e.value)})),e.partnerCookies.extractedHashes.forEach((e=>{s.add("scre",`${e.md5},${e.sha1},${e.sha256}`)})),null!=(null===(t=e.consent.gdpr)||void 0===t?void 0:t.gdprApplies)&&(a=e.consent.gdpr.gdprApplies?"1":"0"),s.add("li_did",e.decisions.decisionIds.join(",")).addOptional("e",e.sourceEventEmails.hashedEmails.join(",")).addOptional("us_privacy",null===(n=e.consent.usPrivacy)||void 0===n?void 0:n.consentString).add("wpn",e.clientDetails.name).add("wpv",e.clientDetails.version).addOptional("gdpr",a).addOptional("gdpr_consent",null===(r=e.consent.gdpr)||void 0===r?void 0:r.consentString).addOptional("refr",e.pageDetails.referrer).addOptional("gpp_s",null===(o=e.consent.gpp)||void 0===o?void 0:o.consentString).addOptional("gpp_as",null===(i=e.consent.gpp)||void 0===i?void 0:i.applicableSections.join(",")).addOptional("cd",e.domainDetails.cookieDomain).addOptional("ic","success"===e.externalIdCookie.status?e.externalIdCookie.value:void 0,{stripEmpty:!1}).addOptional("icn","success"===e.externalIdCookie.status?e.externalIdCookie.name:void 0).addOptional("c",e.contextElements.collectedElements);const c=s.build();return{makeJUrl:e=>`${e}/j${c}`,makePUrl:e=>`${e}/p${c}`}}({integration:l,timestamp:t,limitedSourceEvent:E,sourceEventEmails:S,partnerCookies:c,contextElements:s,externalIdCookie:a,clientDetails:u,liveConnectIds:f,decisions:p,domainDetails:g,consent:h,collectedUrl:w,pageDetails:b,hubVersion:y.hubVersion});yield function(e){return gS.apply(this,arguments)}({pixelBaseUrl:y.pixelBaseUrl,pixelUrls:C,callHandler:n,collectSettings:d,timestamp:t,logger:v})}catch(e){v.error(new IS(e))}}))()}tryCollectToSideChannel(){var e=this;return bw((function*(){const{logger:t,emailExtractionSettings:n,emailsFromQueryParams:r,liveConnectIds:o,pageDetails:i,integration:s}=e.props;try{const a=xS({cssSelectors:n.emailCssSelectors,logger:t}),c=function(e){const{logger:t,propertyPaths:n}=e,r=[];return n.forEach((e=>{try{const t=e.split(".");let n=window;for(const e of t)n=n[e];if("string"==typeof n){const e=Cb(n);e&&gr(r).call(r,e)}}catch(n){t.error(new RS(`Failed to collect emails from window property ${e}`,n))}})),r}({propertyPaths:n.windowPropertyPaths,logger:t});if(0===a.length&&0===c.length&&0===r.length)return void t.debug("No emails to collect to side channel, skipping");let l;switch(s.type){case"application":l=s.appId;break;case"distributor":case"custom":l=s.distributorId;break;default:kb(s)}const u={fpc:o.fpc,page_url:i.pageUrl,customer_id:l,window_properties:c,css_selectors:a,query_parameters:r,timestamp:(new Date).toISOString()},d=Yw(JSON.stringify(u)),f=`${e.props.hubConfig.sideChannelCollectorUrl}?${d}`;t.info("Sending data to side channel",{eventToSend:u}),yield e.props.callHandler.pixelGet(f)}catch(e){t.error(new AS(e))}}))()}tryPixelSync(){var e=this;return bw((function*(){const{callHandler:t,consent:n,domainDetails:r,externalIdCookie:o,liveConnectIds:i,storageHandler:s,integration:a,hubConfig:c,logger:l,pixelSyncSettings:u}=e.props;u.enabled&&"application"===a.type&&null!=a.appId&&ES({appId:a.appId,callHandler:t,consent:n,domainDetails:r,externalIdCookie:o,liveConnectIds:i,storageHandler:s,pixelSyncSettings:u,syncContainerEndpointUrl:c.syncContainerEndpointUrl,hubVersion:c.hubVersion,logger:l})}))()}runStartupTasks(e,t){var n=this;return bw((function*(){yield n.tryPixelSync(),n.props.eventTriggeredCollectionSettings.pageEvents.length>0&&e.scheduleOnPageEvents(n.props.eventTriggeredCollectionSettings.pageEvents,{type:"collect_to_side_channel",clientRef:t}),(n.props.emailExtractionSettings.queryParameterRegexes.length>0||n.props.emailExtractionSettings.emailCssSelectors.length>0||n.props.emailExtractionSettings.windowPropertyPaths.length>0)&&e.scheduleAfterDelay(n.props.hubConfig.sideChannelRegisterCollectDelay,{type:"collect_to_side_channel",clientRef:t}),n.props.autoCollectSettings.enabled&&e.scheduleAutoCollect(t,n.props.autoCollectSettings.delay)}))()}}class _S extends zw{constructor(e,t){super("ResolveIdentityError",e,{cause:t})}}class IS extends zw{constructor(e){super("CollectError","Failed to collect",{cause:e})}}class AS extends zw{constructor(e){super("CollectToSideChannelError","Failed to collect to side channel",{cause:e})}}function LS(){return Iw((e=>"function"==typeof e),"A function is required!")}const TS=qw([$w(),Uw(),_w(),function e(t){return{kind:"schema",type:"null",reference:e,expects:"null",async:!1,message:t,_run(e,t){return null===e.value?e.typed=!0:kw(this,"type",e,t),e}}}(),function e(t){return{kind:"schema",type:"undefined",reference:e,expects:"undefined",async:!1,message:t,_run(e,t){return void 0===e.value?e.typed=!0:kw(this,"type",e,t),e}}}(),Ow(Lw((()=>TS))),Fw($w(),Lw((()=>TS))),Dw({toJSON:LS()})]),jS=Fw($w(),TS),US=Bw("type",[Dw({type:Tw("generated")}),Dw({type:Tw("provided"),source:qw([Tw("cookie"),Tw("local_storage")]),key:$w()})]),DS=Dw({gdprApplies:Hw(_w()),consentString:$w()}),HS=Dw({consentString:$w()}),FS=Dw({consentString:$w(),applicableSections:Ow(Uw())}),$S=Dw({gdpr:Hw(DS),usPrivacy:Hw(HS),gpp:Hw(FS)}),NS=Iw((e=>"object"==typeof e),"An object is required!"),qS=Bw("type",[Dw({type:Tw("application"),appId:Hw($w()),publisherId:Hw($w())}),Dw({type:Tw("distributor"),distributorId:$w()}),Dw({type:Tw("custom"),publisherId:Hw($w()),distributorId:Hw($w())})]),MS=Dw({name:$w(),version:$w()}),BS=Dw({mode:qw([Tw("full"),Tw("no_path")]),queryParametersFilter:Hw($w())}),GS=Bw("enabled",[Dw({enabled:Tw(!0),contextSelectors:$w(),maxLength:Uw()}),Dw({enabled:Tw(!1)})]),QS=Dw({retries:Uw(),timeout:Uw()}),VS=Dw({enabled:_w(),delay:Qw(Uw(),function e(t,n){return{kind:"validation",type:"min_value",reference:e,async:!1,expects:`>=${t instanceof Date?t.toJSON():xw(t)}`,requirement:t,message:n,_run(e,t){return e.typed&&e.value<this.requirement&&kw(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():xw(e.value)}),e}}}(0))}),zS=Dw({timeout:Uw(),identityPartner:$w()}),JS=Bw("type",[Dw({type:Tw("write_to_local_storage"),targetKey:$w()}),Dw({type:Tw("write_to_cookie"),targetKey:$w(),sameSite:Hw(qw([Tw("strict"),Tw("lax"),Tw("none")])),domain:Hw($w())}),Dw({type:Tw("callback"),callback:LS()})]),WS=Dw({enabled:_w(),euns:_w(),pixelTimeout:Hw(Uw())}),XS=Dw({emailCssSelectors:Ow($w()),queryParameterRegexes:Ow($w()),windowPropertyPaths:Ow($w())}),KS={empty:{emailCssSelectors:[],queryParameterRegexes:[],windowPropertyPaths:[]},combine:(e,t)=>({emailCssSelectors:e.emailCssSelectors.concat(t.emailCssSelectors),queryParameterRegexes:e.queryParameterRegexes.concat(t.queryParameterRegexes),windowPropertyPaths:e.windowPropertyPaths.concat(t.windowPropertyPaths)})},YS=Dw({eventSourceCssSelector:$w(),eventType:$w()}),ZS=Dw({pageEvents:Ow(YS)}),eE={empty:{pageEvents:[]},combine:(e,t)=>({pageEvents:e.pageEvents.concat(t.pageEvents)})},tE={empty:{emailExtractionSettings:KS.empty,eventTriggeredCollectionSettings:eE.empty},combine:(e,t)=>({emailExtractionSettings:KS.combine(e.emailExtractionSettings,t.emailExtractionSettings),eventTriggeredCollectionSettings:eE.combine(e.eventTriggeredCollectionSettings,t.eventTriggeredCollectionSettings)})};function nE(e){return hh(Ph(e).filter((([e,t])=>null!=t)))}const rE={retries:3,timeout:0},oE=Qw(Hw(Gw(QS),{}),Rw((e=>Ew(Ew({},rE),nE(e)))),QS),iE={enabled:!0,delay:120},sE=Qw(Hw(Gw(VS),{}),Rw((e=>Ew(Ew({},iE),nE(e))))),aE={timeout:5e3,identityPartner:"unknown"},cE=Qw(Hw(Gw(zS),{}),Rw((e=>Ew(Ew({},aE),nE(e))))),lE={enabled:!1,euns:!1,pixelTimeout:500},uE=Qw(Hw(Gw(WS),{}),Rw((e=>Ew(Ew({},lE),nE(e))))),dE=Qw(Ow($w()),Rw((e=>new Set(e)))),fE=Qw(Gw(XS),Rw((e=>Ew(Ew({},KS.empty),nE(e))))),pE=Qw(Gw(ZS),Rw((e=>Ew(Ew({},eE.empty),nE(e))))),hE=(gE=Dw({emailExtractionSettings:Hw(fE,{}),eventTriggeredCollectionSettings:Hw(pE,{})}),Fw($w(),Fw($w(),gE)));var gE;const vE=Dw({type:Tw("register_client"),clientRef:NS,clientDetails:MS,integration:qS,consent:Hw($S),partnerCookies:Hw(function e(t,n){return{kind:"schema",type:"set",reference:e,expects:"Set",async:!1,value:t,message:n,_run(e,t){const n=e.value;if(n instanceof Set){e.typed=!0,e.value=new Set;for(const i of n){const s=this.value._run({typed:!1,value:i},t);if(s.issues){const a={type:"set",origin:"value",input:n,value:i};for(const t of s.issues){var r,o;if(t.path)Ar(o=t.path).call(o,a);else t.path=[a];null===(r=e.issues)||void 0===r||gr(r).call(r,t)}if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.add(s.value)}}else kw(this,"type",e,t);return e}}}($w()),new Set),idCookieSettings:Hw(US,{type:"generated"}),urlCollectionSettings:Hw(BS,{mode:"full"}),contextElementCollectionSettings:Hw(GS,{enabled:!1}),collectSettings:oE,autoCollectSettings:sE,resolveSettings:cE,pixelSyncSettings:uE,eventTriggeredCollectionSettings:Hw(pE,{}),emailExtractionSettings:Hw(fE,{}),pageDependentSettings:Hw(hE,{})}),yE=Dw({type:Tw("collect"),clientRef:NS,sourceEvent:jS}),mE=Dw({type:Tw("resolve"),clientRef:NS,requestedAttributes:Hw(dE,[]),additionalResolveParameters:Hw(oS),onFailure:Hw(LS()),onSuccess:Ow(JS)}),wE=Bw("level",[Dw({type:Tw("log"),level:Tw("debug"),message:$w(),context:Hw(jw({}))}),Dw({type:Tw("log"),level:Tw("info"),message:$w(),context:Hw(jw({}))}),Dw({type:Tw("log"),level:Tw("warn"),message:$w(),context:Hw(jw({}))}),Dw({type:Tw("log"),level:Tw("error"),name:$w(),message:$w(),cause:Hw(function e(t,n){return{kind:"schema",type:"instance",reference:e,expects:t.name,async:!1,class:t,message:n,_run(e,t){return e.value instanceof this.class?e.typed=!0:kw(this,"type",e,t),e}}}(Error)),context:Hw(jw({}))})]),bE=Bw("type",[vE,yE,mE,Dw({type:Tw("debug"),onEvents:Hw(LS())}),wE]);function SE(){return{pageUrl:EE(),referrer:CE((()=>{var e;return null===(e=window.top)||void 0===e?void 0:e.document.referrer}))}}function EE(){const e=CE((()=>window.location.ancestorOrigins))||[],t=[];let n,r=window;for(;r!==top;)gr(t).call(t,r),r=r.parent;gr(t).call(t,r);for(let r=t.length-1;r>=0&&!n;r--)n=CE((()=>t[r].location.href)),0!==r&&(n||(n=CE((()=>t[r-1].document.referrer))),n||(n=e[r-1]));return null!=n?new sf(n):void 0}function CE(e){try{return e()}catch(e){return}}function xE(e){const{settings:t,monoid:n,pageDetails:r,logger:o}=e;let i=n.empty;try{const e=function(e){return Ph(e).map((([e,t])=>[new RegExp(e),Ph(t).map((([e,t])=>[new RegExp(e),t]))]))}(t),[o,s]=function(e){if(null==e.pageUrl)return["",""];return[e.pageUrl.hostname,e.pageUrl.pathname]}(r);e.filter((([e])=>e.test(o))).forEach((([,e])=>{e.filter((([e])=>e.test(s))).forEach((([,e])=>{i=n.combine(i,e)}))}))}catch(e){o.error(new kE("Failed to evaluate page settings",e))}return i}class kE extends zw{constructor(e,t){super("EvalPageSettingsError",e,{cause:t})}}function PE(e){var t;return window.liQ_instances=null!==(t=window.liQ_instances)&&void 0!==t?t:[],RE(e,window.liQ_instances)}function RE(e,t){let n=!1;try{t.forEach((e=>{e.eventBus.once("pre_lips",(()=>{n=!0}))}))}catch(t){e.error(new _E("Error while checking if collect has been called globally",t))}return n}class OE{constructor(){Cw(this,"config",{}),Cw(this,"eventBus",{once:(e,t)=>{"pre_lips"===e&&t()}})}}class _E extends zw{constructor(e,t){super("LiQInstancesError",e,{cause:t})}}class IE extends zw{constructor(e,t){super("SubscribeToPageEventsError",e,{cause:t})}}class AE{constructor(e,t){Cw(this,"hub",void 0),Cw(this,"logger",void 0),this.hub=e,this.logger=t}scheduleAfterDelay(e,t){this.logger.info(`Scheduling ${t.type} for ${e}ms from now`),setTimeout((()=>{this.logger.info(`Executing scheduled ${t.type}`),this.hub.pushInternal(t)}),e)}scheduleOnPageEvents(e,t){const n=e.map((e=>({cssSelector:e.eventSourceCssSelector,eventType:e.eventType,action:()=>{this.logger.info(`Scheduling ${t.type} for page event`,{event:e,command:t}),this.hub.pushInternal(t)}})));this.logger.info(`Subscribing to ${n.length} page events`,{events:e}),function(e){const{listeners:t,logger:n}=e;if(0===t.length)return;const r=()=>{t.forEach((e=>{try{document.querySelectorAll(e.cssSelector).forEach((t=>{t.addEventListener(e.eventType,(()=>{try{e.action()}catch(e){n.error(new IE("Failed to execute action for listener",e))}}))}))}catch(e){n.error(new IE("Failed to subscribe listener",e))}}))};try{"loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)}catch(e){n.error(new IE("Failed to subscribe to DOMContentLoaded event",e))}}({listeners:n,logger:this.logger})}notifyCollectAttempted(){!function(e){if(null==window.liQ_instances)window.liQ_instances=[new OE];else if(!RE(e,window.liQ_instances)){var t;gr(t=window.liQ_instances).call(t,new OE)}}(this.logger)}scheduleAutoCollect(e,t){PE(this.logger)?this.logger.info("Collect has already been called somewhere. Skipping scheduled default collect"):(this.logger.info(`Scheduling default collect for ${t}ms from now`),setTimeout((()=>{PE(this.logger)||this.hub.collectQueued()||(this.logger.info("Executing scheduled default collect"),this.notifyCollectAttempted(),this.hub.pushInternal({type:"collect",clientRef:e,sourceEvent:{}}))}),t))}}class LE{constructor(e,t,n,r,o){Cw(this,"storageHandlerFactory",void 0),Cw(this,"callHandlerFactory",void 0),Cw(this,"consentManager",void 0),Cw(this,"logger",void 0),Cw(this,"hubConfig",void 0),Cw(this,"running",!1),Cw(this,"clientHandlers",new Map),Cw(this,"bufferedCommands",[]),Cw(this,"sharedData",void 0),Cw(this,"scheduler",void 0),this.storageHandlerFactory=e,this.callHandlerFactory=t,this.consentManager=n,this.logger=r,this.hubConfig=o,this.sharedData={pageDetails:SE()},this.scheduler=new AE(this,this.logger.withContext({component:"scheduler"}))}push(...e){for(const t of e){const e=Vw(bE,t);e.success?this.pushInternal(e.output):this.logger.error(new TE(t,e.issues))}return this.bufferedCommands.length}pushInternal(...e){var t;const n=gr(t=this.bufferedCommands).call(t,...e);return this.running||(this.running=!0,this.drain()),n}collectQueued(){return this.bufferedCommands.some((e=>"collect"===e.type))}drain(){var e=this;return bw((function*(){for(;e.bufferedCommands.length>0;){const t=e.bufferedCommands.shift();try{yield e.processCommand(t)}catch(n){e.logger.error(new HE(n),{command:t})}}e.running=!1}))()}processCommand(e){switch(this.logger.info(`hub received command of type ${e.type}`,{command:e}),e.type){case"register_client":return this.processRegisterClientCommand(e);case"collect":return this.processCollectCommand(e);case"resolve":return this.processResolveCommand(e);case"log":return this.processLogCommand(e);case"debug":return this.processDebugCommand(e);case"collect_to_side_channel":return this.processCollectToSideChannelCommand(e);default:kb(e)}}processRegisterClientCommand(e){var t=this;return bw((function*(){const n=e.clientRef;if(t.clientHandlers.has(n))t.logger.error(new jE,{clientRef:n,command:e,existingState:t.clientHandlers.get(n)});else try{const r=null!=e.consent?e.consent:yield t.consentManager.loadConsent(),o=t.logger.withContext({clientRef:n,registration:e,appId:"application"===e.integration.type?e.integration.appId:void 0,distributorId:"distributor"===e.integration.type?e.integration.distributorId:void 0}),i=t.callHandlerFactory.fromConsent(r,o),s=t.storageHandlerFactory.fromConsent(r,o),a=xE({settings:e.pageDependentSettings,monoid:tE,pageDetails:t.sharedData.pageDetails,logger:o}),c=KS.combine(e.emailExtractionSettings,a.emailExtractionSettings),l=eE.combine(e.eventTriggeredCollectionSettings,a.eventTriggeredCollectionSettings),u=new OS({logger:o,callHandler:i,storageHandler:s,consent:r,hubConfig:t.hubConfig,pageDetails:t.sharedData.pageDetails,contextElementCollectionSettings:e.contextElementCollectionSettings,partnerCookiesToResolve:e.partnerCookies,idCookieSettings:e.idCookieSettings,clientDetails:e.clientDetails,integration:e.integration,urlCollectionSettings:e.urlCollectionSettings,collectSettings:e.collectSettings,autoCollectSettings:e.autoCollectSettings,resolveSettings:e.resolveSettings,pixelSyncSettings:e.pixelSyncSettings,emailExtractionSettings:c,eventTriggeredCollectionSettings:l});t.clientHandlers.set(n,u),t.logger.info("Client registered",{clientRef:n}),yield u.runStartupTasks(t.scheduler,n)}catch(n){t.logger.error(new UE(n),{command:e})}}))()}processCollectCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?iw.resolve():(this.scheduler.notifyCollectAttempted(),t.collect(e.sourceEvent))}processCollectToSideChannelCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?iw.resolve():t.tryCollectToSideChannel()}processResolveCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?iw.resolve():t.resolve({requestedAttributes:e.requestedAttributes,additionalResolveParameters:e.additionalResolveParameters,onSuccess:e.onSuccess,onFailure:e.onFailure})}processLogCommand(e){switch(e.level){case"debug":this.logger.debug(e.message,e.context);break;case"info":this.logger.info(e.message,e.context);break;case"warn":this.logger.warn(e.message,e.context);break;case"error":{const t=new zw(e.name,e.message,{cause:e.cause});this.logger.error(t,e.context)}break;default:kb(e)}return iw.resolve()}processDebugCommand(e){return e.onEvents&&e.onEvents(this.logger.getEvents()),iw.resolve()}loadClientHandler(e){const t=this.clientHandlers.get(e);return null==t&&this.logger.error(new DE,{ref:e}),t}}class TE extends zw{constructor(e,t){super("MalformedCommandError","hub received malformed command"),Cw(this,"command",void 0),Cw(this,"issues",void 0),this.command=e,this.issues=t,this.command=e,this.issues=t}}class jE extends zw{constructor(){super("DuplicateClientRegisterError","Received duplicate registration for the same ref")}}class UE extends zw{constructor(e){super("RegisterClientError","Failed registering a new client",{cause:e})}}class DE extends zw{constructor(){super("UnknownClientError","Client passed an unknown client ref")}}class HE extends zw{constructor(e){super("CommandExecutionError","Failed to execute command",{cause:e})}}const FE=120;class $E{constructor(e){var t;Cw(this,"callHandler",void 0),Cw(this,"baseQuery",void 0),Cw(this,"pixelBaseUrl",void 0),Cw(this,"sampleRate",void 0),this.callHandler=e.callHandler;const n=SE();let r;null!=n.pageUrl&&(r=new sf(n.pageUrl),r.search=""),this.baseQuery=iS.empty().add("tv",e.version).addOptional("refr",n.referrer).addOptional("pu",null===(t=r)||void 0===t?void 0:t.toString()),this.pixelBaseUrl=e.pixelBaseUrl,this.sampleRate=e.sampleRate}handleEvent(e){var t=this;return bw((function*(){if("error"===e.level&&!Ww(e.error)){const n=function(e){const t=[];let n=e;for(;null!=n&&"object"==typeof n&&n instanceof Error;)gr(t).call(t,{name:n.name.substring(0,FE),message:n.message.substring(0,FE),stackTrace:NE(n).substring(0,1e3)}),n=n.cause;return t}(e.error);for(const r of n)if(t.isSampled())try{yield t.sendError(r,e.context)}catch(e){}}}))()}asLogEventHandler(){return this.handleEvent.bind(this)}isSampled(){return Math.random()<=this.sampleRate}sendError(e,t){const n=null!=t&&"appId"in t&&"string"==typeof t.appId?t.appId:void 0,r=null!=t&&"distributorId"in t&&"string"==typeof t.distributorId?t.distributorId:void 0,o=this.baseQuery.copy().addOptional("aid",n).addOptional("did",r).add("ae",Yw(JSON.stringify(e))).build(),i=`${this.pixelBaseUrl}/p${o}`;return this.callHandler.pixelGet(i)}}function NE(e){let t=e;const n=[];for(;null!=t&&"object"==typeof t&&t instanceof Error;){const e=(r=t.message,o=FE,null!=r?r.substring(0,o):void 0);gr(n).call(n,null!=e?e:"No message available"),t=t.cause}var r,o;return n.join("\ncaused by: ")}function qE(e){let t=window,n=null;for(;!n;){try{e in t.frames&&(n=t)}catch(e){}if(t===window.top||!t.parent)break;t=t.parent}return n}function ME(e){var t;return e.gdpr&&e.gdpr.gdprApplies||e.gpp&&Wf(t=e.gpp.applicableSections).call(t,2)||!1}class BE{fromConsent(e,t){return ME(e)?(t.info("Using blocked call handler due to privacy mode"),new GE):new QE(t)}}class GE{ajaxGet(){return bw((function*(){throw new Jw}))()}pixelGet(){return bw((function*(){throw new Jw}))()}}class QE{constructor(e){Cw(this,"logger",void 0),this.logger=e}ajaxGet(e){var t=this;return bw((function*(){const n=t,{url:r,responseHandler:o}=e,i=e.timeout||5e3;const s=yield new iw(((e,t)=>{(function(e,t){if(window.XDomainRequest){const n=new window.XDomainRequest,o=Of();return n.onprogress=()=>{},n.onload=()=>e({getBodyAsText:()=>n.responseText}),n.onerror=()=>t(new WE(`Error during XDR call: ${n.responseText}, url: ${r}`)),n.ontimeout=()=>{const e=Of()-o;t(new WE(`Timeout after ${e} (${i}), url: ${r}`))},n.open("GET",r),n.timeout=i,n.send(),!0}return!1})(e,t)||function(e,t){const o=new XMLHttpRequest,s=Of();o.onreadystatechange=()=>{4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?e({getBodyAsText:()=>o.responseText,expiresAt:n.responseExpires(o)}):t(new JE(`Error during XHR call: ${o.status}, url: ${r}`)))},o.ontimeout=()=>{const e=Of()-s;t(new JE(`Timeout after ${e} (${i}), url: ${r}`))},o.open("GET",r,!0),o.timeout=i,o.withCredentials=!0,o.send()}(e,t)})).catch((e=>{throw new zE(`Failed sending request to url ${r}`,e)}));return{data:o.apply(s),expiresAt:s.expiresAt}}))()}pixelGet(e){return bw((function*(){const t=new Image;return t.src=e,new iw(((n,r)=>{t.onload=()=>n(),t.onerror=()=>r(new VE(`Failed loading pixel: ${e}`))}))}))()}responseExpires(e){const t=e.getResponseHeader("expires");if(t)try{return new Date(t)}catch(e){return void this.logger.error(new XE(t))}}}class VE extends zw{constructor(e){super("PixelError",e)}}class zE extends zw{constructor(e,t){super("RequestError",e,{cause:t})}}class JE extends zw{constructor(e){super("XhrRequestError",e)}}class WE extends zw{constructor(e){super("XdrRequestError",e)}}class XE extends zw{constructor(e){super("ExpiresHeaderParsingError","Failed parsing expires header"),Cw(this,"expiresHeader",void 0),this.expiresHeader=e}}const KE="1.1",YE="1.0",ZE="__gppLocator";function eC(e){return tC.apply(this,arguments)}function tC(){return tC=bw((function*(e){let t;return"function"==typeof window.__gpp?yield function(e){return nC.apply(this,arguments)}(window.__gpp):(t=qE(ZE))?yield function(e){return rC.apply(this,arguments)}(t):void e.info("GPP API not found")})),tC.apply(this,arguments)}function nC(){return nC=bw((function*(e){const t={};return yield new iw(((n,r)=>{const o=e("addEventListener",((e,o)=>oC({evt:e,success:o,resolve:n,reject:r,state:t})),void 0,KE);o&&oC({evt:o,success:!0,resolve:n,reject:r,state:t})})).finally((()=>{t.listenerId&&e("removeEventListener",(()=>{}),t.listenerId,KE)}))})),nC.apply(this,arguments)}function rC(){return(rC=bw((function*(e){const t=`li_gpp_call_${Math.random()}`;let n;const r={};return yield new iw(((o,i)=>{n=e=>{var n;const s=null==e||null===(n=e.data)||void 0===n?void 0:n.__gppReturn;(null==s?void 0:s.callId)===t&&oC({evt:s.returnValue,success:s.success,resolve:o,reject:i,state:r})},window.addEventListener("message",n,!1);const s={__gppCall:{command:"addEventListener",version:KE,callId:t}};e.postMessage(s,"*")})).finally((()=>{if(window.removeEventListener("message",n,!1),r.listenerId){const n={__gppCall:{command:"removeEventListener",version:KE,callId:t,parameter:r.listenerId}};e.postMessage(n,"*")}}))}))).apply(this,arguments)}function oC({evt:e,success:t,resolve:n,reject:r,state:o}){if("number"==typeof(null==e?void 0:e.listenerId)&&(o.listenerId=e.listenerId),null==t||t||r(Error("Failed registering GPP event listener")),e.pingData)if(e.pingData.gppVersion){const t=e.pingData,o=t.gppVersion.toString();o!==KE&&o!==YE?r(Error(`unsupported GPP version ${t.gppVersion}`)):"ready"===t.signalStatus&&iC(e.pingData,n)}else try{iC(e.pingData,n)}catch(e){r(Error("Failed to handle GPP event",{cause:e}))}}function iC(e,t){"ready"===e.signalStatus&&t({consentString:e.gppString,applicableSections:e.applicableSections})}const sC="__tcfapiLocator";function aC(e){return cC.apply(this,arguments)}function cC(){return cC=bw((function*(e){let t;return"function"==typeof window.__tcfapi?yield function(e){return lC.apply(this,arguments)}(window.__tcfapi):(t=qE(sC))?yield function(e){return uC.apply(this,arguments)}(t):void e.info("TCF API not found")})),cC.apply(this,arguments)}function lC(){return lC=bw((function*(e){const t={};return yield new iw(((n,r)=>{e("addEventListener",2,((e,o)=>dC(e,o,n,r,t)))})).finally((()=>{t.listenerId&&e("removeEventListener",2,(()=>{}),t.listenerId)}))})),lC.apply(this,arguments)}function uC(){return(uC=bw((function*(e){const t=fC();let n;const r={};return yield new iw(((o,i)=>{n=e=>{var n;const s=null==e||null===(n=e.data)||void 0===n?void 0:n.__tcfapiReturn;null!=s&&s.success||i(Error("Failed to register TCF API event listener")),(null==s?void 0:s.callId)===t&&dC(s.returnValue,s.success,o,i,r)},window.addEventListener("message",n,!1);const s={__tcfapiCall:{command:"addEventListener",version:2,callId:t}};e.postMessage(s,"*")})).finally((()=>{if(window.removeEventListener("message",n,!1),r.listenerId){const t={__tcfapiCall:{command:"removeEventListener",version:2,callId:fC(),parameter:r.listenerId}};e.postMessage(t,"*")}}))}))).apply(this,arguments)}function dC(e,t,n,r,o){"number"==typeof(null==e?void 0:e.listenerId)&&(o.listenerId=e.listenerId),t?"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||n({gdprApplies:null==e.gdprApplies?void 0:!!e.gdprApplies,consentString:e.tcString}):r(Error("Failed to register TCF API event listener"))}function fC(){return`li_tcf_call_${Math.random()}`}const pC="__uspapiLocator";function hC(e){return gC.apply(this,arguments)}function gC(){return gC=bw((function*(e){let t;return"function"==typeof window.__uspapi?yield function(e){return vC.apply(this,arguments)}(window.__uspapi):(t=qE(pC))?yield function(e){return yC.apply(this,arguments)}(t):void e.info("USP API not found")})),gC.apply(this,arguments)}function vC(){return vC=bw((function*(e){return yield new iw(((t,n)=>{e("getUSPData",1,((e,r)=>mC(e,r,t,n)))}))})),vC.apply(this,arguments)}function yC(){return(yC=bw((function*(e){const t=`li_uspapi_call_${Math.random()}`;let n;const r=new iw(((r,o)=>{n=e=>{var n;const i=null==e||null===(n=e.data)||void 0===n?void 0:n.__uspapiReturn;(null==i?void 0:i.callId)===t&&mC(i.returnValue,i.success,r,o)},window.addEventListener("message",n,!1);const i={__uspapiCall:{command:"getUSPData",version:1,callId:t}};e.postMessage(i,"*")}));return yield r.finally((()=>{window.removeEventListener("message",n,!1)}))}))).apply(this,arguments)}function mC(e,t,n,r){t&&"string"==typeof e.uspString?n({consentString:e.uspString}):r(Error("Response from USP API frame was not successful"))}class wC{constructor(e){Cw(this,"logger",void 0),Cw(this,"cachedConsent",void 0),this.logger=e}loadConsent(){var e=this;return bw((function*(){return e.cachedConsent||(e.cachedConsent=e.loadConsentUncached()),yield e.cachedConsent}))()}loadConsentUncached(){var e=this;return bw((function*(){return{gdpr:yield bC(aC(e.logger).catch((()=>{})),100),gpp:yield bC(eC(e.logger).catch((()=>{})),100),usPrivacy:yield bC(hC(e.logger).catch((()=>{})),100)}}))()}}function bC(e,t){return SC.apply(this,arguments)}
/*! js-cookie v3.0.5 | MIT */function SC(){return(SC=bw((function*(e,t){let n;return yield iw.race([e,new iw((e=>{n=setTimeout((()=>e(void 0)),t)}))]).finally((()=>clearTimeout(n)))}))).apply(this,arguments)}function EC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var CC=function e(t,n){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=EC({},n,o)).expires&&(o.expires=new Date(Of()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=t.read(s,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",EC({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,EC({},this.attributes,t))},withConverter:function(t){return e(EC({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class xC{fromConsent(e,t){return ME(e)?(t.info("Using blocked storage handler due to privacy mode"),new kC):new PC(t)}}class kC{getCookie(){throw new Jw}setCookie(){throw new Jw}findSimilarCookies(){throw new Jw}localStorageIsEnabled(){throw new Jw}getDataFromLocalStorage(){throw new Jw}setDataInLocalStorage(){throw new Jw}removeDataFromLocalStorage(){throw new Jw}compatibleWithConsent(){return!0}}class PC{constructor(e){Cw(this,"logger",void 0),Cw(this,"cachedLocalStorageIsEnabled",void 0),this.logger=e}getCookie(e){try{return CC.get(e)}catch(e){this.logger.error(new RC("Failed fetching from cookie jar",e))}}setCookie(e,t,n){try{CC.set(e,t,n||{})}catch(e){this.logger.error(new RC("Failed setting cookie",e))}}findSimilarCookies(e){try{const t=CC.get();return Object.keys(t).filter((n=>n.indexOf(e)>=0&&null!==t[n])).map((e=>t[e]))}catch(e){return this.logger.error(new RC("Failed fetching from cookie jar",e)),[]}}localStorageIsEnabled(){return null==this.cachedLocalStorageIsEnabled&&(this.cachedLocalStorageIsEnabled=this.checkLocalStorage()),this.cachedLocalStorageIsEnabled}getDataFromLocalStorage(e){if(this.localStorageIsEnabled())try{var t;return null!==(t=window.localStorage.getItem(e))&&void 0!==t?t:void 0}catch(e){this.logger.error(new OC("Failed fetching from local storage",{cause:e}))}}setDataInLocalStorage(e,t){if(this.localStorageIsEnabled())try{window.localStorage.setItem(e,t)}catch(e){this.logger.error(new OC("Failed saving to local storage",{cause:e}))}}removeDataFromLocalStorage(e){if(this.localStorageIsEnabled())try{window.localStorage.removeItem(e)}catch(e){this.logger.error(new OC("Failed removing from local storage",{cause:e}))}}checkLocalStorage(){let e=!1;try{if(window&&window.localStorage){const t=Math.random().toString();window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===t,window.localStorage.removeItem(t)}}catch(e){this.logger.error(new OC("Failed checking local storage",{cause:e}))}return e}}class RC extends zw{constructor(e,t){super("CookieJarError",e,{cause:t})}}class OC extends zw{constructor(e,t){super("LocalStorageError",e,t)}}class _C{constructor(e){Cw(this,"size",void 0),Cw(this,"buffer",[]),Cw(this,"pointer",0),Cw(this,"full",!1),this.size=e}push(e){var t;this.full?this.buffer[this.pointer]=e:(gr(t=this.buffer).call(t,e),this.pointer===this.size-1&&(this.full=!0));this.pointer=(this.pointer+1)%this.size}getLast(e){if(e>=this.size)throw new IC("index out of bounds");const t=(this.pointer+this.size-e)%this.size;return this.buffer[t]}values(){if(!this.full)return this.buffer;const e=[];for(let t=this.pointer;t<this.size;t++)gr(e).call(e,this.buffer[t]);for(let t=0;t<this.pointer;t++)gr(e).call(e,this.buffer[t]);return e}length(){return this.full?this.size:this.pointer}}class IC extends zw{constructor(e){super("RingBufferError",e)}}class AC{withContext(e){return new TC(this,e)}static make(e=1e3,t=[]){return new LC(e,t)}}class LC extends AC{constructor(e=1e3,t=[]){super(),Cw(this,"eventHandlers",void 0),Cw(this,"events",void 0),this.eventHandlers=t,this.events=new _C(e)}debug(e,t){this.pushAndNotify({level:"debug",message:e,context:t,timestamp:new Date})}info(e,t){this.pushAndNotify({level:"info",message:e,context:t,timestamp:new Date})}warn(e,t){this.pushAndNotify({level:"warn",message:e,context:t,timestamp:new Date})}error(e,t){this.pushAndNotify({level:"error",error:e,context:t,timestamp:new Date})}getEvents(){var e;return pw(e=this.events).call(e)}pushAndNotify(e){var t;gr(t=this.events).call(t,e),this.eventHandlers.forEach(function(){var t=bw((function*(t){try{yield t(e)}catch(e){console.error("Failed to notify event handler",e)}}));return function(e){return t.apply(this,arguments)}}())}}class TC extends AC{constructor(e,t){super(),Cw(this,"underlying",void 0),Cw(this,"defaultContext",void 0),this.underlying=e,this.defaultContext=t}debug(e,t){this.underlying.debug(e,Ew(Ew({},this.defaultContext),t))}info(e,t){this.underlying.info(e,Ew(Ew({},this.defaultContext),t))}warn(e,t){this.underlying.warn(e,Ew(Ew({},this.defaultContext),t))}error(e,t){this.underlying.error(e,Ew(Ew({},this.defaultContext),t))}getEvents(){return this.underlying.getEvents()}withContext(e){return new TC(this.underlying,Ew(Ew({},this.defaultContext),e))}}const jC={ERROR_REPORTING_SAMPLE_RATE:.1,IDEX_BASE_URL:"https://idx.liadm.com/idex",LC_VERSION:"v3.1.2",LOGGER_HISTORY_SIZE:1e3,PIXEL_BASE_URL:"https://rp.liadm.com",SIDE_CHANNEL_COLLECTOR_URL:"https://rpr.liadm.com",SIDE_CHANNEL_REGISTER_COLLECT_DELAY:1e3,SYNC_BASE_URL:"https://i.liadm.com/s/c"};!function(){if(null!=window.liQHub&&!Array.isArray(window.liQHub))return void console.log("Not starting liQHub: window.liQHub is not undefined or an array");const e=function(){const e=new $E({callHandler:new QE(AC.make()),pixelBaseUrl:jC.PIXEL_BASE_URL,sampleRate:jC.ERROR_REPORTING_SAMPLE_RATE,version:jC.LC_VERSION}),t=AC.make(jC.LOGGER_HISTORY_SIZE,[e.asLogEventHandler()]),n=new wC(t),r=new BE,o=new xC,i={hubVersion:jC.LC_VERSION,syncContainerEndpointUrl:jC.SYNC_BASE_URL,idexEndpointUrl:jC.IDEX_BASE_URL,pixelBaseUrl:jC.PIXEL_BASE_URL,sideChannelCollectorUrl:jC.SIDE_CHANNEL_COLLECTOR_URL,sideChannelRegisterCollectDelay:jC.SIDE_CHANNEL_REGISTER_COLLECT_DELAY};return new LE(o,r,n,t,i)}();Array.isArray(window.liQHub)&&window.liQHub.forEach((t=>gr(e).call(e,t))),window.liQHub=e}();const UC=jw({distributorId:$w(),wrapperName:Hw($w()),usPrivacyString:Hw($w()),gdprApplies:Hw(_w(),!1),gdprConsent:Hw($w()),identifiersToResolve:Hw(qw([$w(),Ow($w())])),identityResolutionConfig:Hw(Dw({ajaxTimeout:Hw(Uw()),source:Hw($w()),requestedAttributes:Hw(Ow($w())),idCookieMode:Hw(qw([Tw("generated"),Tw("provided")]))})),urlCollectionMode:Hw(qw([Tw("full"),Tw("no_path")]),"full"),queryParametersFilter:Hw($w()),ajaxTimeout:Hw(Uw()),ajaxRetries:Hw(Uw()),contextSelectors:Hw($w()),contextElementsLength:Hw(Uw()),peopleVerifiedId:Hw($w()),gppString:Hw($w()),gppApplicableSections:Hw(Ow(Uw())),idCookie:Hw(Dw({strategy:Hw(qw([Tw("cookie"),Tw("localStorage")])),name:Hw($w())})),resolutionSync:Hw(qw([Dw({enabled:Tw(!1)}),Dw({enabled:Tw(!0),targetKey:$w(),strategy:qw([Tw("cookie"),Tw("ls")]),resolutionOptions:Hw(oS)})]),{enabled:!1}),scrapingCookieNames:Hw(qw([$w(),Ow($w())])),defaultEventDelay:Hw(Uw()),emailExtraction:Hw(fE,{}),eventTriggeredCollection:Hw(pE,{}),pageDependentSettings:Hw(hE,{})});class DC{constructor(e,t,n,r){Cw(this,"config",void 0),Cw(this,"pushToHub",void 0),Cw(this,"clientRef",void 0),Cw(this,"requestedAttributes",void 0),Cw(this,"ready",!0),this.config=e,this.pushToHub=t,this.clientRef=n,this.requestedAttributes=r}static make(e,t,n){var r,o,i,s;const a=Vw(UC,n);if(!a.success)return void e({type:"log",level:"error",name:"DistributorClientInvalidConfig",message:"Invalid configuration received"});const c={},l=a.output,u=l.identityResolutionConfig,d=null!==(r=null==u?void 0:u.requestedAttributes)&&void 0!==r?r:[],f=new DC(l,e,c,d);if(e({type:"register_client",clientRef:c,integration:qC(l),partnerCookies:NC(l),clientDetails:{name:null!==(o=l.wrapperName)&&void 0!==o?o:"lc-bundle",version:t},consent:$C(l),contextElementCollectionSettings:MC(l),idCookieSettings:HC(l),urlCollectionSettings:FC(l),collectSettings:{timeout:l.ajaxTimeout,retries:l.ajaxRetries},autoCollectSettings:{enabled:!0,delay:l.defaultEventDelay},pixelSyncSettings:{enabled:!1},resolveSettings:{identityPartner:null===(i=l.identityResolutionConfig)||void 0===i?void 0:i.source},emailExtractionSettings:l.emailExtraction,eventTriggeredCollectionSettings:l.eventTriggeredCollection,pageDependentSettings:l.pageDependentSettings}),null!==(s=l.resolutionSync)&&void 0!==s&&s.enabled){const t=l.resolutionSync;e({type:"resolve",clientRef:c,onSuccess:["cookie"===t.strategy?{type:"write_to_cookie",targetKey:t.targetKey}:{type:"write_to_local_storage",targetKey:t.targetKey}],requestedAttributes:d,additionalResolveParameters:t.resolutionOptions})}return f}push(...e){e.forEach((e=>this.pushOne(e)))}resolve(e,t,n){"function"==typeof t?this.resolveHelper(e,t,n):this.resolveHelper(e,void 0,t)}resolveHelper(e,t,n){this.pushToHub({type:"resolve",clientRef:this.clientRef,onSuccess:[{type:"callback",callback:e}],onFailure:t,requestedAttributes:this.requestedAttributes,additionalResolveParameters:n})}pushOne(e){if(null!=e&&"object"==typeof e){const t=Vw(jS,e);if(!t.success)return void this.pushToHub({type:"log",level:"error",name:"DistributorClientInvalidEvent",message:"Distributor client received invalid event",context:{event:e}});this.pushToHub({type:"collect",clientRef:this.clientRef,sourceEvent:t.output})}}}function HC(e){return null==e.idCookie?{type:"generated"}:"localStorage"===e.idCookie.strategy&&null!=e.idCookie.name?{type:"provided",source:"local_storage",key:e.idCookie.name}:"cookie"===e.idCookie.strategy&&null!=e.idCookie.name?{type:"provided",source:"cookie",key:e.idCookie.name}:{type:"generated"}}function FC(e){return{mode:e.urlCollectionMode,queryParametersFilter:e.queryParametersFilter}}function $C(e){var t;if(!(null!=e.gdprConsent||null!=e.usPrivacyString||null!=e.gppString))return;return{gdpr:null!=e.gdprConsent?{gdprApplies:e.gdprApplies,consentString:e.gdprConsent}:void 0,usPrivacy:null!=e.usPrivacyString?{consentString:e.usPrivacyString}:void 0,gpp:null!=e.gppString?{consentString:e.gppString,applicableSections:null!==(t=e.gppApplicableSections)&&void 0!==t?t:[]}:void 0}}function NC(e){var t,n;const r=null!==(t=null!==(n=e.identifiersToResolve)&&void 0!==n?n:e.scrapingCookieNames)&&void 0!==t?t:[];return"string"==typeof r?new Set(r.split(",").map((e=>xf(e).call(e)))):new Set(r)}function qC(e){return{type:"distributor",distributorId:e.distributorId}}function MC(e){var t;return null!=e.contextSelectors?{enabled:!0,contextSelectors:e.contextSelectors,maxLength:null!==(t=e.contextElementsLength)&&void 0!==t?t:0}:{enabled:!1}}const BC=function e(t,n){return{kind:"schema",type:"intersect",reference:e,expects:[...new Set(t.map((e=>e.expects)))].join(" & ")||"never",async:!1,options:t,message:n,_run(e,t){if(this.options.length){const r=e.value;let o;e.typed=!0;for(const i of this.options){const s=i._run({typed:!1,value:r},t);if(s.issues){var n;if(e.issues)gr(n=e.issues).call(n,...s.issues);else e.issues=s.issues;if(t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.typed&&(o?gr(o).call(o,s.value):o=[s.value])}if(e.typed){e.value=o[0];for(let n=1;n<o.length;n++){const r=Aw(e.value,o[n]);if(r.issue){kw(this,"type",e,t,{received:"unknown"});break}e.value=r.value}}}else kw(this,"type",e,t);return e}}}([UC,Dw({globalVarName:$w()})]);class GC{constructor(e){Cw(this,"pushToHub",void 0),Cw(this,"seenGlobalVarNames",new Set),this.pushToHub=e}push(e){const t=Vw(BC,e);if(!t.success)return void this.pushToHub({type:"log",level:"error",name:"DistributorEntryInvalidConfig",message:"Invalid distributor config received",context:{issues:t.issues}});const n=t.output.globalVarName;if(this.seenGlobalVarNames.has(n))return void this.pushToHub({type:"log",level:"error",name:"DistributorEntryDuplicateConfigForVarname",message:`Distributor config already received for global var name ${n}`});const r=DC.make(this.pushToHub,jC.LC_VERSION,t.output);null!=r?this.attachClientToWindow(r,n):this.pushToHub({type:"log",level:"error",name:"DistributorEntryFailedToCreateClient",message:"Failed to create distributor client"})}attachClientToWindow(e,t){const n=window,r=n[t];null==r?(n[t]=e,this.seenGlobalVarNames.add(t)):Array.isArray(r)?(r.forEach((t=>gr(e).call(e,t))),n[t]=e,this.seenGlobalVarNames.add(t)):this.pushToHub({type:"log",level:"error",name:"DistributorEntryVarNameAlreadyTaken",message:`Global var name ${t} already taken`})}}!function(){var e;if(window.liQHub=null!==(e=window.liQHub)&&void 0!==e?e:[],null==window.liQd)window.liQd=new GC((e=>{var t;return gr(t=window.liQHub).call(t,e)}));else if(Array.isArray(window.liQd)){const e=new GC((e=>{var t;return gr(t=window.liQHub).call(t,e)}));window.liQd.forEach((t=>gr(e).call(e,t))),window.liQd=e}else{var t;gr(t=window.liQHub).call(t,{type:"log",level:"error",name:"DistributorEntryInvalidWindow",message:"window.liQd is neither null or an array"})}}()}();
