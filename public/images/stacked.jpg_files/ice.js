var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){try{var appNamespace="$ice",what,$extend,$fn,$create,$root,$infolinks,loggly,event,utils,comm,shared,products,autoPlacement,externalTags,updater,simplePlayer;window[appNamespace]?window[appNamespace].event.fire("checkQueue"):(what=function(e){return null==e?"undefined":{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},$extend=function(e){if("object"==this.$root.what(e)){for(var t in e)this[t]=e[t];return this}this.$root.logger.warn("source is not an object",this)},$fn=function(e,t){this&&this!=window&&("function"!=this.$root.what(t)?this.$root.logger.warn(e+" is not a function",this):((this[e]=t).$id=e,t.$parent=this,t.$root=this.$root))},$create=function t(n,e,o,i){$root&&!$root.iceResponseTime&&($root.iceResponseTime=Date.now());var r,s,a=what(e),d=this||window;if(!/object|function/.test(a))return null;for(r in s=d[n]||(a=function(){function e(){}return e.prototype.$id=n,e.prototype.$parent=d,e.prototype.$root=d==window?null:d.$root,e.prototype.$create=t,e.prototype.$extend=$extend,e.prototype.$fn=$fn,i&&d!=window&&d.$root.event&&(e.prototype.bind=d.$root.event.bind,e.prototype.unbind=d.$root.event.unbind,e.prototype.fire=d.$root.event.fire),e},d==window?(Object.defineProperties(window,_defineProperty({},n,{value:new(new a),writable:!0})),d[n]):d[n]=new(new a)),"object"==what(o)&&s.$extend(o),e)if(e.hasOwnProperty(r))switch(what(e[r])){case"function":s.$fn(r,e[r]);break;case"object":s.$create(r,e[r]);break;default:s[r]=e[r]}return s},$root=$create(appNamespace,{},null,!1),$infolinks=($root.what=what,$root.$root=$root,$root.$extend({$fn:$fn}),$create("$infolinks",{},null,!0)),loggly=($infolinks.what=what,$infolinks.$root=$infolinks,$infolinks.$create=$create,$infolinks.$extend=$extend,$infolinks.$extend({$fn:$fn}),$root.$create("plugins",{},{},!0),$root.$create("loggly",{logglyTracker:function(){this.key=!1,this.sendConsoleErrors=!1,this.tag="jslogger",this.useDomainProxy=!1},init:function(){var o=this;switch(this.logglyTracker.prototype={setSession:function(e){e?(this.session_id=e,this.setCookie(this.session_id)):this.session_id||(this.session_id=this.readCookie(),this.session_id)||(this.session_id=o.uuid(),this.setCookie(this.session_id))},push:function(e){var t=void 0===e?"undefined":_typeof(e);if(e&&("object"===t||"string"===t)){var n=this;if("string"===t)e={text:e};else{if(e.logglyCollectorDomain)return void(n.logglyCollectorDomain=e.logglyCollectorDomain);if(void 0!==e.sendConsoleErrors&&o.setSendConsoleError(n,e.sendConsoleErrors),e.tag&&o.setTag(n,e.tag),e.useDomainProxy&&o.setDomainProxy(n,e.useDomainProxy),e.logglyKey)return void o.setKey(n,e.logglyKey);if(e.session_id)return void o.setSession(e.session_id)}n.key&&n.track(e)}},track:function(t){t.sessionId=this.session_id,console.log(t);try{var e=new XMLHttpRequest;e.open("POST",this.inputUrl,!0),e.setRequestHeader("Content-Type","text/plain"),e.send(JSON.stringify(t))}catch(e){window&&window.console&&"function"==typeof window.console.log&&(console.log("Failed to log to loggly because of this exception:\n"+e),console.log("Failed log data:",t))}},readCookie:function(){var e,t=document.cookie,n=t.indexOf(o.settings.LOGGLY_SESSION_KEY);return!(n<0)&&(e=(e=t.indexOf(";",n+1))<0?t.length:e,t.slice(n+o.settings.LOGGLY_SESSION_KEY_LENGTH,e))},setCookie:function(e){document.cookie=o.settings.LOGGLY_SESSION_KEY+"="+e}},this.logLevel()){case"error":this.warnLog=function(){},this.traceLog=function(){};break;case"warn":this.traceLog=function(){};break;case"info":case"true":case"log":break;case"loggly":case null:(loggly=new this.logglyTracker).push({logglyKey:"c2567968-6d7d-4427-a7bb-eaab4a243135",sendConsoleErrors:!1,tag:"ice"}),this.errorLog=function(){var e=(arguments[0]?arguments[0].stack:"no argument").replaceAll("https://resources.infolinks.com/js","");window.$iceboot&&(e=e.replaceAll("/"+window.$iceboot,"")),loggly.push({args:arguments,stack:e,url:window.location.href,ua:window.navigator.userAgent,v:window.$iceboot?window.$iceboot.version:"unknown"})},this.testlog=function(){loggly.push({args:arguments,url:window.location.href,ua:window.navigator.userAgent,v:window.$iceboot?window.$iceboot.version:"unknown"})},this.deprecatedLog=function(){var e=(arguments[0]?arguments[0].stack:"no argument").replaceAll("https://resources.infolinks.com/js","");window.$iceboot&&(e=e.replaceAll("/"+window.$iceboot,"")),loggly.push({deprecatedError:arguments[0].deprecatedError||arguments,stack:e,url:window.location.href,ua:window.navigator.userAgent,v:window.$iceboot?window.$iceboot.version:"unknown"})},this.warnLog=function(){},this.traceLog=function(){}}},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},setKey:function(e,t){e.key=t,e.setSession(),this.setInputUrl(e)},setTag:function(e,t){e.tag=t},setDomainProxy:function(e,t){e.useDomainProxy=t,this.setInputUrl(e)},setSendConsoleError:function(i,e){var r;i.sendConsoleErrors=e,!0===i.sendConsoleErrors&&(r=window.onerror,window.onerror=function(e,t,n,o){i.push({category:"BrowserJsException",exception:{message:e,url:t,lineno:n,colno:o}}),r&&"function"==typeof r&&r.apply(window,arguments)})},setInputUrl:function(e){1==e.useDomainProxy?e.inputUrl=this.settings.LOGGLY_INPUT_PREFIX+window.location.host+"/"+this.settings.LOGGLY_PROXY_DOMAIN+"/inputs/"+e.key+"/tag/"+e.tag:e.inputUrl=this.settings.LOGGLY_INPUT_PREFIX+(e.logglyCollectorDomain||this.settings.LOGGLY_COLLECTOR_DOMAIN)+"/inputs/"+e.key+"/tag/"+e.tag},traceLog:function(){console.info(arguments)},warnLog:function(){console.warn(arguments)},errorLog:function(){console.error(arguments)},deprecatedLog:function(){console.error(arguments)},testlog:function(){arguments&&console.error(arguments)},logLevel:function(){var e=window.location.href,e=new RegExp("[?&]il.trce(=([^&#]*)|&|#|$)").exec(e);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"info":null}},{settings:{LOGGLY_INPUT_PREFIX:"http"+("https:"===document.location.protocol?"s":"")+"://",LOGGLY_COLLECTOR_DOMAIN:"logs-01.loggly.com",LOGGLY_SESSION_KEY:"logglytrackingsession",LOGGLY_SESSION_KEY_LENGTH:"logglytrackingsession".length+1,LOGGLY_PROXY_DOMAIN:"loggly",loggly:null}},!0)),event=(loggly.init(),$ice.versionFile="ice",$root.$create("event",{bind:function(e){var t,n,o,i=this.$root,r=i.event,s=null;if(e.event?e.listener||(s=r.msgs.ml):s=r.msgs.me,s)return i.logger.error(s,this),!1;e.$root=i,r._listeners[e.event]||(r._listeners[e.event]=[]);var a=r._listeners[e.event],s=i.what(e.listener);if("function"==s)a[a.length]=e;else if("object"==s)for(t in e.listener){for(o in this!=r&&this.$fn(t,e.listener[t]),n={},e)n[o]=e[o];n.listener=e.listener[t],a[a.length]=n}return!0},unbind:function(e,t){var n,o,i=this.$root,r=i.event,s=r._listeners[e];if("array"!=i.what(s))return!1;if(t)for(n=0,o=s.length;n<o;n++)s[n].listener===t&&s.splice(n--,1);else delete r._listeners[e];return!0},fire:function(e,t,n){var o,i,r,s,a,d=this.$root,l=d.event._listeners[e],c="undefined"!=d.what(t);if(!e||d.event.disabled||l&&l.disabled||"array"!=d.what(l))return!1;for(var u=0,h=l.length;u<h;u++){if(r=l[u],c&&(r.data=t),o=r.listener,(i=o.$parent||window)==window&&d.logger.error("Probable Error: Context is window object. event: "+e,this.fire),a=this.msg("Fire",e,o.$id,t),s=n&&"number"==d.what(n)?n:r.delay)return setTimeout((()=>{var e=d.utils.object.clone(r);return function(){d.logger.log(a,o),o.call(i,e)}})(),s);d.logger.log(a,o),o.call(i,r)}},repeat:function(e,t,n,o){var i,r,s,a,d=this.$root,l=d.event._listeners[e],c="undefined"!=d.what(n);if(!e||d.event.disabled||l&&l.disabled||"array"!=d.what(l)||!t||"number"!=d.what(t))return!1;o&&"number"==d.what(o)||(o=null);for(var u=0,h=l.length;u<h;u++){if((s=l[u]).repeat||s.delay)return;c&&(s.data=n),r=(i=s.listener).$parent||window,s.interval=t,s.counter=0,a=function(){s.counter||d.logger.log(d.event.msg("Repeat",e,i.$id,n,{interval:t,delay:o}),i),s.counter++,i.call(r,s)},o?s.delay=setTimeout(function(){s.repeat=setInterval(a,t)},o):s.repeat=setInterval(a,t)}},stop:function(e){var t,n,o=this.$root,i=o.event._listeners[e];if(!e||!i)return!1;for(var r=0,s=i.length;r<s;r++)n=i[r],clearInterval(n.repeat),clearTimeout(n.delay),delete n.repeat,delete n.delay,t=n.listener,o.logger.log(o.event.msg("Stop",e,t.$id,null,{repetitions:n.counter}),t),n.counter=0},disable:function(e){this.$root.event.able(e,!0)},enable:function(e){this.$root.event.able(e,!1)},able:function(e,t){var n,o=this.$root;if(e)for("string"==o.what(e)&&(e=[e]),n=0;n<e.length;n++)o.event._listeners[e].disabled=t;else o.event.disabled=t},msg:function(e,t,n,o,i){return[e," { event:'",t,"', listener:'",n||"Anonymous","'",i?", "+this.data2str(i):"",o?", "+this.data2str(o):"","} "].join("")},data2str:function(e){var t,n,o=[];if("object"!=this.$root.what(e))return"";for(t in e)n="'"+(null==e[t]?"null":e[t].toString?this.$root.utils.string.truncate(e[t].toString(),50,"..."):"[Unknown Object]")+"'",o[o.length]=[t,n].join(":");return o.join(", ")}},{_listeners:{},msgs:{me:"Error: Missing event.",ml:"Error: Misssing listener."}},!1)),utils=(event.$create("dom",{bind:function(e,t){var n,o,i,r,s=this.$root,a=s.settings.nodeTypes,d=null;if(!e||e.nodeType!=a.ELEMENT&&e.nodeType!=a.DOCUMENT&&e!=window?d=this.msgs.mbe:t.event?t.listener||(d=this.$parent.msgs.ml):d=this.$parent.msgs.me,d)return s.logger.error(d,this),!1;if(e.$iceId||(e.$iceId=++this.elementBinder),t.element=e,"function"==(t.$root=s).what(t.listener))t.listener={a:t.listener};else if("object"!=s.what(t.listener))return;for(n in t.listener){for(i in o={},t)o[i]=t[i];o.listener=t.listener[n],e.addEventListener&&/mouseenter|mouseleave/.test(o.event)&&(o.simEvent=o.event,o.event=o.event.replace(/enter/,"over").replace(/leave/,"out")),r=(()=>{var t=s.utils.object.clone(o);return function(e){try{e=e||window.event,/mouseenter|mouseleave/.test(t.simEvent)&&e.relatedTarget&&this==e.relatedTarget||((e,t)=>{if(e!==t){for(;t&&t!==e;)t=t.parentNode;return t===e}})(this,e.relatedTarget)||(t.domEvent=e,s.event.dom.fire(t))}catch(e){s.loggly.errorLog(e,"__event bind unexpected error in handler for event ",t.event)}}})(),e.addEventListener?e.addEventListener(o.event,r,!1):e.attachEvent&&e.attachEvent("on"+o.event,r);var l=e.$iceId,c=this._listeners;c[l]||(c[l]={}),c[l][o.event]||(c[l][o.event]=[]),s.utils.array.push(c[l][o.event],{listener:r,original:o.listener})}return!0},unbind:function(e,t,n){var o,i=this.$root,r=i.settings.nodeTypes;if(!e||!e.$iceId||e.nodeType!=r.ELEMENT&&e.nodeType!=r.DOCUMENT&&e!=window)i.logger.error(this.msgs.mbe,this);else{var r=e.$iceId,s=i.event.dom._listeners[r];if(s&&s[t]){for(o=0;o<s[t].length;o++)s[t][o].original&&s[t][o].original.name==n.name&&(e.removeEventListener?e.removeEventListener(t,s[t][o].listener,!1):e.detachEvent&&e.detachEvent("on"+t,s[t][o].listener),s[t].splice(o--,1));return 0==s[t].length&&delete s[t],!0}}},unbindAll:function(e){var t,n=this.$root,o=n.settings.nodeTypes;if(!e||!e.$iceId||e.nodeType!=o.ELEMENT&&e.nodeType!=o.DOCUMENT&&e!=window)n.logger.error(this.msgs.mbe,this);else{var o=e.$iceId,i=n.event.dom._listeners[o];if(i){for(var r in i){for(t=0;t<i[r].length;t++)e.removeEventListener?e.removeEventListener(r,i[r][t].listener,!1):e.detachEvent&&e.detachEvent("on"+r,i[r][t].listener),i[r].splice(t--,1);0==i[r].length&&delete i[r]}return!0}}},fire:function(e){var t=this.$root,n=e.listener,o=n.$parent||window,i=t.event.msg("Fire",e.event,n.$id,e.data,{element:e.element.id||e.element.tagName});e.delay&&"number"==t.what(e.delay)?setTimeout(function(){t.logger.log(i,n),n.call(o,e)},e.delay):(t.logger.log(i,n),n.call(o,e))}},{_listeners:{},elementBinder:0,msgs:{mbe:"Error: Missing or bad element."}},!1),$root.$create("logger",{log:function(e,t,n){var o={message:e,type:n=n||"log",time:(new Date).getTime(),context:t};this.history[this.history.length]=o,"console"==this.output&&"undefined"!=this.$root.what(window.console)&&console[n]([this.$root.utils.date.int2str(o.time),e].join(" "),this.descent(t,!0))},info:function(e,t){this.log(e,t,"info")},warn:function(e,t){this.log(e,t,"warn")},error:function(e,t){this.log(e,t,"error"),this.errorReporting>=Math.ceil(100*Math.random())&&this.$root.event.fire("sendErrorReport",{msg:e})},descent:function(e,t){var n=[];for(t&&e&&e.$id&&(n[0]=e);e&&e.$root&&e!=window;)n.unshift(e.$id),e=e.$parent;return n},describe:function(e){for(var t,n=[],o=0,i=this.history.length;o<i;o++)t=this.history[o],e&&e!=t.type||(n[n.length]=[this.$root.utils.date.int2str(t.time),t.message,this.descent(t.context,!1).join(".")].join(" "));return n}},{history:[],output:"none",errorReporting:-1}),$root.$create("browser",new function(){function r(e,t){var n,o,i;return"object"==(void 0===e?"undefined":_typeof(e))&&(t=e,e=void 0),this instanceof r?(n=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""),o=t?m.extend(f,t):f,this.getBrowser=function(){var e={name:void 0,version:void 0};return g.rgx.call(e,n,o.browser),e.major=m.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return g.rgx.call(e,n,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return g.rgx.call(e,n,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return g.rgx.call(e,n,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return g.rgx.call(e,n,o.os),e},(i=this).getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU(),getDevice:function(){return"tablet"===i.getDevice().type?"t":"mobile"===i.getDevice().type||"icemobile"===$root.versionFile?"m":"p"},getName:function(){return i.getBrowser().name.replace(/\s+/g,"")},getVersion:function(){return i.getBrowser().version},detectCSSFeature:function(e){var t=!1,n="Webkit Moz ms O".split(" "),o=document.createElement("div");if(e=e.toLowerCase(),0==(t=void 0!==o.style[e]?!0:t))for(var i=e.charAt(0).toUpperCase()+e.substr(1),r=0;r<n.length;r++)if(void 0!==o.style[n[r]+i]){t=!0;break}return t},getOS:function(){return i.getOS().name},getOSVersion:function(){return i.getOS().version},getEngine:function(){return i.getEngine().name},IE:i.IE(),Firefox:i.Firefox()}},this.Firefox=function(){if("Firefox"===i.getBrowser().name)return i.getBrowser().version},this.IE=function(){if("IE"===i.getBrowser().name)return i.getBrowser().version},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this):new r(e,t).getResult()}var u="function",e="model",t="name",n="type",o="vendor",i="version",s="architecture",a="console",d="mobile",l="tablet",c="smarttv",h="wearable",m={extend:function(e,t){var n,o={};for(n in e)t[n]&&t[n].length%2==0?o[n]=t[n].concat(e[n]):o[n]=e[n];return o},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==(void 0===e?"undefined":_typeof(e))?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},g={rgx:function(e,t){for(var n,o,i,r,s,a=0;a<t.length&&!r;){for(var d=t[a],l=t[a+1],c=n=0;c<d.length&&!r;)if(r=d[c++].exec(e))for(o=0;o<l.length;o++)s=r[++n],"object"==(void 0===(i=l[o])?"undefined":_typeof(i))&&0<i.length?2==i.length?_typeof(i[1])==u?this[i[0]]=i[1].call(this,s):this[i[0]]=i[1]:3==i.length?_typeof(i[1])!=u||i[1].exec&&i[1].test?this[i[0]]=s?s.replace(i[1],i[2]):void 0:this[i[0]]=s?i[1].call(this,s,i[2]):void 0:4==i.length&&(this[i[0]]=s?i[3].call(this,s.replace(i[1],i[2])):void 0):this[i]=s||void 0;a+=2}},str:function(e,t){for(var n in t)if("object"==_typeof(t[n])&&0<t[n].length){for(var o=0;o<t[n].length;o++)if(m.has(t[n][o],e))return"?"==n?void 0:n}else if(m.has(t[n],e))return"?"==n?void 0:n;return e}},p={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},f={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[t,i],[/(opios)[\/\s]+([\w\.]+)/i],[[t,"Opera Mini"],i],[/\s(opr)\/([\w\.]+)/i],[[t,"Opera"],i],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[t,i],[/(konqueror)\/([\w\.]+)/i],[[t,"Konqueror"],i],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[t,"IE"],i],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[t,"Edge"],i],[/(yabrowser)\/([\w\.]+)/i],[[t,"Yandex"],i],[/(puffin)\/([\w\.]+)/i],[[t,"Puffin"],i],[/(focus)\/([\w\.]+)/i],[[t,"Firefox Focus"],i],[/(opt)\/([\w\.]+)/i],[[t,"Opera Touch"],i],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[t,"UCBrowser"],i],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],i],[/(micromessenger)\/([\w\.]+)/i],[[t,"WeChat"],i],[/(brave)\/([\w\.]+)/i],[[t,"Brave"],i],[/(qqbrowserlite)\/([\w\.]+)/i],[t,i],[/(QQ)\/([\d\.]+)/i],[t,i],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[t,i],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[t,i],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[t,i],[/(MetaSr)[\/\s]?([\w\.]+)/i],[t],[/(LBBROWSER)/i],[t],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[i,[t,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[i,[t,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[t,i],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[i,[t,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[t,/(.+)/,"$1 WebView"],i],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[t,/(.+(?:g|us))(.+)/,"$1 $2"],i],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[i,[t,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[t,i],[/(dolfin)\/([\w\.]+)/i],[[t,"Dolphin"],i],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[t,"Chrome"],i],[/(coast)\/([\w\.]+)/i],[[t,"Opera Coast"],i],[/fxios\/([\w\.-]+)/i],[i,[t,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[i,[t,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[i,t],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[t,"GSA"],i],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[i,g.str,p.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[t,i],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],i],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,i]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,m.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[s,/ower/,"",m.lowerize]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[s,m.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[e,o,[n,l]],[/applecoremedia\/[\w\.]+ \((ipad)/],[e,[o,"Apple"],[n,l]],[/(apple\s{0,1}tv)/i],[[e,"Apple TV"],[o,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[o,e,[n,l]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[e,[o,"Amazon"],[n,l]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[e,g.str,p.device.amazon.model],[o,"Amazon"],[n,d]],[/android.+aft([bms])\sbuild/i],[e,[o,"Amazon"],[n,c]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[e,o,[n,d]],[/\((ip[honed|\s\w*]+);/i],[e,[o,"Apple"],[n,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[o,e,[n,d]],[/\(bb10;\s(\w+)/i],[e,[o,"BlackBerry"],[n,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[e,[o,"Asus"],[n,l]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[o,"Sony"],[e,"Xperia Tablet"],[n,l]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[e,[o,"Sony"],[n,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[o,e,[n,a]],[/android.+;\s(shield)\sbuild/i],[e,[o,"Nvidia"],[n,a]],[/(playstation\s[34portablevi]+)/i],[e,[o,"Sony"],[n,a]],[/(sprint\s(\w+))/i],[[o,g.str,p.device.sprint.vendor],[e,g.str,p.device.sprint.model],[n,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[o,e,[n,l]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[o,[e,/_/g," "],[n,d]],[/(nexus\s9)/i],[e,[o,"HTC"],[n,l]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[e,[o,"Huawei"],[n,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[o,e,[n,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[e,[o,"Microsoft"],[n,a]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[o,"Microsoft"],[n,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[e,[o,"Motorola"],[n,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[o,"Motorola"],[n,l]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[o,m.trim],[e,m.trim],[n,c]],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[o,"Samsung"],[n,c]],[/\(dtv[\);].+(aquos)/i],[e,[o,"Sharp"],[n,c]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[o,"Samsung"],e,[n,l]],[/smart-tv.+(samsung)/i],[o,[n,c],e],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[o,"Samsung"],e,[n,d]],[/sie-(\w*)/i],[e,[o,"Siemens"],[n,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[o,"Nokia"],e,[n,d]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[e,[o,"Acer"],[n,l]],[/android.+([vl]k\-?\d{3})\s+build/i],[e,[o,"LG"],[n,l]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[o,"LG"],e,[n,l]],[/(lg) netcast\.tv/i],[o,e,[n,c]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[e,[o,"LG"],[n,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[e,[o,"Lenovo"],[n,l]],[/linux;.+((jolla));/i],[o,e,[n,d]],[/((pebble))app\/[\d\.]+\s/i],[o,e,[n,h]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[o,e,[n,d]],[/crkey/i],[[e,"Chromecast"],[o,"Google"]],[/android.+;\s(glass)\s\d/i],[e,[o,"Google"],[n,h]],[/android.+;\s(pixel c)[\s)]/i],[e,[o,"Google"],[n,l]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[e,[o,"Google"],[n,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[e,/_/g," "],[o,"Xiaomi"],[n,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[e,/_/g," "],[o,"Xiaomi"],[n,l]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[e,[o,"Meizu"],[n,l]],[/(mz)-([\w-]{2,})/i],[[o,"Meizu"],e,[n,d]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[e,[o,"OnePlus"],[n,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[e,[o,"RCA"],[n,l]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[e,[o,"Dell"],[n,l]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[e,[o,"Verizon"],[n,l]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[o,"Barnes & Noble"],e,[n,l]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[e,[o,"NuVision"],[n,l]],[/android.+;\s(k88)\sbuild/i],[e,[o,"ZTE"],[n,l]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[e,[o,"Swiss"],[n,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[e,[o,"Swiss"],[n,l]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[e,[o,"Zeki"],[n,l]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[o,"Dragon Touch"],e,[n,l]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[e,[o,"Insignia"],[n,l]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[e,[o,"NextBook"],[n,l]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[o,"Voice"],e,[n,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[o,"LvTel"],e,[n,d]],[/android.+;\s(PH-1)\s/i],[e,[o,"Essential"],[n,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[e,[o,"Envizen"],[n,l]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[o,e,[n,l]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[e,[o,"MachSpeed"],[n,l]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[o,e,[n,l]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[e,[o,"Rotor"],[n,l]],[/android.+(KS(.+))\s+build/i],[e,[o,"Amazon"],[n,l]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[o,e,[n,l]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[n,m.lowerize],o,e],[/[\s\/\(](smart-?tv)[;\)]/i],[[n,c]],[/(android[\w\.\s\-]{0,9});.+build/i],[e,[o,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[i,[t,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)/i],[[t,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,i],[/rv\:([\w\.]{1,9}).+(gecko)/i],[i,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,i],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[t,[i,g.str,p.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[i,g.str,p.os.windows.version]],[/\((bb)(10);/i],[[t,"BlackBerry"],i],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[t,i],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[t,"Symbian"],i],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"],i],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[t,i],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],i],[/(sunos)\s?([\w\.\d]*)/i],[[t,"Solaris"],i],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[t,i],[/(haiku)\s(\w+)/i],[t,i],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[i,/_/g,"."],[t,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[t,"Mac OS"],[i,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[t,i]]};return r.VERSION="0.7.19",r.BROWSER={NAME:t,MAJOR:"major",VERSION:i},r.CPU={ARCHITECTURE:s},r.DEVICE={MODEL:e,VENDOR:o,TYPE:n,CONSOLE:a,MOBILE:d,SMARTTV:c,TABLET:l,WEARABLE:h,EMBEDDED:"embedded"},r.ENGINE={NAME:t,VERSION:i},r.OS={NAME:t,VERSION:i},r()}),$root.$create("utils",{VeST:function(e,t,n){var o,i,r=this.$root,s=this.VeST;return(o=s.cache)||(o=s.cache={},s.encQ=function(e){return e.split("'").join("\t")},s.decQ=function(e){return e.split("\t").join("'")}),n&&o[n]?i=o[n]:(e=["var p=[];with(obj||{}){p.push('",e=(e=e.replace(/<%\-\-[\s\S]*?\-\-%>/g,"")).replace(/[\r\t\n]/g," ").replace(/<%.*?%>/g,s.encQ).replace(/'/g,"\\'").replace(/<%.*?%>/g,s.decQ).replace(/<%=(.*?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('"),"');}return p.join('');"].join(""),i=new Function("obj",e),n&&(o[n]=i)),"object"==r.what(t)&&(n&&(t.$id=n),t.$root=r),i(t)},doRectsOverlap:function(e,t){var n;return t[0]<e[0]&&(n=e,e=t,t=n),!(e[2]<t[0]||e[0]>t[2]||(t[1]<e[1]&&(n=e,e=t,t=n),e[3]<t[1])||e[1]>t[3])}})),comm=(utils.$create("number",{get:function(e){return this.counters[e]},next:function(e,t){return"undefined"==this.$root.what(this.counters[e])?this.counters[e]="number"==this.$root.what(t)?t:0:this.counters[e]++,this.counters[e]}},{counters:{}}),utils.$create("agds",{get:function(e){var t=this.$root,n=[];return(window.adsbygoogle||[]).onload=function(){[].forEach.call(document.querySelectorAll("ins, .adsbygoogle"),function(e){n.push(e)}),t.event.fire(e,{agds:n})},n},elementsOverlap:function(e,t){for(var n=[],o=t.getBoundingClientRect(),i=0;e&&i<e.length;i++){var r=e[i].getBoundingClientRect();!(r.top>o.bottom||r.right<o.left||r.bottom<o.top||r.left>o.right)&&n.push(e[i])}return n},check:function(e,t){var n=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(n)}}),utils.$create("gpt",{destroySlots:function(e){var t,n,o=this;window.googletag&&window.googletag.destroySlots&&(t=window.googletag.destroySlots,window.googletag.destroySlots=function(e){return o.destroyIceProducts(e),t(e)},window.googletag.pubads)&&(n=window.googletag.pubads().refresh,window.googletag.pubads().refresh=function(e){return o.destroyIceProducts(e),n(e)})},destroyIceProducts:function(e){var t=this.$root;if(t.products.inplace||t.products.incube)if(e){for(var n=0;n<e.length;n++)if(e[n].getSlotElementId()){t.event.fire("destroyInplace",{id:e[n].getSlotElementId()}),t.event.fire("destroyIncube",{id:e[n].getSlotElementId()});break}}else t.event.fire("destroyInplace"),t.event.fire("destroyIncube");if(t.settings.dfpSlot)if(e){for(n=0;n<e.length;n++)if(e[n].getSlotId()&&t.settings.dfpSlot==e[n].getSlotId().getName()){t.event.fire("destroy",{id:e[n].getSlotId().getName()});break}}else t.event.fire("destroy")},getSlotName:function(e){return""}}),utils.$create("image",{preLoadImage:function(e,t){var n,o=window.$ice.$root,i=(t=t||1e3,!1),r=new Image;r.onerror=r.onabort=function(){try{if(!i)return clearTimeout(n),!1}catch(e){o.loggly.errorLog(e,"_utils preLoadImage onerror unexpected error in handler for event 'onerror' or 'onabort'")}},r.onload=function(){try{if(!i)return clearTimeout(n),!0}catch(e){o.loggly.errorLog(e,"_utils preLoadImage onload unexpected error in handler for event 'onload' on img")}},r.src=e,n=setTimeout(function(){return i=!0,!(r.src="//!!!!/errorOnLoad.jpg")},t)}}),utils.$create("string",{capitalize:function(e){var t=e.split(/\s+/);if(2<t.length)t[0]=t[0].charAt(0).toUpperCase()+t[0].slice(1);else for(var n=0,o=t.length;n<o;++n)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return t.join(" ")},lpad:function(e,t,n){return new Array(t+1-e.toString().length).join(n||"0")+e},qw:function(e){return this.trim(e).split(/\s+/)},toObject:function(e,t,n){if(-1==e.indexOf("="))return null;for(var o,i={},r=(e=0==e.indexOf("?")?e.substring(1):e).split("&"),s=0,a=r.length;s<a;s++)2==(o=r[s].split("=")).length&&(n&&(o[0]=decodeURIComponent(o[0]),o[1]=decodeURIComponent(o[1])),i[o[0]]=o[1]);return"undefined"!=this.$root.what(t)?i[t]:i},stringToObject:function(e){for(var t,n,o={},i=0,r=(n=(e=e.indexOf("{")||e.indexOf("}")?e.replace(/[{}]/g,""):e).split(",")).length;i<r;i++)o[(t=n[i].split(":"))[0]]=t[1];return o},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},replaceAll:function(e,t,n){return e.split(t).join(n)},truncate:function(e,t,n){return e.length<=t?e:e.substring(0,t)+(n||"")},truncateToChar:function(e,t,n,o){t=e.length<=t?e:e.substring(0,t);return t=t.length<e.length?t.substr(0,t.lastIndexOf(n))+(o||""):t},parseURL:function(e){var t,n={},o=0,i=0;if(null!=e&&0!=e.length){switch(-1!=e.indexOf("://")?i=(o=e.indexOf("://"))+3:e.startsWith("tel:")&&(i=(o=3)+1),n.protocol=e.substr(0,o),i=-1==(i=(o=e.substr(i,e.length)).indexOf("/"))?o.length:i,n.domain=o.substr(0,i),n.path=-1==i||i+1==o.length?null:o.substr(i+1,o.length),(t=n.domain.split(".")).length){case 2:n.subdomain=null,n.host=t[0],n.tld=t[1];break;case 3:n.subdomain=t[0],n.host=t[1],n.tld=t[2];break;case 4:n.subdomain=t[0],n.host=t[1],n.tld=t[2]+"."+t[3]}n.parent_domain=n.host+"."+n.tld}return n}}),utils.$create("array",{clone:function(e,t){for(var n=[],o=this.$root,i=0,r=e.length;i<r;i++)t&&/object|array/.test(o.what(e[i]))&&(!this.cloneDepth||this.cloneDepth<10)?(this.cloneDepth||(this.cloneDepth=0),this.cloneDepth++,n[i]=("object"==o.what(e[i])?this.$parent.object:this).clone(e[i],t)):n[i]=e[i];return delete this.cloneDepth,n},concat:function(){for(var e=[],t=0,n=arguments.length;t<n;t++)for(var o=0,i=arguments[t].length;o<i;o++)e[e.length]=arguments[t][o];return e},discard:function(e,t){for(var n=e.length-1;0<=n;n--)e[n]==t&&e.splice(n,1);return e},find:function(e,t){for(var n=0,o=e.length;n<o;n++)if(t(e[n]))return e[n];return null},indexOf:function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]==t)return n;return-1},insertionSort:function(e,t,n){for(var o,i,r=1;r<e.length;r++){for(i=e[r],o=r-1;0<=o&&(n?e[o][t]>i[t]:e[o][t]<i[t]);)e[o+1]=e[o],o--;e[o+1]=i}},map:function(e,t){for(var n=0,o=e.length,i=[];n<o;n++)i[n]=t(e[n]);return i},push:function(){if(!(arguments.length<2)){for(var e=arguments[0],t=1;t<arguments.length;t++)e[e.length]=arguments[t];return e}},range:function(e,t){var n,o=[],i=this.$root.what;if("number"==i(e)&&"number"==i(t)&&e<=t)for(n=e;n<=t;n++)o[o.length]=n;return o},sum:function(e){for(var t=0,n=this.$root.what,o=0,i=e.length;o<i;o++)"number"==n(e[o])&&(t+=e[o]);return t},times:function(e,t){for(var n=this.range(1,t),o=0;o<t;o++)n[o]=e;return n},toObject:function(e,t,n){if(e){var o,i,r=this.$root.what;t=t||{};for(var s=0,a=(e="array"!=r(e)?[e]:e).length;s<a;s++)(o="string"==r(o=e[s])?o:null!=o&&"function"==r(o.toString)?o.toString():null)&&(i="undefined"==r(n)?o:"function"==r(n)?n(o):n,t[o]=i)}return t},uniq:function(e){for(var t,n=0;n<e.length-1;n++)for(t=n+1;t<e.length;t++)e[n]===e[t]&&(e.splice(t,1),t--);return e}}),utils.$create("object",{clean:function(e){var t,n,o={},i=this.$root.what;for(t in e)"undefined"!=i(n=e[t])&&""!==n&&null!==n&&(o[t]=e[t]);return o},clone:function(e,t){var n,o={},i=this.$root;for(n in e)t&&/object|array/.test(i.what(e[n]))&&(!this.cloneDepth||this.cloneDepth<10)?(this.cloneDepth||(this.cloneDepth=0),this.cloneDepth++,o[n]=("object"==i.what(e[n])?this:this.$parent.array).clone(e[n],t)):o[n]=e[n];return delete this.cloneDepth,o},extend:function(){if(arguments.length<2)return arguments.length?arguments[0]:{};var e,t,n,o,i=this.$root,r=arguments[0];if("object"==i.what(r))for(t=1,n=arguments.length;t<n;t++)if("object"==i.what(o=arguments[t]))for(e in o)r[e]=o[e];return r},hasKey:function(e,t){for(var n=0,o=(t=t instanceof Array?t:[t]).length,i=this.$root.what;n<o;n++)if("undefined"!=i(e[t[n]]))return!0;return!1},keys:function(e){var t,n=[];for(t in e)n[n.length]=t;return n},map:function(e,t){var n,o={};for(n in e)o[n]=t(e[n]);return o},renameProperty:function(e,t,n){"undefined"!=this.$root.what(e[t])&&(e[n]=e[t],delete e[t])},stringify:function(e,t){var n,o,i,r,s=this.$root,a=s.what(e),d=s.utils.array.push,l=this.stringify;if(10<(t=t||1))n='"Exceeded max depth of 10 levels."';else if("undefined"==a)n="undefined";else if("number"==a||"boolean"==a)n=e;else if("string"==a)n=['"',e.replace(/"/g,'\\"'),'"'].join("");else if("function"==a)n='"[Function]"';else if("array"==a){for(n=["["],o=0,i=e.length;o<i;o++)d(n,l.call(this,e[o],t+1),",");1<n.length&&n.pop(),d(n,"]"),n=n.join("")}else if(null===e)n="null";else if("object"==a){for(r in n=["{"],e)d(n,'"',r.replace(/"/g,'\\"'),'":',l.call(this,e[r],t+1),",");1<n.length&&n.pop(),d(n,"}"),n=n.join("")}return n},toQueryString:function(e,t){var n,o,i=[],r=this.$parent.array.push;for(n in e)o=t?(n=encodeURIComponent(n),encodeURIComponent(e[n])):e[n],r(i,i.length?"&":"?",n,"=",o);return i.join("")},values:function(e){var t,n=[];for(t in e)n[n.length]=e[t];return n},join:function(e,t){var n,o="";for(n in e)o+=n+":"+e[n]+t;return o="~"==o.substr(o.length-1)?o.substring(0,o.length-1):o},size:function(e){var t,n=0;for(t in e)n++;return n}}),utils.$create("date",{now:function(){return(new Date).getTime()},int2str:function(e){var e=new Date(e),t=this.$parent.string.lpad;return[e.getFullYear(),"-",t(e.getMonth()+1,2),"-",t(e.getDate(),2)," ",t(e.getHours(),2),":",t(e.getMinutes(),2),":",t(e.getSeconds(),2),".",t(e.getMilliseconds(),3)].join("")}}),utils.$create("timer",{start:function(e){var t=this.$root.utils.date.now();return this.times[e]={start:t},t},stop:function(e){var t=this.$root,n=this.times[e];return n&&n.start?(n.stop=t.utils.date.now(),n.delta=n.stop-n.start,n.delta):(t.logger.warn(['Trying to stop timer "',e,'" which does not exist.'].join(""),this.stop),0)},delta:function(e){e=this.times[e];return e&&e.delta?e.delta:0},poll:function(e){e=this.times[e];return e&&e.start?(e.stop||this.$root.utils.date.now())-e.start:0},clear:function(e){delete this.times[e]}},{times:{}}),utils.$create("cookie",{afterWWWi:"www"==window.location.hostname.split(".")[0]?4:0,set:function(e,t,n){n=n?"; expires="+("date"==this.$root.what(n)?n:new Date((new Date).getTime()+1e3*n)).toUTCString():"";var o="; domain="+location.hostname.substr(this.afterWWWi,location.hostname.length);return document.cookie=[e,"=",encodeURIComponent(t),n,o,"; path=/"].join(""),!0},has:function(e){return-1<this.$parent.array.indexOf(this.$parent.array.map(document.cookie.split(/;\s*/),function(e){return e.split("=")[0]}),e)},remove:function(e){var t="; domain="+location.hostname.substr(this.afterWWWi,location.hostname.length);return document.cookie=[e,"=;expires=",new Date((new Date).getTime()-6e4).toUTCString(),t,"; path=/"].join(""),!0},get:function(e){var t={};return this.$parent.array.map(document.cookie.split(/;\s*/),function(e){e=e.split("=");return t[e[0]]=e[1],null}),decodeURIComponent(t[e])||null},getCCP:function(){var e=this.get("usprivacy");if("undefined"!=e)return e}}),utils.$create("storage",{setExpireDate:function(e,t){var n=JSON.parse(localStorage.getItem(e));n.ed=t,localStorage.setItem(e,JSON.stringify(n))},passedExpireDate:function(e){try{var t=JSON.parse(localStorage.getItem(e)),n=(new Date).getTime();return!!(t&&t.ed<n)}catch(e){}}}),utils.$create("base64",{init:function(e){if(!this.reverseBase64Chars){this.reverseBase64Chars={};for(var t=0,n=this.base64Chars.length;t<n;t++)this.reverseBase64Chars[this.base64Chars[t]]=t}this.base64Str=e,this.base64Count=0},readBase64:function(){var e;return!this.base64Str||this.base64Count>=this.base64Str.length?this.EOI:(e=255&this.base64Str.charCodeAt(this.base64Count),this.base64Count++,e)},encodeBase64:function(e){this.init(e);for(var t="",n=new Array(3),o=0,i=!1;!i&&(n[0]=this.readBase64())!=this.EOI;)n[1]=this.readBase64(),n[2]=this.readBase64(),t+=this.base64Chars[n[0]>>2],n[1]!=this.EOI?(t+=this.base64Chars[n[0]<<4&48|n[1]>>4],n[2]!=this.EOI?t=(t+=this.base64Chars[n[1]<<2&60|n[2]>>6])+this.base64Chars[63&n[2]]:(t=t+this.base64Chars[n[1]<<2&60]+"=",i=!0)):(t=t+this.base64Chars[n[0]<<4&48]+"==",i=!0),76<=(o+=4)&&(t+="\n",o=0);return t},readReverseBase64:function(){if(!this.base64Str)return this.EOI;for(;;){if(this.base64Count>=this.base64Str.length)return this.EOI;var e=this.base64Str.charAt(this.base64Count);if(this.base64Count++,this.reverseBase64Chars[e])return this.reverseBase64Chars[e];if("A"==e)return 0}},ntos:function(e){return e="%"+(e=1==(e=e.toString(16)).length?"0"+e:e),unescape(e)},decodeBase64:function(e){this.init(e);for(var t="",n=new Array(4),o=!1;!o&&(n[0]=this.readReverseBase64())!=this.EOI&&(n[1]=this.readReverseBase64())!=this.EOI;)n[2]=this.readReverseBase64(),n[3]=this.readReverseBase64(),t+=this.ntos(n[0]<<2&255|n[1]>>4),n[2]!=this.EOI&&(t+=this.ntos(n[1]<<4&255|n[2]>>2),n[3]!=this.EOI)?t+=this.ntos(n[2]<<6&255|n[3]):o=!0;return t}},{EOI:-1,base64Chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),reverseBase64Chars:null,base64Str:"",base64Count:0}),utils.$create("dom",{createDOMFragment:function(e){var t,n,o,i,r=this.$root;if(e.tag){var s=e.tag.toLowerCase(),a=document.createElement(s);if("input"==s&&(a.type=e.type||"text"),e.id&&(a.id=e.id),e.cls&&(a.className=e.cls),e.style&&this.element.setStyle(a,e.style),e.attributes)for(t in e.attributes)a.setAttribute(t,e.attributes[t]);if("undefined"!=r.what(e.value)&&(a.value=e.value),"undefined"!=r.what(e.innerHTML)&&(a.innerHTML=e.innerHTML),e.events)for(t in e.events)r.event.dom.bind(a,{event:t,listener:e.events[t]})}else{if(!e.isTextNode||"undefined"==r.what(e.value))return null;a=document.createTextNode(e.value)}if(e.isChild&&(a=e.parent.appendChild(a)),e.tag&&e.children)for("array"!=r.what(e.children)&&(e.children=[e.children]),n=0,o=e.children.length;n<o;n++)i=e.children[n],r.utils.object.extend(i,{isChild:!0,parent:a}),this.createDOMFragment(i);else if(e.tag&&e.childNodes)for(n=0,o=e.childNodes.length;n<o;n++)a.appendChild(e.childNodes[n]);return!e.isChild&&e.parent&&(s="string"==r.what(e.parent)?this.element.$(e.parent):e.parent,e.overwrite&&(s.innerHTML=""),e.before?s.insertBefore(a,e.before):e.after?this.element.insertAfter(a,e.after):s.appendChild(a)),a},createIframe:function(e){var t=this.createDOMFragment(e);t.src=e.src,t.sandbox=e.sandbox},filterByClass:function(e,t,n){var o=$root.helpers;return this._filterByClass||(document.getElementsByClassName&&o.isNative(document.getElementsByClassName)?this._filterByClass=function(e,t,n){var o=(n&&n.getElementsByClassName?n:document).getElementsByClassName(e),i=[];t=t?t.toLowerCase():null;for(var r=0,s=o.length;r<s;r++)t&&o[r].tagName.toLowerCase()!=t||(i[i.length]=o[r]);return i}:document.evaluate&&o.isNative(document.evaluate)?this._filterByClass=function(e,t,n){t=t||"*",n=n||document;for(var o,i,r=e.split(" "),s="",e="http://www.w3.org/1999/xhtml",e=document.documentElement.namespaceURI===e?e:null,a=[],d=0,l=r.length;d<l;d++)s+="[contains(concat(' ', @class, ' '), ' "+r[d]+" ')]";try{o=document.evaluate(".//"+t+s,n,e,0,null)}catch(e){o=document.evaluate(".//"+t+s,n,null,0,null)}for(;i=o.iterateNext();)a[a.length]=i;return a}:this._filterByClass=function(e,t,n){t=t||"*",n=n||document;for(var o=e.split(" "),i=[],r="*"===t&&n.all?n.all:n.getElementsByTagName(t),s=[],a=0,d=o.length;a<d;a++)i[i.length]=new RegExp("(^|\\s)"+o[a]+"(\\s|$)");for(var l=0,c=r.length;l<c;l++){for(var u=r[l],h=!1,m=0,g=i.length;m<g&&(h=i[m].test(u.className));m++);h&&(s[s.length]=u)}return s}),this._filterByClass(e,t,n)},findWidestNode:function(){for(var e,t,n,o=document.body,i=this.$root,r=i.utils.dom,s=r.element,a=0,d=null,l=0,c=o.childNodes.length;l<c;l++)(e=o.childNodes[l]).nodeType==i.settings.nodeTypes.ELEMENT&&s.isVisible(e)&&(t=s.getActualWidth(e),n=s.getActualHeight(e),a<t)&&50<n&&(d={node:e,width:a=t,height:n});return d=d||{node:o,width:r.document.getWidth(),height:r.document.getHeight()}},isChild:function(e,t){return"function"==$root.what(e.contains)?e.contains(t):16==e.compareDocumentPosition(t)||void 0},getScale:function(e){var t=this.screenAvailDimensions.getWidth(),n=this.innerDimensions.getWidth();return e&&-1!=e?Math.min(t/e,1):n/t},innerDimensions:{getHeight:function(){var e="p"!=this.$root.browser.getDevice()?window.innerHeight:utils.dom.viewportFixed.getHeight();return e},getWidth:function(){var e="p"!=this.$root.browser.getDevice()?window.innerWidth:utils.dom.viewportFixed.getWidth();return e}},screenAvailDimensions:{getMultiplier:function(){var e=this.$root.browser.ua,t=-1!=e.indexOf("Android"),n=-1!=e.indexOf("AppleWebKit"),o=-1!=e.indexOf("Version"),i=-1!=e.indexOf("Safari"),r=-1!=e.indexOf("Mobile"),e=-1==e.indexOf("Chrome");return t&&n&&o&&(i||r)&&e&&window.devicePixelRatio||1},getHeight:function(){var e=_typeof(window.screen)==Screen?window.screen.availWidth:window.innerWidth,t=_typeof(window.screen)==Screen?window.screen.availHeight:window.innerHeight;return t<e?Math.max(t,e)/this.getMultiplier():Math.min(t,e)/this.getMultiplier()},getWidth:function(){var e=_typeof(window.screen)==Screen?window.screen.availWidth:window.innerWidth,t=_typeof(window.screen)==Screen?window.screen.availHeight:window.innerHeight;return t<e?Math.min(t,e)/this.getMultiplier():Math.max(t,e)/this.getMultiplier()}}}),utils.dom.$create("element",{$:function(e){return document.getElementById(e)},getActualWidth:function(e){var t=this.getStyle(e,"width"),n=parseInt(t,10);return!isNaN(n)&&0<n&&t.match(/px/)?n:e.clientWidth||e.offsetWidth},getActualHeight:function(e){var t=this.getStyle(e,"height"),n=parseInt(t,10);return!isNaN(n)&&0<n&&t.match(/px/)?n:e.clientHeight||e.offsetHeight},getStyle:function(e,t){var n=document.defaultView,n=e.currentStyle||(n&&n.getComputedStyle?n.getComputedStyle(e,null):null)||e.style;return t&&n?n[t]:n},getActualWidthFixed:function(e){var t=this.getStyleFixed(e,"width"),n=parseInt(t,10);return!isNaN(n)&&0<n&&t.match(/px/)?n:e.clientWidth||e.offsetWidth},getActualHeightFixed:function(e){var t=this.getStyleFixed(e,"height"),n=parseInt(t,10);return!isNaN(n)&&0<n&&t.match(/px/)?n:e.clientHeight||e.offsetHeight},getStyleFixed:function(e,t){var n=window,n=(n&&n.getComputedStyle?n.getComputedStyle(e,null):null)||e.currentStyle||e.style;return t&&n?n[t]:n},inHierarchy:function(e,t){do{if(e==t)return!0}while(e=e.parentNode);return!1},insertAfter:function(e,t){var n=t.parentNode;return t.nextSibling?n.insertBefore(e,t.nextSibling):n.appendChild(e)},isOnViewport:function(e,t){var n=this.$parent.viewport.getHeight(),o=this.offset(e).top,i=this.getActualHeight(e)+o,t=t||0;return!!this.isVisible(e)&&(i+t<n?100:o+t<n?(n-(o+t))/(i-o)*100:0)},isVisible:function(e){if(!e)return!1;for(;e&&e.tagName&&"body"!=e.tagName.toLowerCase();){var t=this.getStyle(e);if("none"==t.display||"hidden"==t.visibility)return!1;e=e.parentNode}return!0},offset:function(e,t){var n,o,i=0,r=0,s=this.$root,a=s.utils.dom,d=a.element,l=s.browser,s=document.body||document.documentElement,c="position",u="absolute",h="borderLeftWidth",m="borderTopWidth";if(e==(t=t||s))return{left:0,top:0};if(e.getBoundingClientRect&&!t)return n=e.getBoundingClientRect(),o=a.document.getScrollTop(),a=a.document.getScrollLeft(),{left:parseInt(n.left+a,10),top:parseInt(n.top+o,10)};for(var g,p,f=d.getStyle(e,c)==u,v=e;v&&v!=t;)i+=v.offsetLeft,r+=v.offsetTop,f||d.getStyle(v,c)!=u||(f=!0),l.Firefox&&(i+=g=parseInt(d.getStyle(v,h),10)||0,r+=p=parseInt(d.getStyle(v,m),10)||0,v!=e)&&"visible"!=d.getStyle(v,"overflow")&&(i+=g,r+=p),v=v.offsetParent;for(l.Safari&&f&&(i-=s.offsetLeft,r-=s.offsetTop),l.Firefox&&!f&&(i+=parseInt(d.getStyle(s,h),10)||0,r+=parseInt(d.getStyle(s,m),10)||0),v=e.parentNode;v&&v!=t;)l.Opera&&("tr"==v.tagName.toLowerCase()||"inline"==d.getStyle(v,"display"))||(i-=v.scrollLeft,r-=v.scrollTop),v=v.parentNode;a=d.getStyle(s);return t==s&&a.position==u&&a.left&&(i-=parseInt(a.left,10)||0),{left:parseInt(i,10),top:parseInt(r,10)}},setStyle:function(e,t){var n,o=this.$root.browser;if(!e)return null;for(n in t=t||{})null!=t[n]&&("opacity"!=n&&"cssFloat"!=n||!o.IE?e.style[n]=t[n]:("opacity"==n&&(e.style.filter="alpha(opacity="+Math.ceil(100*parseFloat(t[n]))+")"),"cssFloat"==n&&(e.style.styleFloat=t[n])));return e},getData:function(e,t){return e.dataset?e.dataset[t]:e.getAttribute("data-"+t)},setData:function(e,t,n){e.dataset?e.dataset[t]=n:e.setAttribute("data-"+t,n)},hasStyleTransformation:function(e){for(var t,n=this.$root.browser,o=n.Firefox?"MozTransform":n.Chrome||n.Safari?"WebkitTransform":n.IE?"zoom":n.Opera?"OTransform":null;e&&"html"!=e.tagName.toLowerCase();){if((t=this.getStyle(e)).transform&&"none"!=t.transform||o&&t[o]&&t[o]!=(n.IE?"normal":"none"))return!0;e=e.parentNode}return!1}}),utils.dom.$create("document",{getHeight:function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},getWidth:function(){var e=document,t="clientWidth";return Math.max(e.documentElement[t],e.body[t])||0},getScrollTop:function(){var e=document,t="scrollTop";return window.pageYOffset||e.documentElement[t]||e.body[t]||0},getScrollLeft:function(){var e=document,t="scrollLeft";return window.pageXOffset||e.documentElement[t]||e.body[t]||0}}),utils.dom.$create("viewport",{getHeight:function(){var e,t,n=this.$root;return"p"==n.browser.getDevice()?n.utils.dom.viewportFixed.getHeight():(e=(n=document).documentElement,t="clientHeight",window.innerHeight||e&&(e[t]||n.body[t])||0)},getWidth:function(){var e,t,n=this.$root;return"p"==n.browser.getDevice()?n.utils.dom.viewportFixed.getWidth():(e=(n=document).documentElement,t="clientWidth",window.innerWidth||e&&(e[t]||n.body[t])||0)}}),utils.dom.$create("viewportFixed",{getHeight:function(){var e=window,t=document,n=t.documentElement,t=t.getElementsByTagName("body")[0];n.clientHeight||e.innerHeight||t.clientHeight;return e.innerHeight&&n.clientHeight?Math.min(e.innerHeight,n.clientHeight):e.innerHeight||n.clientHeight||t.clientHeight},getWidth:function(){var e=window,t=document,n=t.documentElement,t=t.getElementsByTagName("body")[0];n.clientWidth||e.innerWidth||t.clientWidth;return e.innerWidth&&n.clientWidth?Math.min(e.innerWidth,n.clientWidth):e.innerWidth||n.clientWidth||t.clientWidth}}),utils.dom.$create("style",{getStylesheet:function(){var e,t,n=this.$root.settings;return n.stylesheet||(e=(e=document.getElementsByTagName("head")).length?e[0]:document.body,(t=document.createElement("style")).type="text/css",n.stylesheet=e.appendChild(t))},addRule:function(e,t){var n=this.getStylesheet();n.styleSheet&&n.styleSheet.addRule?n.styleSheet.addRule(e,t):n.sheet&&n.sheet.insertRule&&n.sheet.insertRule([e,"{",t,"}"].join(""),n.sheet.cssRules?n.sheet.cssRules.length:0)},addClass:function(e,t){var n=this.$root.utils.array,o=e.className.split(/\s+/);-1==n.indexOf(o,t)&&n.push(o,t),e.className=o.join(" ")},removeClass:function(e,t){var n=e.className.split(/\s+/);this.$root.utils.array.discard(n,t),e.className=n.join(" ")},buildHookUnderlineCSS:function(e,t,n){var o="border-bottom:",i="text-decoration:",r="none",s="underline",a=n?" !important;":";";switch(e){case"single":return[o,"0 ",r,a,i,s,a].join("");case"dotted":return[o,(this.$root.comm.settings.responses.impression.uw||1)+"px dotted ",t,a,i,r,a].join("");case"dashed":return[o,"1px dashed ",t,a,i,r,a].join("");case"none":return[o,"0 ",r,a,i,r,a].join("");default:return[o,(this.$root.comm.settings.responses.impression.uw||1)+"px solid ",t,a,i,s,a].join("")}},buildBorderRadius:function(e){var t=this.$root.what,n=document.body.style,e="border-radius:"+e+";";return"string"==t(n.borderRadius)?e:"string"==t(n.MozBorderRadius)?"-moz-"+e:"string"==t(n.WebkitBorderRadius)?"-webkit-"+e:""},buildBoxShadow:function(e){var t=this.$root,n=t.what,t=t.browser,o=document.body.style,e="box-shadow:"+e+";";return"string"==n(o.boxShadow)?e:"string"==n(o.MozBoxShadow)?"-moz-"+e:"string"!=n(o.WebkitBoxShadow)||t.Safari&&!parseFloat(533<=t.AppleWebKit)?"":"-webkit-"+e},buildTextShadow:function(e){var t=this.$root.what,n=document.body.style,e="text-shadow:"+e+";";return"string"==t(n.textShadow)?e:"string"==t(n.MozTextShadow)?"-moz-"+e:"string"==t(n.WebkitTextShadow)?"-webkit-"+e:""},buildGradient:function(e,t){var n,o=this.$root,i=o.browser,r=i.getName(),i=i.getVersion(!0),s=t?"":";",a={Firefox:{v:3.6,p:"-moz"},Chrome:{v:1,p:"-webkit"},IE:{v:10,p:"-ms"},Safari:{v:4,p:"-webkit"},Opera:{v:11.1,p:"-o"}};return e&&("string"==o.what(e)||!a[r]||i<a[r].v)?[t?"":"background-color:",e="array"==o.what(e)?e[1]:e,s].join(""):!e||"array"!=o.what(e)||e.length<3?"":(n="circle"==(o=e[0])?"radial":"linear",("Safari"==r&&i<5.1||"Chrome"==r&&i<10?"linear"==n?[t?"":"background-image:"," -webkit-gradient(linear, left top, right top, from(",e[1],"), to(",e[e.length-1],"))",s]:[t?"":"background-image:"," -webkit-gradient(radial, center center, 0, center center, 300, from(",e[1],"), to(",e[e.length-1],"))",s]:[t?"":"background-image:",a[r].p,"-",n,"-gradient(",o,",",e.slice(1).join(","),")",s]).join(""))},getCssProp:function(e,t){var n;return window.getComputedStyle&&document.defaultView.getComputedStyle(e,null)?n=parseInt(document.defaultView.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle&&(n=parseInt(e.currentStyle[t])),n},supports:function(e){var t=this.$root.what,n=document.body.style,o=this.$root.browser,i="string",r="Moz",s="Webkit",a=e.charAt(0).toUpperCase()+e.substr(1);switch(e){case"borderRadius":case"textShadow":return t(n[e])==i?e:t(n[r+a])==i?r+a:t(n[s+a])==i&&s+a;case"boxShadow":return t(n[e])==i?e:t(n[r+a])==i?r+a:!(t(n[s+a])!=i||o.Safari&&!parseFloat(533<=o.AppleWebKit))&&s+a;default:return!1}}}),utils.dom.$create("event",{disableEventBubbling:function(e,t){e.addEventListener?e.addEventListener(t,this.stop,!1):e.attachEvent&&e.attachEvent("on"+t,this.stop)},stop:function(e){e.cancelBubble=!0,e.returnValue=!1,e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}}),$root.$create("helpers",{getVar:function(e,t,n){var o=this.$root,i=o.settings.white_label,r="infolink",s="infolinks",a="undefined",d=this.$root.what,l=o.utils,o=o.utils.string,c=null;return r+="_",s+="_",(c=location.search&&o.toObject(location.search)?o.toObject(location.search)["il."+e]||null:c)||n||(n=o.toObject(l.cookie.get("il.params")))&&"undefined"!=n&&(c=n["il."+e]),c=c||(i&&d(window[i+"_"+e])!=a?window[i+"_"+e]:d(window[s+e])!=a?window[s+e]:d(window[r+e])!=a?window[r+e]:null),t&&(t[e]=c),c=this.isGSF()?window.infolinks_config[e]:c},setVar:function(e,t){var n=this.$root.settings.white_label,o="undefined",i=this.$root.what;i(t)!=o&&(window[(i(n)!=o?n:"infolinks_")+e]=t)},isGSF:function(){return!(!window.$sf||!window.$sf.ext||"function"!=typeof window.$sf.ext.status)},isTabActive:function(){return"visible"===document.visibilityState},initAlgoBehaviors:function(e,t){for(var n in t)e[n]||(e[n]=t[n])},buildImpPageMarginsParam:function(){var e=this.$root.settings.inFrameSettings,t=e.width,n=e.margins=this.getPageMargins(),o=this.$root.comm.settings.responses.gsd.wd,i=this.$root.utils.dom.viewport.getWidth();return o&&(o.offset&&(e.offset=parseInt(o.offset)),o.contentWidth&&-1<o.contentWidth&&(e.contentWidth=parseInt(o.contentWidth),e.contentWidth+2*t.wide<i?e.showW=!0:e.contentWidth+2*t.thin<i&&(e.showT=!0)),o.absPos)&&(e.absPos=o.absPos),[e.showW?"w":e.showT?"t":n.left>t.thin?n.left>t.wide?"w":"t":"",e.showW?"w":e.showT?"t":n.right>t.thin?n.right>t.wide?"w":"t":""].join("*").replace(/^\*$/,"")},getPageMargins:function(){var e,t=this.$root,n=t.settings.inFrameSettings,t=t.utils.dom,o=t.findWidestNode(),i={left:0,right:0};return o&&o.node!=document.body&&(e=t.element.offset(o.node),o=t.element.getActualWidth(o.node),t=t.document.getWidth(),i={left:e.left-n.buffer,right:t-o-e.left-2*n.buffer}),i},chanceIntegration:function(){var t,e=this.getVar("percentage");if(e&&(100<e?100:e<0?0:e)<100*Math.random()){try{t=this.searchForIntegrationComment(document.body)}catch(e){t=null}return t&&(e=t.data,"complete"==document.readyState||this.getVar("ddw")||document.write(e.substring(14,e.length))),this.$root.logger.log("Stopping on unlucky chance integration.",this.chanceIntegration),!0}return!1},searchForIntegrationComment:function(e){switch(e.nodeType){case 1:case 9:for(var t=0,n=e.childNodes.length;t<n;t++){var o=this.searchForIntegrationComment(e.childNodes[t]);if(o)return o}return null;case 8:return 15<e.data.length&&"IL_INTEGRATION"==e.data.substr(0,14)?e:null;default:return null}},IsCommentExist:function(e,t){switch(e.nodeType){case 1:case 9:for(var n=0,o=e.childNodes.length;n<o;n++){var i=this.IsCommentExist(e.childNodes[n],t);if(i)return i}return null;case 8:return-1!=e.data.indexOf(t)||null;default:return null}},isSupportedClient:function(){var e=this.$root,t=e.browser,e=e.settings.supportedClients[t.getName()];return e&&parseFloat(t.getVersion(!0))>=e},setHosts:function(){var e,t=this.$root,n="",o=t.settings,i=o.hosts,r=document.getElementsByTagName("script"),s=t.helpers.getVar("resources"),a=window.$iceboot?(o.boot=window.$iceboot,e=t.version=o.boot.version,/\/infolinks_main\.js$/):new RegExp("/"+$ice.versionFile+".js$");if(s)u=(s=s.replace(/^\w+:\/\//,"")).substring(0,s.indexOf("/")),n=s.substring(s.indexOf("/"))+"/";else for(var d=0,l=r.length;d<l;d++)if(null!=r[d].src.match(a)){var c,u=(c=r[d].src.replace(/^\w+:\/\//,"")).replace(/\/.*/,""),n=c.substring(c.indexOf("/"),c.lastIndexOf("/")+1);e||(c=n.split("/"),t.version=c[c.length-2]);break}u?i.resources=u:(i.resources=i.resourcesDefault,n=i.scriptDefaultPath),i.router=t.utils.string.toObject(location.search,"il.mt")||t.helpers.getVar("metro_server")||i.resources.replace(/\bresources\b/,"router"),i.thumbnails=i.resources.replace(/\bresources\b/,"thumbnails"),i.protocol=t.settings.protocol,e&&(n+=e),n&&"/"!=n.charAt(n.length-1)&&(n+="/"),-1!=(i.scriptPath=n).indexOf("/src/")&&(i.src=!0)},validateProtocol:function(e){var t=$root.utils;return e&&!t.string.parseURL(e).protocol?"http://"+e:e},getCustomerId:function(){var e=this.$root,t=e.helpers;e.settings.$extend({customerId:t.getVar("cid")||t.getVar("pid")||"null",websiteId:t.getVar("wsid")||0,dfpSlot:t.getVar("dfp_slot"),customerUrl:document.location.href})},setDefaultWebsiteDirectives:function(e){var t,n=this.$root,o={ht:!0,qmin:1,ha:null,hd:null};for(t in e.wd||(e.wd={}),o)"undefined"==n.what(e.wd[t])&&(e.wd[t]=o[t])},getReferrer:function(){var t=this.$root,e=document.referrer,n={ref:"",refq:""},o=t.utils,i=o.string,r=o.cookie.has("refc"),s=o.string.toObject(location.search,"il.sq"),a=o.base64.decodeBase64("Lmdvb2dsZS4="),d=o.base64.decodeBase64("d3d3Lmdvb2dsZS5jb20=");if(s)n={refq:decodeURIComponent(s),ref:d};else{if(e){if(-1!=e.indexOf(a)&&e.match(/\/cse/))return n;if(-1!=(s=e.indexOf("?"))){try{var l=i.toObject(e.substring(s+1))||{};n.refq=i.truncate(i.trim(decodeURIComponent((l.q||l.p||"").replace(/\+/g," "))),100,""),n.ref=e.substring(0,s)}catch(e){t.logger.error("Error reading referrer.",this.getReferrer)}"p"!=!t.browser.getDevice()||-1==e.indexOf(a)||!/\/(url|imgres|search|cse)/.test(e.substring(e.indexOf("/")))||l&&l.adurl||(n.ose=1)}else r||(n.ref=e);n.ref=i.truncate(n.ref.replace(/^\w+:\/\//,""),100,""),n.refq&&!r&&o.cookie.set("refc",o.object.toQueryString(n),60)}!n.refq&&r&&o.object.extend(n,i.toObject(o.cookie.get("refc")||"")),(s=t.helpers.getVar("search_query"))&&(n.refq=s,n.ose&&delete n.ose,n.ref||(n.ref=d))}return o.object.extend(t.settings,n),n},normalizeText:function(e){e=(e=e.replace(/\.|:|;|<|>|=|\?|\(|\)|\[|\]|\{|\}|,|"|\x201C|\x201D|\x96|\x97|\\|\//g,"|")).replace(/['`\-]\W/g,"|").replace(/\W['`\-]/g,"|");var t=new RegExp("\\s*\\|+\\s*","g"),n=new RegExp("\\|{2,}","g");return e=(e=e.replace(t,"|").replace(n,"|")).toLowerCase().replace(/\|/g,"P").replace(/\s/g,"S").replace(/\./g,"D").replace(/'/g,"Q").replace(/\$/g,"M").replace(/\+/g,"A")},countWords:function(e){var t=new RegExp("P|S","g"),e=e.match(t);return null!=e?e.length+1:0},getMetaContent:function(e,t){for(var n=document.getElementsByTagName("meta"),o=0,i=n.length;o<i;o++)if(n[o].name&&n[o].name.toLowerCase()==e&&n[o].content)return this.normalizeText(this.$root.utils.string.truncateToChar(n[o].content,1024*t," "));return""},getTagTexts:function(e,t,n){for(var o,i,r,s,a=this.$root,d=a.utils,l=d.string,c=d.array,u=[],h=!1,m=0,g=a.settings.textLimits.merged,p=0,f=0,v=(e="array"!=a.what(e)?[e]:e).length;f<v;f++){for(i=0,r=(o=document.getElementsByTagName(e[f])).length;i<r;i++)if(s="text"==t?o[i].textContent||o[i].innerText||"":"alt"==t?o[i].alt:""){if(p++,m+(s=l.truncateToChar(s,g[n].i," ")).length>1024*g[n].t||20<=p){h=!0;break}c.push(u,s),m+=s.length}if(h)break}return this.normalizeText(u.join("|"))},setNativeAppParams:function(e){var t=$root,n=t.settings,o=t.helpers;e?"object"==t.what(e)&&(n.nativeAppParams=this.secureInput(e)):(e=o.getVar("nativeAppParams"))&&"object"==t.what(e)&&(n.nativeAppParams=this.secureInput(e))},usePercentages:function(e){var t,n,o=$root.utils,i=0,r=[];for(n in e="string"==$root.what(e)?o.string.stringToObject(e):e)e[n]=parseFloat(e[n]),isNaN(e[n])?delete e[n]:i+=e[n];for(n in e){if(e[n]=parseFloat(e[n]),t=e[n]/i,r[n]=t,Math.random()<=r[n])return n;i-=e[n]}},secureInput:function(e){var t=$root.settings,n=0,o={};if($root.utils.object.size(e)>t.appParamLimits)for(var i in e){if(!(n<t.appParamLimits))break;o[i]=e[i],n++}else o=e;for(i in o)o[i].length>t.paramCharLimit&&delete o[i];return o},checkForAttrToRemove:function(e,t,n){var o=$root.utils,i=$root.settings,r=new Date;if(n.capExp||(n.capExp=365),r=new Date(r.setDate(r.getDate()+n.capExp)),n.prodvw&&(s=n.prodvw.split(","),this.removeAttrFromLocalStorage(s,"pv",r)),t)for(var s=t.split(","),a=o.object.size(i.fc),d=0;d<a;d++)s&&s[d]in i.fc&&delete i.fc[s[d]];e&&(s=e.split(","),this.removeAttrFromLocalStorage(s,"fc",r))},removeAttrFromCookie:function removeAttrFromCookie(attrToRemove,cname,expiration){var rt=$root,capCountObj,capCountObjSize,ut=rt.utils;if(ut.cookie.has(cname)&&attrToRemove){capCountObj=eval("("+ut.cookie.get(cname)+")");for(var capCountObj=this.handleOldFormat(capCountObj),capCountObjSize=ut.object.size(capCountObj),i=0;i<capCountObjSize;i++)attrToRemove&&attrToRemove[i]in capCountObj&&delete capCountObj[attrToRemove[i]];ut.cookie.set(cname,ut.object.stringify(capCountObj),expiration)}},removeAttrFromLocalStorage:function removeAttrFromLocalStorage(attrToRemove,itemName,expiration){var rt=$root,capCountObj,capCountObjSize,ut=rt.utils;if(null!=localStorage.getItem(itemName)&&attrToRemove){capCountObj=eval("("+localStorage.getItem(itemName)+")");for(var capCountObj=this.handleOldFormat(capCountObj),capCountObjSize=ut.object.size(capCountObj),i=0;i<capCountObjSize;i++)attrToRemove&&attrToRemove[i]in capCountObj&&delete capCountObj[attrToRemove[i]];localStorage.setItem(itemName,JSON.stringify(capCountObj)),ut.storage.setExpireDate(itemName,new Date(expiration))}},handleOldFormat:function(e){var t,n,o=Date.parse(e.expiration)-864e5,i=(new Date).getTime();for(n in i<o&&(o=i),e)-1==(t=String(e[n])).indexOf(":")&&(e[n]=t+":"+o);return e},saveIncToStorage:function(e,t){var n,o,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=$root,s=r.utils,a={},d=new Date,r=r.comm.settings.responses.impression;r.capExp||(r.capExp=1),d=new Date(d.setDate(d.getDate()+r.capExp)),s.storage.passedExpireDate(t)&&localStorage.removeItem(t),null!=localStorage.getItem(t)?((a=JSON.parse(localStorage.getItem(t))).ed,a[e]?i?(r=a[e].substring(a[e].lastIndexOf(":")+1),o=parseInt(a[e].split(/[::]/)),a[e]=++o+":"+r):a[e]++:(a[e]=i?"1:"+(new Date).getTime():1,n=a.ed),localStorage.setItem(t,JSON.stringify(a)),s.storage.setExpireDate(t,new Date(n))):(a[e]=i?"1:"+(new Date).getTime():1,localStorage.setItem(t,JSON.stringify(a)),s.storage.setExpireDate(t,d))},saveFcAndPvToStorage:function(e,t){var n=$root.helpers;n.saveForMsgCap(e,"fc",!0),n.saveForMsgCap(t,"pv",!1)},saveIncToCookie:function saveIncToCookie(value,csName){var rt=$root,ut=rt.utils,capCountObj={},date=new Date,count=[],expiration,imp=rt.comm.settings.responses.impression,itemExp;imp.capExp||(imp.capExp=365),expiration=new Date(date.setDate(date.getDate()+imp.capExp)),ut.cookie.has(csName)&&(capCountObj=eval("("+ut.cookie.get(csName)+")"),capCountObj=this.handleOldFormat(capCountObj),capCountObj[value])?(itemExp=capCountObj[value].substring(capCountObj[value].lastIndexOf(":")+1),count=parseInt(capCountObj[value].split(/[::]/)),count++,capCountObj[value]=count+":"+itemExp):capCountObj[value]="1:"+(new Date).getTime(),ut.cookie.set(csName,ut.object.stringify(capCountObj),expiration)},saveIncToVar:function(e,t){var n,o=$root.utils,i=$root.settings,r={},s=[];i[t]&&(r=i[t])[e]?(n=r[e].substring(r[e].lastIndexOf(":")+1),s=parseInt(r[e].split(/[::]/)),r[e]=++s+":"+n):r[e]="1:"+(new Date).getTime(),i[t]=r,s=o.object.join(r,"~"),i.msgvwimp=s},saveForMsgCap:function(e,t){try{var n=$root.helpers;"pv"!=t&&n.saveIncToVar(e,t),"fc"!=t&&"pv"!=t?n.saveIncToCookie(e,t):n.saveIncToStorage(e,t,!0)}catch(e){}},setViews:function setViews(csName,paramName){try{var rt=$root,ut=rt.utils,st=rt.settings,capCountStr,capCountObj,hp=rt.helpers;ut.cookie.has(csName)&&(capCountObj=eval("("+ut.cookie.get(csName)+")"),delete capCountObj.expiration,capCountStr=ut.object.join(capCountObj,"~"),st[paramName]=capCountStr),hp.supportsStorage()&&(ut.storage.passedExpireDate(csName)&&localStorage.removeItem(csName),null!=localStorage.getItem(csName))&&(capCountObj=JSON.parse(localStorage.getItem(csName)),delete capCountObj.ed,capCountStr=ut.object.join(capCountObj,"~"),st[paramName]=capCountStr)}catch(e){}},processImpressionResponse:function(e){var t,n=this.$root,o=n.helpers;if("object"!=n.what(e))return null;if(e.components){for(t in e.prs={},e.components)e.prs[t.charAt(0)]=e.components[t];delete e.components}return o.normalizeSentenceLists(e),e.messages&&o.findMaxBidCount(e),e},runInTag:function(){var e=this.$root,t=e.settings;e.comm.settings.responses.impression.prs.t=t.prs.t,e.event.fire("productRenderStatus",{prod:"t",status:"during"}),e.event.fire("initIntag")},findMaxBidCount:function(e){var t,n,o,i=0;for(t in e.prs)if(n=e.prs[t].messages)for(o in n)n[o].bdc>i&&(i=n[o].bdc);this.$root.settings.bdc=i},normalizeSentenceLists:function(e){var t,n=e.prs,o=this.$root.utils,i=o.object.keys(e.sentences).length;for(t in n)i&&1==n[t].sentences.length&&"ALL"==n[t].sentences[0]&&(n[t].sentences=o.array.range(0,i-1))},getCustomerBehavior:function(e){var t,n=this.$root,o={};function i(){return arguments[1].toUpperCase()}for(var r=n.utils.string.qw(e),s=0,a=r.length;s<a;s++)null!=(t=n.helpers.getVar(r[s]))&&(o[r[s].replace(/_(\w)/g,i)]=t);return o},getImpressionBehavior:function(){var e=this.$root,t=e.settings,n=e.utils.object,e=e.comm.settings.responses.impression.behavior_imp||{};n.renameProperty(e,"lc","linkColor"),n.renameProperty(e,"st","bubbleShowDelay"),n.renameProperty(e,"rw","adsReuseWindow"),n.renameProperty(e,"bd","bubbleDirection"),t.behavior.impression=e},renameBehaviorProperties:function(e){var t=this.$root.utils.object;return t.renameProperty(e,"hc","highlightCount"),t.renameProperty(e,"lc","linkColor"),t.renameProperty(e,"du","doubleUnderline"),t.renameProperty(e,"st","bubbleShowDelay"),t.renameProperty(e,"rw","adsReuseWindow"),t.renameProperty(e,"si","simanitIcon"),t.renameProperty(e,"bd","bubbleDirection"),t.renameProperty(e,"t","theme"),t.renameProperty(e,"ln","lines"),e},startCountDownTimer:function(e,t){var n,o=$root.settings,i=[],r=$root.utils,s=$root.utils.dom;o.countDownTimers[t]&&clearInterval(o.countDownTimers[t]),n=e/1e3,r.timer.start("mi_timer"),o.countDownTimers[t]=setInterval(function(){n--,i=s.filterByClass(t);for(var e=0;e<i.length;e++)i[e].innerHTML=n;0==n&&(r.timer.stop("mi_timer"),clearInterval(o.countDownTimers[t]))},1e3)},sanitize:function(e,t,n){var o,i=this.$root;for(o in e)if(n&&"undefined"==i.what(t[o]))delete e[o];else switch(t[o]){case"int":e[o]=parseInt(e[o],10)||0;break;case"bool":e[o]="false"!=e[o]&&!!e[o];break;case"color":e[o]=this.validateColorValue(e[o]||"");break;case"str":e[o]=e[o]&&e[o].toString?e[o].toString():e[o];break;case"array":e[o]="array"==i.what(e[o])?e[o]:[];break;case"node":e[o]=e[o]&&e[o].tagName?e[o]:null;break;case"function":e[o]="function"==i.what(e[o])?e[o]:null;break;default:"array"==i.what(t[o])&&-1==i.utils.array.indexOf(t[o],e[o])&&(e[o]=t[o][0])}return e},validateColorValue:function(e){for(var t=0,n=(e=e.split(/\s*,\s*/)).length,o=/^#?[0-9a-fA-F]{6}$/;t<n;t++)e[t]=e[t]&&null!=e[t].match(o)?"#"==e[t].charAt(0)?e[t]:"#"+e[t]:"#000000";return 1==e.length?e[0]:e},createBaseClasses:function(){var e=this.$root,t=e.utils.dom.style,e=e.settings.baseClass,n="margin:0;padding:0;border:0;outline:0;font:normal normal normal 13px trebuchet MS,Arial,sans-serif;vertical-align:baseline;background:transparent;list-style:none;text-decoration:none;text-align:left;float:none;position:static;";t.addRule("."+e,n),t.addRule("."+e+" *",n),t.addRule("a."+e+":hover","background-color:transparent !important;")},supportsStorage:function(){return"undefined"!=typeof Storage&&!!window.JSON&&!!window.JSON.parse},supportsSessionStorage:function(){try{var e=window.sessionStorage;return e.setItem("test","test"),e.removeItem("test"),!0}catch(e){return!1}},getVpfc:function(e,t){if(this.supportsSessionStorage()&&window.sessionStorage.getItem("vpfc")&&JSON.parse(window.sessionStorage.getItem("vpfc"))[e])return"u"===e&&t?JSON.parse(window.sessionStorage.getItem("vpfc"))[e][t]:JSON.parse(window.sessionStorage.getItem("vpfc"))[e]},getHookData:function(e){var t=this.$root.comm.settings.responses.getads;return t&&t[e]&&("nologo"==t[e].skin?(t[e].theme="nologo",t[e].skin="variant"):"cdtodg"==t[e].skin?(t[e].theme="cdtodg",t[e].skin="variant"):"yell"==t[e].skin&&(t[e].theme="yell",t[e].skin="variant")),t&&t[e]||null},setHookData:function(e,t){var n=this.$root.comm.settings.responses;n.getads||(n.getads={}),n.getads[e]=t},clearHookData:function(e){var t=this.$root.comm.settings.responses.getads;t&&t[e]&&(t[e]=null)},createHook:function(e,t,n,o,i,r,s,a,d){var l=this.$root,c=l.settings,i=i.settings.sentences,e={id:e,fontSize:o,node:n,parentNode:n?n.parentNode:null,rendered:!0,sentence:t,prod:r,type:s,hovered:!1,currentAdIndex:0,instance:d};return c.hooksMap[e.id]=e,i[t]||(i[t]={hooks:[],rendered:0}),l.utils.array.push(i[t].hooks,e),i[t].rendered++,a&&(e.bubble=l.utils.object.clone(l.bubble.settings.base),l.helpers.bindHookEvents(e)),e},getInplaceLid:function(e){var t=this.$root,n=window.googletag;if(n&&n.pubads&&n.pubads().getSlots&&0<n.pubads().getSlots().length)for(var o=window.googletag.pubads().getSlots(),i=0;i<o.length;i++)if(-1!=e.id.indexOf(o[i].getSlotId().getId()))return t.settings.getAdsProds.u+"_"+o[i].getSlotElementId()+"_"+e.width+"x"+e.height;return t.settings.getAdsProds.u+"_"+e.id+"_"+e.width+"x"+e.height},getIncubeLid:function(e){var t=this.$root,n=window.googletag;if(n&&n.pubads&&n.pubads().getSlots&&0<n.pubads().getSlots().length)for(var o=window.googletag.pubads().getSlots(),i=0;i<o.length;i++)if(-1!=e.id.indexOf(o[i].getSlotId().getId()))return t.settings.getAdsProds.k+"_"+o[i].getSlotElementId()+"_"+e.width+"x"+e.height;return t.settings.getAdsProds.k+"_"+e.id+"_"+e.width+"x"+e.height},getHookBehavior:function(e,t){return t||this.$root.products[this.$root.settings.hooksMap[e].type].settings.behavior.merged},bindHookEvents:function(e,t){var n=this.$root,o=n.event.dom,i=n.bubble,r=e.node,s={hookId:e.id},e=n.helpers.getHookBehavior(e.id),n=n.settings;o.bind(r,{event:"dblclick",listener:i.hookDblClick}),t&&e.mi&&-1==e.mi.indexOf(n.mobileIntext.old)?(s.isMobile=t,o.bind(r,{event:"touchend",data:s,listener:i.hookMouseover})):(o.bind(r,{event:"mouseenter",data:s,listener:i.hookMouseover}),o.bind(r,{event:"mouseleave",data:s,listener:i.hookMouseout}),o.bind(r,{event:"click",data:s,listener:i.hookClick}))},getHookSD:function(e,t){var n,o=this.$root,e=o.settings.hooksMap[e];return e?(n=(e.updater||o.comm.settings.responses).impression,t?o.utils.object.extend({sdata:e.sentence,scs:n.sentences[e.sentence]}):o.utils.object.extend({sdata:e.sentence,scs:n.sentences[e.sentence]},n.rauth)):{}},getAdByMidx:function(e,t){return this.$root.utils.array.find(e,function(e){return e.midx==t})},getSkinPath:function(e,t){var n=this.$root,o=n.utils.array,i=["/",n.settings.hosts.resources,"static","skins"];return e&&o.push(i,e,t,(-1==n.utils.array.indexOf(["intext","intag","inscreen"],t)?n.products[t]:n.bubble).skins[e].settings.rv),o.push(i,"").join("/")},initTheme:function(e,t,n){var o,i,r,s=this.$root,a=e.id,d=s.settings,l=s.helpers.getHookBehavior(a),a=s.helpers.getHookData(a),c=t.settings,u=s.utils.object,h=n||e.type,t=s.products[h].settings,n=c.themesets[h],s=a.themeset||l.themeset||null,n=s&&!d.themeset&&n[s]&&n[s].length?(d.themeset=s,d.theme=n[s][Math.floor(Math.random()*n[s].length)]):a.theme||d.theme||l.theme;if(t.theme=n,(a=c.themes[h].base).hpl=d.helpUrl,a.lgl=d.homeUrl,r=t.themes&&t.themes[h]&&t.themes[h].base?u.extend({},t.themes[h].base):{},u.extend(r,a),o=(c.themes[h][n]||{}).inherit)for(i=0;i<o.length;i++)u.extend(r,c.themes[h][o[i]]);return u.extend(r,c.themes[h][n]),t.themeAttributes=r,e.skin=l.skin,e.themeset=s,e.theme=t.theme,e.attributes=t.themeAttributes,e.attributes},setTailColor:function(e,t){switch(this.$root.what(e)){case"function":return e(t);case"string":return e;default:return"#000000"}},setAdThumbnail:function(e){"text"!=e.template||e.thumbURL||(e.thumbURL=["https://",this.$root.settings.hosts.thumbnails,"/thumbnail.jpg?domain=",e.displayedURL].join(""))},hitURL:function(e){var t=$root;"array"!=t.what(e)&&(e=[e]);for(var n=0;n<e.length;n++)t.utils.dom.createDOMFragment({tag:"img",parent:document.body,attributes:{src:e[n]},style:{display:"none",width:"1px",height:"1px"}})},renderCustomJS:function(e){for(var t,n=$root.utils,o=document.createElement("div"),i=e.split(";"),r=0;r<i.length;r++){o.innerHTML=n.base64.decodeBase64(i[r]);for(var s=o.getElementsByTagName("script"),a=0;a<s.length;a++)""!=s[a].src?this.addScriptSrc(s[a].src):((t=document.createElement("script")).innerHTML=s[a].innerHTML,document.body.appendChild(t))}},renderCustomCode:function(e,t,n){e.customCode&&"iframe"!=e.actualTemplate&&this.addCustomCodeToDOM(e.customCode,!0,n)},renderDoqCustomCode:function(e){this.addCustomCodeToDOM(e,!1)},addCustomCodeToDOM:function(e,t,n){var o,i=this.settings,r=($root.settings,$root.utils),s=r.dom,a=e.split(";"),d=document.createElement("div");for(d.setAttribute("id","IL_IFR_DIV"+i.iframeNum),t?s.element.insertAfter(d,n):document.body.appendChild(d),o=0;o<a.length;o++){var l=document.createElement("iframe");l.setAttribute("name","IL_IFR_FRAME"+i.iframeNum),l.style.display="none",d.appendChild(l),a[o]="<div>"+r.base64.decodeBase64(a[o])+"</div>",this.createExternalIframe(null,"IL_IFR_FRAME"+i.iframeNum,i.iframeNum,a[o],null),i.iframeNum++}},createExternalIframe:function(e,t,n,o,i){var r=$root,s="",a=window.location.href,d=new RegExp("[?&]il.frame(=([^&#]*)|&|#|$)"),l=document.getElementsByName(t)[0];if(e&&(s="<script>var style = document.createElement('style');style.type = 'text/css';style.innerHTML = 'body { margin: 0px !important}';document.getElementsByTagName('head')[0].appendChild(style);window.hookId='"+e.id+"'<\/script>",e.pixels)){"array"!=r.what(e.pixels)&&(e.pixels=[e.pixels]);for(var c=0;c<e.pixels.length;c++)s+="<img src="+e.pixels[c]+" style='display:none; width:1px; height:1px'>"}s+=o||!e?o:r.helpers.parseTokens(e,null,n),i?l.removeAttribute("sandbox"):l&&l.sandbox&&l.sandbox.remove?setTimeout(function(){l.sandbox.remove("allow-same-origin")},15):setTimeout(function(){l.sandbox=l.sandbox.replace("allow-same-origin","")},15),l.onload=function(e){var t=JSON.stringify({name:"IL_iceContent",content:s});return l.contentWindow.postMessage(t,"*"),!1},"complete"==document.readyState||"interactive"==document.readyState?d.exec(a)&&d.exec(a)[2]?l.src=d.exec(a)[2]:l.src="https://resources.infolinks.com/static/container-4.0.html":window.onload=function(){d.exec(a)&&d.exec(a)[2]?l.src=d.exec(a)[2]:l.src="https://resources.infolinks.com/static/container-4.0.html"}},createFriendlyIframe:function(e,t,n,o,i){var r=$root,s=document.getElementsByName(t)[0];e&&(s.contentWindow.$iceContent="<script>var style = document.createElement('style');style.type = 'text/css';style.innerHTML = 'body { margin: 0px !important}';document.getElementsByTagName('head')[0].appendChild(style);window.hookId='"+e.id+"'<\/script>"),s.contentWindow.$iceContent+=o||r.helpers.parseTokens(e,null,n),s.src='javascript:window["$iceContent"]',i?s.removeAttribute("sandbox"):s&&s.sandbox&&s.sandbox.remove?setTimeout(function(){s.sandbox.remove("allow-same-origin")},15):setTimeout(function(){s.sandbox=s.sandbox.replace("allow-same-origin","")},15)},createCustomCodeInAd:function(e){var t,n,o=$root.utils,i="";if(e.customCode&&"iframe"==e.actualTemplate){for(n=e.customCode.split(";"),t=0;t<n.length;t++)n[t]=o.base64.decodeBase64(n[t]),i+=" "+n[t];return i}return""},getPluginsChecksum:function(){var e,t,n,o,i,r=[];if(!navigator.plugins)return"";for(t=0,n=navigator.plugins.length;t<n;t++)for(e=navigator.plugins[t],r[r.length]=(e.description||e.name||"").charAt(0),o=0,i=e.length;o<i;o++)r[r.length]=(e[o].description||e[o].name||"").charAt(0);return r.join("").replace(/\s/g,"")},mapUnhoverableAreas:function(){var e=this.$root,t=e.settings,n=e.utils,o=n.dom.element,i=e.browser,e=document.getElementsByTagName("embed"),r=document.getElementsByTagName("object"),s=n.array.concat(e,r);t.unhoverableAreas=[];for(var a=0;a<s.length;a++)if(o.isVisible(s[a])){if("embed"==s[a].tagName.toLowerCase()){if("transparent"==(s[a].getAttribute("wmode")||"").toLowerCase())continue}else{for(var d=s[a].getElementsByTagName("param"),l=!1,c=0,u=d.length;c<u;c++)if("wmode"==d[c].name&&"transparent"==d[c].value.toLowerCase()){l=!0;break}if(l)continue}if("embed"==s[a].tagName.toLowerCase()&&"object"==s[a].parentNode.tagName.toLowerCase()){if(i.IE)continue;n.array.discard(s,s[a].parentNode)}var h,m=parseInt(s[a].width,10)||s[a].offsetWidth||0,g=parseInt(s[a].height,10)||s[a].offsetHeight||0;m&&g&&(h=o.offset(s[a]),n.array.push(t.unhoverableAreas,[h.left,h.top,h.left+m,h.top+g]))}},hasSpecialTags:function(e,t){return e=e.toLowerCase(),!("all"!=t&&"script"!=t||-1==e.indexOf("<scr")&&-1==e.indexOf("document.write"))||("all"==t||"iframe"==t)&&-1!=e.indexOf("<ifr")},addUniqeTag:function(e,t,n,o,i){var r={html:e,prodName:t,bdc:n,midx:o,emd:i},s=document.querySelectorAll("[data-"+t+"_"+n+"_"+o+"_"+i+"]");return(e=>{for(var t in e)if(e.hasOwnProperty(t)&&!e[t]&&0!=e[t])return!1;return!0})(r)&&0==s.length?"<div data-"+t+"_"+n+"_"+o+"_"+i+' style="display: none"></div>'+e:e},parseTokens:function(e,t,n){var o,i,r=this.$root,s=this.getHookData(e.id),a=r.helpers.getAdByMidx(s.ads,s.ads[n||e.currentAdIndex].midx),s=r.helpers;if(t=t||a.content,"html"==a.template||"external"==a.template){for(var d,l,c,u,h=/@start@.*?@end@/;null!=(d=t.match(h));)delete event.capara,-1!=(l=(l=d[0]).substring(7,l.length-5)).indexOf("|||")&&(c=l.split("|||"),event.capara=c[0],l=c[1]),c=r.comm.getRedirectUrl(e,l,"onWin",event),a.de&&(c="~encfrom~"+c+"~encto~"),t=t.replace(h,c);for(h=/@encode@.*?@encode@/;null!=(d=t.match(h));)u=encodeURIComponent(d[0].substring(8,d[0].length-8)),t=t.replace(h,u);for(;-1!=(o=t.indexOf("~encfrom~"));)i=t.indexOf("~encto~"),u=encodeURIComponent(t.substring(o+9,i)),t=t.substring(0,o)+u+t.substring(i+7);for(h=/@hookId@/;null!=(d=t.match(h));)t=t.replace(h,e.id);for(h=/@JSEnc@.*?@JSEncEnd@/;null!=(d=t.match(h));)d[0]=d[0].replace(/(['"])/g,"\\$1"),t=t.replace(h,d[0].substring(7,d[0].length-10))}return"javascript"==a.contentType&&(t=['<script type="text/javascript">',t,"<\/script>"].join("")),t+=s.createCustomCodeInAd(a)},setActualTemplate:function(e){return e.actualTemplate||(e.actualTemplate=e.echo||("html"==e.template||"external"==e.template)&&e.content&&this.hasSpecialTags(e.content,"script")?"iframe":e.contentUrl||"external"==e.template?"html":e.template)},getPlatform:function(){for(var e,t=this.$root,n=document.getElementsByName("generator"),o="undefined",i=0,r=n.length;i<r;i++)if(e=n[i].getAttribute("content")){if(-1<e.indexOf("WordPress"))return"wdp";if(-1<e.indexOf("Joomla"))return"jml";if(-1<e.indexOf("blogger"))return"bsp";if(-1<e.indexOf("vBulletin"))return"vbt";if(-1<e.indexOf("phpBB"))return"pbb";if(-1<e.indexOf("weebly"))return"wbl";if(-1<e.indexOf("tumblr"))return"tbr"}if(t.what(window.Drupal)!=o)return"drl";if(t.what(window.Joomla)!=o)return"jml";if(t.what(window.blogger)!=o)return"jml";if(t.what(window.blogger_blog_id)!=o)return"jml";if(t.utils.dom.filterByClass("contentpaneopen").length)return"jml";if(t.what(window.vBulletin)!=o)return"vbt";if(t.what(window.phpbb)!=o)return"pbb";if(t.what(window.positionWeeblyFooter)!=o)return"wbl";if(t.what(window.Tumblr)!=o)return"tbr";if(t.what(window.ipb)!=o)return"ipb";var s,a=document.getElementsByTagName("link");for(i=0,r=a.length;i<r;i++)if(s=a[i].getAttribute("href")){if(-1<s.indexOf("wp-content"))return"wdp";if(-1<s.indexOf("support-files"))return"sbi"}return""},createAdViewUrl:function(e){for(var t,n=this.$root,o=comm.settings.responses.gsd,i=n.utils,r=n.settings,s=e.params,a=n.settings.hooksMap[e.hookId],d=n.helpers.getHookData(a.id),l="undefined",c=[],u=[],h=n.utils.array.push,m=0;m<d.ads.length;m++)d.ads[m].dontShow||(h(c,d.ads[m].midx),h(u,a.bdc));e&&e.capara&&0<i.object.size(e.capara)&&(t=i.object.stringify(e.capara));l=i.object.clean(i.object.extend({rid:o.rid,bdc:n.what(s.bdc)!=l?s.bdc:u.join("~"),midx:n.what(s.midx)!=l?s.midx:null!=a.currentAdIndex?c[a.currentAdIndex]:c.join("~"),emd:n.what(s.emd)!=l?s.emd:d.ads[a.currentAdIndex].emd||"",rts:i.date.now(),trce:r.trce,prod_t:"unknown",jsv:n.version,ifip:n.settings.ifip||"",skin:a.skin,theme:a.theme,themeset:a.themeset,capara:t,cmpid:d.ads[a.currentAdIndex]?d.ads[a.currentAdIndex].campaignUuid:""},n.helpers.getHookSD(a.id),s,r.nativeAppParams));return this.createQueryString([o.rs,"/action/adview.htm"].join(""),l,"adViewed",e)},createQueryString:function(e,t,n,o){var i,r,s=$root,a=[];if("object"==s.what(t)){for(var d in t)s.utils.array.push(a,a.length||-1!=e.indexOf("?")?"&":"?",encodeURIComponent(d),"=",encodeURIComponent(t[d]));r=a.join("")}else"string"==s.what(t)&&(r=t);return r=s.settings.protocol+(e+=r),n&&(i=function(){"undefined"==s.what(o)?s.event.fire(n):s.event.fire(n,o)}),n&&i(),r},getPlatformVersion:function(e){var t;return(t=this.getVar("pv"))||"wdp"==e&&(t=(t=this.IsCommentExist(document.body,"Infolinks START"))&&this.IsCommentExist(document.body,"Infolinks END")&&"0.0.0"),t},setCaparaBubble:function(e,t){var n={},o=$root.settings;return o.useClParams.itl?n.hii=t.instanceIndex:n={},e.mi&&(n.mi=e.mi,-1!=e.mi.indexOf(o.mobileIntext.countDown))&&e.cd&&(n.cd=e.cd),n},transitionEndEventName:function(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(n.hasOwnProperty(e)&&void 0!==t.style[e])return n[e]},getSiteLanguage:function(){if(this.getSiteLanguage.lang)return this.getSiteLanguage.lang;var e,t,n,o,i="en",r=this.$root,s=document.getElementsByTagName("html")[0];if("en"==r.comm.settings.responses.impression.lang||"es"==r.comm.settings.responses.impression.lang)return this.getSiteLanguage.lang=r.comm.settings.responses.impression.lang;if(s=s.getAttribute("lang"),"undefined"!=r.what(s))s=s.toLowerCase(),/^es/.test(s)&&(i="es");else for(t=0,n=(e=document.getElementsByTagName("meta")).length;t<n;++t)if(o=e[t],/^Content-Language$/i.test(o.getAttribute("http-equiv")||"")&&/^es/i.test(o.getAttribute("content"))||/^language$/i.test(o.getAttribute("name")||"")&&/^Spanish/i.test(o.getAttribute("content")||""))return this.getSiteLanguage.lang=i="es";return this.getSiteLanguage.lang=i},translate:function(e,t){t=t||this.$root.settings.translations;return decodeURIComponent(t[e]?t[e][this.getSiteLanguage()]:e)},setKid:function(e,t){var n=this.getSiteLanguage();return this.$root.utils.VeST(e,{kid:this.$root.settings.kid[t]||"",langPath:"en"==n?"":n+"/"})},getEchoForm:function(e,t,n,o,i){var r=this.$root,s=r.settings,i=[r.settings.protocol,this.getVar("passbackurl")||s.hosts.router,"/echo.htm",i?"?hookId="+i:""].join("");return r.utils.VeST('<form <% if (formId){ %>id="<%= formId %>"\t<% } %> \t<% if (formCls){ %>class="<%= formCls %>"<% } %>\t method="post" action="<%= echo %>" target="<%= iframeName %>" accept-charset="utf-8" style="display:none;">\t<input type="hidden" name="echo" value="<%= content %>" />\t<input type="hidden" name="pid" value="<%= cid %>" />\t<input type="hidden" name="wsid" value="<%= wsid %>" />\t<input type="hidden" name="purl" value="<%= purl %>" />\t<input type="hidden" name="jsv" value="<%= jsv %>" /></form>\t\t',{echo:i,content:encodeURIComponent(e.split("").reverse().join("")),iframeName:t,formId:n,formCls:o,cid:s.customerId,wsid:s.websiteId,jsv:r.version,ifip:s.ifip,purl:s.customerUrl,nocache:r.utils.number.next("echo")})},dimObj:function(e,t,n){var o,i,r=$root,s=r.utils,a=r.comm.settings.responses.impression.prs,d=r.browser,l=s.dom,c=r.helpers.isSearchProduct(e),r=r.helpers.isTopProduct(e);t=t||0,n=n||{},d=d.getDevice(),e&&("t"==d?(o=n.width||l.screenAvailDimensions.getWidth(),i=n.height||l.screenAvailDimensions.getHeight(),(c||r)&&(o*=window.devicePixelRatio,i*=window.devicePixelRatio),a[e].behavior.tminh&&(this.mih=-1==a[e].behavior.tminh?-1:a[e].behavior.tminh*i-t),a[e].behavior.tmaxh&&(this.mah=-1==a[e].behavior.tmaxh?-1:a[e].behavior.tmaxh*i-t),a[e].behavior.tminw&&(this.miw=-1==a[e].behavior.tminw?-1:a[e].behavior.tminw*o-2),a[e].behavior.tmaxw&&(this.maw=-1==a[e].behavior.tmaxw?-1:a[e].behavior.tmaxw*o-2),"true"!=a[e].behavior.idd&&!0!==a[e].behavior.idd||(a[e].behavior.tminh&&(this.mih=parseFloat(a[e].behavior.tminh)),a[e].behavior.tmaxh&&(this.mah=parseFloat(a[e].behavior.tmaxh)),a[e].behavior.tminw&&(this.miw=parseFloat(a[e].behavior.tminw)),a[e].behavior.tmaxw&&(this.maw=parseFloat(a[e].behavior.tmaxw)))):"p"==d?(o=n.width||s.dom.viewport.getWidth(),i=n.height||s.dom.viewport.getHeight(),a[e].behavior.pminh&&(this.mih=-1==a[e].behavior.pminh?-1:a[e].behavior.pminh*i-t),a[e].behavior.pmaxh&&(this.mah=-1==a[e].behavior.pmaxh?-1:a[e].behavior.pmaxh*i-t),a[e].behavior.pminw&&(this.miw=-1==a[e].behavior.pminw?-1:a[e].behavior.pminw*o-2),a[e].behavior.pmaxw&&(this.maw=-1==a[e].behavior.pmaxw?-1:a[e].behavior.pmaxw*o-2),"true"!=a[e].behavior.idd&&!0!==a[e].behavior.idd||(a[e].behavior.pminh&&(this.mih=parseFloat(a[e].behavior.pminh)),a[e].behavior.pmaxh&&(this.mah=parseFloat(a[e].behavior.pmaxh)),a[e].behavior.pminw&&(this.miw=parseFloat(a[e].behavior.pminw)),a[e].behavior.pmaxw&&(this.maw=parseFloat(a[e].behavior.pmaxw)))):"m"==d&&(o=n.height||l.screenAvailDimensions.getWidth(),i=n.width||l.screenAvailDimensions.getHeight(),(c||r)&&(o*=window.devicePixelRatio,i*=window.devicePixelRatio),a[e].behavior.mminh&&(this.mih=-1==a[e].behavior.mminh?-1:a[e].behavior.mminh*i-t),a[e].behavior.mmaxh&&(this.mah=-1==a[e].behavior.mmaxh?-1:a[e].behavior.mmaxh*i-t),a[e].behavior.mminw&&(this.miw=-1==a[e].behavior.mminw?-1:a[e].behavior.mminw*o-2),a[e].behavior.mmaxw&&(this.maw=-1==a[e].behavior.mmaxw?-1:a[e].behavior.mmaxw*o-2),"true"!=a[e].behavior.idd&&!0!==a[e].behavior.idd||(a[e].behavior.mminh&&(this.mih=parseFloat(a[e].behavior.mminh)),a[e].behavior.mmaxh&&(this.mah=parseFloat(a[e].behavior.mmaxh)),a[e].behavior.mminw&&(this.miw=parseFloat(a[e].behavior.mminw)),a[e].behavior.mmaxw&&(this.maw=parseFloat(a[e].behavior.mmaxw)))))},getCustomScale:function(e,t,n){var o=0;return $root.browser.Firefox&&(o=.015),n&&-1!=n?Math.min(e/n-o,1):e/t-o},pad:function(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n},getTimeZone:function(){var e=$root.helpers,t=(new Date).getTimezoneOffset();return(t<0?"+":"-")+e.pad(parseInt(Math.abs(t/60)),2)+e.pad(Math.abs(t%60),2)},getFontsChecksum:function(){var e,t=this.$root,n=0,o=[],i=["Cambria","Cardo","Constantia","Crimson Text","Droid Serif","Georgia","IM Fell DW Pica","OFL Sorts Mill Goudy TT","Old Standard TT","Palatino Linotype","Times New Roman","Times","Vollkorn","Arial","Arial Black","Arial Narrow","Calibri","Cantarell","Candara","Corbel","Droid Sans","Helvetica","Impact","Josefin Sans Std Light","Microsoft Sans Serif","Molengo","Nobile","Tahoma","Trebuchet MS","Verdana","Yanone Kaffeesatz","Comic Sans MS","Lobster","Reenie Beanie","Tangerine","Andale Mono","Consolas","Courier","Courier New","Droid Sans Mono","Inconsolata","Lucida Console"],r=(t.browser.IE&&t.utils.dom.createDOMFragment({tag:"object",parent:document.body,id:"dlgHelper",attributes:{classid:"clsid:3050f819-98b5-11cf-bb82-00aa00bdce0b",width:"0px",height:"0px"}}),document.getElementById("dlgHelper"));if(r&&r.fonts)for(e=r.fonts.count,a=1;a<e+1;a++)o.push(r.fonts(a));else for(var s=new this.Detector,a=0;a<i.length;a++)s.detect(i[a])&&o.push(i[a]);for(a=0;a<o.length;a++)n+=o[a].charCodeAt(0)+o[a].charCodeAt(o[a].length/2)+o[a].charCodeAt(o[a].length-1);return n},Detector:function(){var e,i=["monospace","sans-serif","serif"],r=document.getElementsByTagName("body")[0],s=document.createElement("span"),a=(s.style.fontSize="72px",s.innerHTML="mmmmmmmmmmlli",{}),d={};for(e in i)s.style.fontFamily=i[e],r.appendChild(s),a[i[e]]=s.offsetWidth,d[i[e]]=s.offsetHeight,r.removeChild(s);this.detect=function(e){var t,n=!1;for(t in i){s.style.fontFamily=e+","+i[t],r.appendChild(s);var o=s.offsetWidth!=a[i[t]]||s.offsetHeight!=d[i[t]];r.removeChild(s),n=n||o}return n}},setNatural:function(e){for(var t,n=this.$root,o=function(e){t=e.domEvent,(t=t?t.target||t.srcElement:e).style.width&&t.style.height||(void 0===t.naturalWidth?((e=new Image).src=t.src,t.style.width=e.width+"px",t.style.height=e.height+"px"):(t.style.width=t.naturalWidth+"px",t.style.height=t.naturalHeight+"px"))},i=0;i<e.length;i++)e[i].complete?o(e[i]):n.event.dom.bind(e[i],{event:"load",listener:o})},findMaxZindex:function(){for(var e,t=0,n=this.$root.utils,o=document.getElementsByTagName("div"),i=document.getElementsByTagName("span"),r=document.getElementsByTagName("iframe"),s=n.array.concat(o,i,r),a=0,d=s.length;a<d;a++)s[a].style.zIndex&&0<s[a].style.zIndex&&parseInt(t)<parseInt(s[a].style.zIndex)&&(t=s[a].style.zIndex),(e=n.dom.style.getCssProp(s[a],"z-index"))&&0<e&&parseInt(t)<n.dom.style.getCssProp(s[a],"z-index")&&(t=n.dom.style.getCssProp(s[a],"z-index"));return t},getCookieSupport:function(){var e=!0;do{var t="gCStest="+Math.floor(1e8*Math.random());if(document.cookie=e?t+";expires=Tue, 01-Jan-2030 00:00:00 GMT":t,-1!==document.cookie.indexOf(t))return document.cookie=t+";expires=Sat, 01-Jan-2000 00:00:00 GMT",e}while(!(e=!e));return null},fixCorruptCookie:function fixCorruptCookie(cname){var rt=$root,ut=rt.utils,capCountObj,expiration,date=new Date,capExp=365,deletedCookie={},expiration=new Date(date.setDate(date.getDate()+capExp));if(ut.cookie.has(cname)){for(var attr in capCountObj=eval("("+ut.cookie.get(cname)+")"),capCountObj)capCountObj[attr]==capCountObj[attr]&&-1==capCountObj[attr].toString().indexOf("NaN")||(deletedCookie={deletedCookieContent:capCountObj},rt.event.fire("sendClientLog",{params:{capara:ut.object.stringify(deletedCookie)}}),delete capCountObj[attr]);ut.cookie.set(cname,ut.object.stringify(capCountObj),expiration)}},fixCorruptLocalStorageItem:function fixCorruptLocalStorageItem(itemName){var rt=$root,ut=rt.utils,capCountObj,expiration,date=new Date,capExp=365,deletedLocalStorageItem={},prodCodes=["a","b","c","d","e","f","h","i","k","n","o","s","t","u","x","z"],expiration=new Date(date.setDate(date.getDate()+capExp));if(null!=localStorage.getItem(itemName)){for(var attr in capCountObj=eval("("+localStorage.getItem(itemName)+")"),capCountObj)capCountObj[attr]==capCountObj[attr]&&capCountObj[attr]&&-1==capCountObj[attr].toString().indexOf("NaN")&&("fc"!==itemName||-1==prodCodes.indexOf(attr))||(deletedLocalStorageItem={deletedLocalStorageItem:capCountObj},delete capCountObj[attr]);localStorage.setItem(itemName,JSON.stringify(capCountObj)),ut.storage.setExpireDate(itemName,new Date(expiration))}},validLink:function(e){var t=e.href.indexOf("//"),n=window.location.href.indexOf("//");return-1==t?t=0:t+=2,-1==n?n=0:n+=2,t=e.href.substring(t,e.href.length),n=window.location.href.substring(n,window.location.href.length),-1==e.href.indexOf("javascript:void(0)")&&("#"!=t[t.length-1]||(t="/"==t[t.length-2]?t.substring(0,t.length-2):t.substring(0,t.length-1),"/"==(n="#"==n[n.length-1]?n.substring(0,n.length-1):n)[n.length-1]&&(n=n.substring(0,n.length-1)),0!=t.length&&t!=n))},collectLinks:function(e,t){for(var n=[],o=[],i=0,r=0,s=0;s<e.length;s++)this.validLink(e[s])&&(e[s].onclick?(o[i]=e[s],i++):(n[r]=e[s],r++));return t?o:n},containsJS:function(e){return-1<e.indexOf("javascript")},checkValidURL:function(e){e=e.match("^(\\w+)\\:.*");return!(e&&1<e.length)||"http"==e[1]||"https"==e[1]},whichTransitionEvent:function(e){var t,n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]},mapReduceLinks:function(e){for(var t,n=$root.utils,o={},i=0;i<e.length;i++)e[i].href&&this.checkValidURL(e[i].href)&&!this.containsJS(e[i].href)&&((t=n.string.parseURL(e[i].href).parent_domain)in o?o[t]++:o[t]=1);return o},navigate:function(e){window.location=e},isNative:function(e){if(-1<e.toString().indexOf("[native code]"))return!0},getScaleFactor:function(e){return-1==e&&(e=728),"portrait"==this.getScreenOrientation()?this.getScreenDimensions().width/Number(e):this.getScreenDimensions().height/Number(e)},getScreenOrientation:function(){return window.innerHeight>window.innerWidth?"portrait":"landscape"},getScreenDimensions:function(){return{width:Math.min(document.body.clientWidth||document.documentElement.clientWidth,window.innerWidth),height:Math.min(document.body.clientHeight||document.documentElement.clientHeight,window.innerHeight)}},makeContainer:function(e,t){var n;null===document.getElementById(e)&&((n=document.createElement("div")).id=e,n.setAttribute("style","position:fixed;width:100%;height:100%;left:0;right:0;bottom:0px;z-index:2147483646;pointer-events:none !important;"),document.body.insertBefore(n,document.body.childNodes[0]))},appendToContainer:function(e,t,n,o,i){var r=this.$root.helpers,e=document.getElementById(e),r=r.getWebkitTransformString(t,"left bottom");e.setAttribute("style","position:fixed;width:100%;left:0;right:0;bottom:0px;z-index:2147483646; "+r),e.appendChild(document.getElementById(i))},setDims:function(e,t){var n=this.$root,o=n.utils.dom;return e.heightOpen=90,"m"==n.browser.getDevice()?(e.heightOpen="text"===t?190:90,e.btnBtm=10,e.thumbWidth=160,e.thumbHeight=130,e.contentWidth=450,e.contentHeight=140,e.colBuffer=25,e.fontSize=26,e.heightClose=80,e.iconSize=47,e.logoWidth=70,e.logoHeight=70,o.innerDimensions.getHeight()<o.innerDimensions.getWidth()&&(e.thumbWidth=90,e.thumbHeight=65,e.heightOpen="text"==t?110:90,e.heightClose=50,e.colBuffer=25,e.fontSize=20,e.iconSize=27,e.logoWidth=30,e.logoHeight=30,e.btnBtm=5,e.btnfontSize=e.fontSize-5,e.btnpaddingwidth=8,e.btnpaddingheight=20,e.contentHeight=70)):"t"==n.browser.getDevice()&&(e.heightOpen="text"==t?110:90,e.btnBtm=25,e.thumbWidth=90,e.thumbHeight=65,e.contentWidth=400,e.contentHeight=67,e.colBuffer=25,e.fontSize=22,e.heightClose=50,e.iconSize=25,e.btnBtm=10,e.logoHeight=30,e.btnBtm=10,o.innerDimensions.getHeight()<o.innerDimensions.getWidth())&&(e.contentHeight=72),e},downScale:function(e,t,n,o,i){for(var r=document.getElementById(i).scrollWidth;(e.height*n*t>o||e.width*n*t>r)&&!(t<=0);)t-=.1;return t},setScaleCapping:function(e,t,n,o,i){var r=this.$root,i=r.comm.settings.responses.impression.prs[i].behavior,s=this.getScreenDimensions().height,a=this.getScreenDimensions().width<s,a={m:{heightCapKey:a?"mobilePortraitHeightCap":"mobileLandscapeHeightCap",defaultCapRatio:.5},t:{heightCapKey:a?"tabletPortraitHeightCap":"tabletLandscapeHeightCap",defaultCapRatio:.5}}[r.browser.getDevice()];if(!a)return null;"number"!=typeof i[a.heightCapKey]&&(i[a.heightCapKey]=Number(i[a.heightCapKey]),isNaN(i[a.heightCapKey]))&&(i[a.heightCapKey]=void 0);r=s*(i[a.heightCapKey]||a.defaultCapRatio)-n*o;return e.height*o*t>r?this.downScale(e,t,o,r,container_name):null},getWebkitTransformString:function(e,t){e=" -ms-transform: scale("+e+");  -moz-transform: scale("+e+");  -o-transform: scale("+e+");  -webkit-transform: scale("+e+"); "+(" -webkit-transform-origin: "+t+";  -o-transform-origin: "+t+";  -moz-transform-origin: "+t+";  -ms-transform-origin: "+t+"; "),t="";return" -webkit-perspective: 1000; "+(t="iPhone"==this.$root.browser.getOS()?"translateZ(0);backface-visibility: hidden;":t)+" "+e},enlargeTo:function(){return"-webkit-perspective: 1000;"},setHorizontalTransform:function(e,t){e.style.transform="translate("+t+"px,0)",e.style.transition="all 2s ease-in-out",e.style["-webkit-transition"]="all 1s ease-in-out",e.style["-o-transition"]="all 1s ease-in-out",e.style["-moz-transition"]="all 1s ease-in-out"},replaceTransform:function(e,t,n,o){n=n.match(t);null!=n&&n[0]?e.style[o]=n[0]:e.style[o]=""},animateMarginTop:function(e,t,n){e.style["margin-top"]=n+"px",e.style.transition="margin-top "+t+"ms ease-in-out",e.style["-webkit-transition"]="margin-top "+t+"ms ease-in-out",e.style["-o-transition"]="margin-top "+t+"ms ease-in-out",e.style["-moz-transition"]="margin-top "+t+"ms ease-in-out",e.style["-ms-transition"]="margin-top "+t+"ms ease-in-out"},setFadeTransform:function(e,t,n,o){if(e.style.opacity=n,0==o)return!0;e.style.transition="opacity "+t+"ms ease-in",e.style["-webkit-transition"]="opacity "+t+"ms ease-in-out",e.style["-o-transition"]="opacity "+t+"ms ease-in-out",e.style["-moz-transition"]="opacity "+t+"ms ease-in-out",e.style["-ms-transition"]="opacity "+t+"ms ease-in-out"},setVerticalTransform:function(e,t,n,o,i,r){i=void 0!==i?i:1;return-1===e.style.transform.indexOf("scale")&&(e.style["-ms-transform"]="",e.style["-webkit-transform"]="",e.style["-o-transform"]="",e.style["-moz-transform"]=""),o?(e.style["-ms-transform"]+=" translate(0,"+-n+"px)",e.style["-webkit-transform"]+=" translate(0,"+-n+"px)",e.style["-o-transform"]+=" translate(0,"+-n+"px)",e.style["-moz-transform"]+=" translate(0,"+-n+"px)",e.style["-webkit-transform"]+=" transform(0,"+-n+"px);",e.style["-o-transform"]+=" transform(0,"+-n+"px);",e.style["-moz-transform"]+=" transform(0,"+-n+"px);",e.style["-ms-transform"]+=" transform(0,"+-n+"px);"):(e.style.transform+=" translate(0,"+-n*i+"px)",e.style["-ms-transform"]+=" translate(0,"+-n*i+"px)",e.style["-webkit-transform"]+=" translate(0,"+-n*i+"px)",e.style["-o-transform"]+=" translate(0,"+-n*i+"px)",e.style["-moz-transform"]+=" translate(0,"+-n*i+"px)"),0!=r&&(e.style.transition="all, "+t+"ms ease-in-out",e.style["-webkit-transition"]="all, "+t+"ms ease-in-out",e.style["-o-transition"]="all, "+t+"ms ease-in-out",e.style["-moz-transition"]="all, "+t+"ms ease-in-out",e.style["-ms-transition"]="all, "+t+"ms ease-in-out"),!0},setDownAndTransformUp:function(e,t,n){!n||!t||t<=0||(e.style.transform="translateY("+t+"px)",setTimeout(function(){e.style.transform="translateY(0)",e.style.transition="transform "+(n||"1000")+"ms ease-in-out"},10))},isSearchProduct:function(e){return-1!="soxdp".indexOf(e)},isTopProduct:function(e){return-1!="h".indexOf(e)},inIframe:function(){try{return window.self!==window.top}catch(e){return"error"}},evalJSFromHtml:function evalJSFromHtml(html,noIframe){if(noIframe)for(var element=document.createElement("div"),scripts=(element.innerHTML=html,element.getElementsByTagName("script")),i=0;i<scripts.length;++i){var script=scripts[i];eval(script.innerHTML),""!=script.src&&this.addScriptSrc(script.src)}},findComment:function(e,t){if(-1!=(t.content?t.content.indexOf(["\x3c!--",e,"--\x3e"].join("")):-1))return!0},addScriptSrc:function(e){var t=document.createElement("script"),n=document.getElementsByTagName("body")[0];t.type="text/javascript",t.async=window.infolinks_async||t.async,t.defer=window.infolinks_ddw||t.defer,t.src=e,n.appendChild(t)},addScriptWithCallback:function(e,t){var n,o,i;e&&-1!==e.indexOf("http")&&(n=document.createElement("script"),o=!1,i=document.getElementsByTagName("head")[0],n.onload=n.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,t(),n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n))},n.setAttribute("type","text/javascript"),window.infolinks_async&&n.setAttribute("async",window.infolinks_async),window.infolinks_ddw&&n.setAttribute("type",window.infolinks_ddw),n.setAttribute("src",e),i.appendChild(n))},shouldBlock:function(){var e=$root.utils,t=window.location.href,e=e.string.parseURL(t);return-1!=e.domain.indexOf("googleusercontent.com")||-1!=e.domain.indexOf("google.co.in")||!!e.domain.match(/\d+\.\d+\.\d+\.\d+/)||-1!=e.protocol.indexOf("file")||void 0},enableScroll:function(e,t){t?($root.event.dom.unbind(e,"touchmove",this.disableTouchmove),$root.event.dom.unbind(e,"mousewheel",this.disableTouchmove),$root.event.dom.unbind(e,"DOMMouseScroll",this.disableTouchmove)):($root.event.dom.bind(e,{event:"touchmove",listener:this.disableTouchmove}),$root.event.dom.bind(e,{event:"mousewheel",listener:this.disableTouchmove}),$root.event.dom.bind(e,{event:"DOMMouseScroll",listener:this.disableTouchmove}))},disableTouchmove:function(e){this.$root.utils.dom.event.stop(e.domEvent)},moveAndHideElement:function(e,t){return e&&t?(this.removeAttr(e,"id"),this.removeAttr(e,"class"),this.removeAttr(e,"name"),this.$root.event.dom.unbindAll(e),e.setAttribute("style","display:none !important"),!1):e?(e.parentNode.removeChild(e),!0):void 0},removeAttr:function(e,t){if(e){1==e.nodeType&&e.removeAttribute(t);for(var n=0;n<e.childNodes.length;n++)1==e.childNodes[n].nodeType&&e.childNodes[n].removeAttribute(t),this.removeAttr(e.childNodes[n],t)}},removeBorders:function(e){e&&(e.style.borderLeft="",e.style.borderRight="",e.style.borderTop="")},settings:{iframeNum:0,postedForms:0}}),$root.$create("comm",{loadScript:function(e,t,o,i){var n,r,s,a=this,d=this.$root;if(e=this.getEncodedUrl(e,t),n=o?function(e){var t=a.$root,n=a.loadedScripts;if(n[e])return!0;n[e]=!0,"undefined"==t.what(i)?t.event.fire(o):t.event.fire(o,i)}:function(){a.loadedScripts[e]=!0},!this.loadedScripts[e])return this.loadedScripts[e]=!1,(r=document.createElement("script")).type="text/javascript",r.async=window.infolinks_async||r.async,r.defer=window.infolinks_ddw||r.defer,r.charset="UTF-8",r.onreadystatechange=function(){try{/complete|loaded/.test(this.readyState)&&!a.loadedScripts[e]&&n(e)}catch(e){d.loggly.errorLog(e,"_comm loadScript onreadystatechange unexpected error in handler for event 'onreadystatechange'")}},r.onload=function(){try{n(e)}catch(e){d.loggly.errorLog(e,"_comm loadScript onload unexpected error in handler for event 'onload'")}},r.src=e,s=(s=document.getElementsByTagName("head"))[0]||document.body,t&&t.hks&&JSON.parse(t.hks)[0]&&JSON.parse(t.hks)[0].lid&&(r.id="getAds_"+JSON.parse(t.hks)[0].lid),t&&"afterGSD"===t.evt&&(r.id=t.evt),r=s.appendChild(r),!0;n()},getMrcTrackingPixelUrl:function(e){var t=this.settings.responses.gsd,e=this.createClientLogParams({data:{params:e}});return this.getEncodedUrl([t.rs,"/action/dcl.htm"].join(""),e)},createClientLogParams:function(e){var t,n,o,i=this.$root,r=this.settings.responses.gsd,s=i.utils,a=i.settings,d=i.settings.hooksMap[e.data.params.hookId],l=e.data.params,c="undefined",u=[],h=[],m=i.utils.array.push;if(d){if((t=i.helpers.getHookData(d.id))&&t.ads)for(var g=0;g<t.ads.length;g++)t.ads[g].dontShow||(m(u,t.ads[g].midx),m(h,d.bdc));var p=s.object.clean(s.object.extend({emd:i.what(l.emd)!=c?l.emd:t&&t.ads&&t.ads[d.currentAdIndex]?t.ads[d.currentAdIndex].emd:"",rts:s.date.now(),jsv:i.version,skin:d.skin,theme:d.theme,themeset:d.themeset,cmpid:t&&t.ads&&t.ads[d.currentAdIndex]?t.ads[d.currentAdIndex].campaignUuid:""},a.nativeAppParams));s.object.extend(p,l),o=s.object.stringify(p),n=s.object.clean({rid:r.rid,prod_t:d.prod,ifip:i.settings.ifip||"",sdata:d.sentence,trce:a.trce,bdc:i.what(l.bdc)!=c?l.bdc:h.join("~"),midx:i.what(l.midx)!=c?l.midx:u.join("~"),capara:!0===l.customParams?s.object.stringify(l.capara):o})}else p=e.data.params,o=s.object.stringify(p),n=s.object.clean({rid:r.rid,ifip:i.settings.ifip||"",jsv:i.version,trce:a.trce,capara:o});return n},getEncodedUrl:function(e,t){var n=this.$root,o="",i=[];if(n.settings.protocol=n.settings.siteUrl.substr(0,n.settings.siteUrl.indexOf("://")+3),"object"==n.what(t)){for(var r in t)n.utils.array.push(i,i.length||-1!=e.indexOf("?")?"&":"?",encodeURIComponent(r),"=",encodeURIComponent(t[r]));o=i.join("")}else"string"==n.what(t)&&(o=t);return e=null==(e+=o).match(/^\w+:\/\//)?n.settings.protocol+e:e},supportsCORS:function(){var e=window.XMLHttpRequest?new XMLHttpRequest:null;return this.settings.cors=e&&"withCredentials"in e},sendMessage:function(e){var t=this.$root,n=t.utils.dom.element.$("iceCommFrame");n&&n.contentWindow?n.contentWindow.postMessage(e,"*"):t.logger.error("Could not get comm frame.",this.sendMessage)},receiveMessage:function receiveMessage(event){var de=event.domEvent,message=de.data,data,rt=this.$root,st=rt.settings,lg=rt.logger,hp=rt.helpers,frameName,frame,stopMessage,suspended,origin=(de.origin||de.domain).replace(rt.settings.protocol,""),suspended=hp.getVar("suspended");if("go"==message&&suspended){try{frameName=event.domEvent.source.name,frameName=frameName||event.domEvent.source.frames.frameElement.id,frame=document.getElementById(frameName),stopMessage="Stop",(frame||top).contentWindow.postMessage(stopMessage,"*")}catch(e){}hp.setVar("suspended",!1),rt.event.fire("beforeGSD")}else if(this.settings.responses.gsd&&0==origin.indexOf(this.settings.responses.gsd.rs)){"("==message.charAt(0)&&")"==message.charAt(message.length-1)&&(message=message.substring(1,message.length-1));try{data="undefined"!=rt.what(window.JSON)&&window.JSON.parse?window.JSON.parse(message):eval("("+message+")"),"afterImpression"==data.type&&(st.runScript=!1)}catch(ex){return void lg.error("Data parsing failed: "+ex.message+". message:"+message+" ",this.receiveMessage)}"error"==data.action?lg.error(data.data,this.receiveMessage):"event"==data.action?rt.event.fire(data.type,data.data):data.action||rt.event.fire("afterImpression",data)}},setAdsParams:function(e){var t,n,o=this.$root,i=o.settings,r=o.utils,s=o.helpers,a=o.comm.settings.responses.gsd,d=o.settings.impression.params,l=[],c=o.comm.settings.responses.impression.rauth,u=o.comm.settings,h=u.responses.impression.fpid,m={},g=s.getTimeZone(),p=e,f=s.getVar("advtq",null,!0),v=i.hooksMap[p.hookId];return v&&(t=p.hookId,v.bdc=++i.bdc,p.dim&&(m=p.dim,m=this.roundDimensions(m)),p.capara&&(r.object.size(p.capara)?0<r.object.size(p.capara)&&(n=r.object.stringify(p.capara),p.params=r.object.clean({capara:n})):delete p.capara),n=r.object.clean(r.object.extend({lid:t,bdc:v.bdc,prod_t:v.prod,miw:m.miw,maw:m.maw,mih:m.mih,garc:p.garc,mah:m.mah,vpfc:s.getVpfc(p.prod,t)},e.params||{},o.helpers.getHookSD(t,!0))),l[0]=n),r.object.clean(r.object.extend({hks:r.object.stringify(l),rid:a.rid,jsv:o.version,sr:[screen.availWidth,screen.availHeight].join("X"),rts:r.date.now(),cfv:o.comm.settings.flashVersion,ifip:i.ifip,fpid:h,ref:i.impression.params.ref,refq:i.impression.params.refq,trce:i.trce,ose:i.ose||"",cb:"getAdsResponse",os:d.os,ov:d.ov,br:d.br,bv:d.bv,dv:d.dv,ce:d.ce,advtq:f,purl:o.helpers.isGSF()?window.document.referrer:i.customerUrl,tzo:g,ls:o.comm.settings.ls,c:i.c,strg:i.strg,pitc:u.responses.impression.pitc||"",msgvwcoo:i.msgvwcoo||"",msgvwimp:i.msgvwimp||"",sua:i.sua},c,i.nativeAppParams,a.cks))},isGetAdProduct:function(e){var t=this.$root.settings;return e==t.getAdsProds.fl||e==t.getAdsProds.fr||e==t.getAdsProds.u||e==t.getAdsProds.k||e==t.getAdsProds.h||e==t.getAdsProds.s||e==t.getAdsProds.x||e==t.getAdsProds.o||e==t.getAdsProds.d||e==t.getAdsProds.e||e==t.getAdsProds.z||e==t.getAdsProds.b||!isNaN(e)},addSpecialGetAdsParams:function(e){for(var t in e)if(!this.isGetAdProduct(t))for(var n in e)this.isGetAdProduct(n)&&(e[n][t]=e[t]);return e},sendAjaxRequest:function(e){var t,n,i=this.$root,o=window.XMLHttpRequest?new XMLHttpRequest:null;if("object"!=i.what(e))return null;if(o&&"withCredentials"in o?t=o:window.XDomainRequest&&(n=new XDomainRequest),!t&&!n)return null;function r(e,t){var n;e.done||e.aborted||(n=e.xhr||e.xdr,e.done=!0,e.xdr||200==e.xhr.status?(e.onSuccess&&i.comm.handleAjaxResponse({action:"event",type:e.onSuccess,data:n.responseText}),t&&i.event.fire(t.event,t.data)):!e.xdr&&0==e.xhr.status||i.comm.handleAjaxResponse({action:"error",data:"Ajax request failed."}))}function s(){var e;a&&!a.done&&(e=a.xhr||a.xdr,a.aborted=!0,e.abort(),i.comm.handleAjaxResponse({action:"error",data:"Ajax request timed out."}),a.xhr)&&delete a.xhr.onreadystatechange}t?t.onreadystatechange=function(){try{a&&a.xhr&&4==a.xhr.readyState&&r(a,e.callback)}catch(e){i.loggly.errorLog(e,"_comm sendAjaxRequest onreadystatechange unexpected error in handler for event 'onreadystatechange'")}}:n.onload=function(){try{r(a,e.callback)}catch(e){i.loggly.errorLog(e,"_comm sendAjaxRequest onload unexpected error in handler for event 'onload'")}};var a=i.utils.object.extend({xhr:t,xdr:n,process:function(){var e=a.xhr||a.xdr,t=a.params||{},n=a.method||"GET",o=a.url||window.location.href;a.queryString=(a.queryString?a.queryString+"&":"")+i.utils.object.toQueryString(t,!0).substr(1),"GET"==a.method&&a.queryString&&(a.url+=(-1<a.url.indexOf("?")?"&":"?")+a.queryString),0<a.timeout&&setTimeout(s,a.timeout),a.xhr?a.xhr.open(n,o,!0):a.xdr.open(n,o),"POST"==n?(a.xhr&&"function"==i.what(a.xhr.setRequestHeader)&&a.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(a.queryString)):e.send()}},e);return a.process(),a},handleAjaxResponse:function handleAjaxResponse(response){var rt=this.$root,data;if("error"==response.action)rt.logger.error(response.data,this.handleAjaxResponse);else if("event"==response.action){try{data="undefined"!=rt.what(window.JSON)&&window.JSON.parse?window.JSON.parse(response.data):eval("("+response.data+")")}catch(ex){return void rt.logger.error("Data parsing failed: "+ex.message,this.handleAjaxResponse)}rt.event.fire(response.type,data)}},getRedirectUrl:function(e,t,n,o){var i,r=this.$root,s=r.settings,a=r.utils,d=a.object,l=r.helpers.getHookData(e.id),c=r.helpers.getAdByMidx(l.ads,l.ads[e.currentAdIndex].midx);if(c.noClickPrefix)return t||c.redirectURL;o&&o.capara&&(i=o.capara,"object"==r.what(i))&&(i=r.utils.object.stringify(i));o=a.date.now(),l=d.clean(d.extend({rid:this.settings.responses.gsd.rid,bdc:e.bdc,midx:e.midx||l.ads[e.currentAdIndex].midx,rts:o,vt:a.timer.poll("adView"+e.id),clk_t:n,jsv:r.version,prod_t:e.prod||"",tcln:e.tcln||"",trce:s.trce,pst:e.pst||"",cv:e.viewed?1:0,refq:s.impression.params.refq||"",ifip:s.ifip||"",cmpid:c.campaignUuid,capara:i},r.helpers.getHookSD(e.id)));return l.rurl=t||c.redirectURL||"",l.rurl=r.helpers.validateProtocol(l.rurl),[s.protocol,this.settings.responses.gsd.rs,"/action/clk.htm"].join("")+d.toQueryString(l,!0)},roundDimensions:function(e){return e.miw&&(e.miw=Math.floor(e.miw)),e.maw&&(e.maw=Math.ceil(e.maw)),e.mih&&(e.mih=Math.floor(e.mih)),e.mah&&(e.mah=Math.ceil(e.mah)),e}},{settings:{responses:{},errorReportingUrl:"http://cel.infolinks.com/",ls:"",products:{}},loadedScripts:{},pendingRequests:[]},!0)),shared=(comm.$create("flash",{getSwfUrl:function(){return["//",this.$root.settings.hosts.resources,"/flash/ic5.swf"].join("")},embed:function(){var e=this.$root,t=this.getSwfUrl();e.utils.timer.start("tmr_fsh"),e.utils.dom.createDOMFragment({tag:"div",parent:document.body,style:{display:"block",position:"absolute",top:"1px",left:"1px",width:"1px",height:"1px"},innerHTML:['<embed pluginspage="http://www.macromedia.com/go/getflashplayer" src="',t,'" width="1" height="1" wmode="transparent" name="ilfc" allowScriptAccess="always" type="application/x-shockwave-flash"></embed>'].join("")})},embedIE:function embedIE(options){var rt=this.$root,st=rt.settings,ut=rt.utils,swf=this.getSwfUrl(),id="ilfc"+rt.utils.number.next("flashEmbedConter"),flashVars=(this.requests[options.url]={request:ut.object.extend(options,{open:!1,complete:!1})},ut.object.toQueryString({url:options.url,method:options.method,success:options.onSuccess,error:options.onSuccess},!0).substr(1));options.params&&(flashVars+=["&",ut.object.toQueryString(options.params,!0).substr(1)].join("")),window[id+"_DoFSCommand"]=function(command,args){var response,func;try{func=eval(command),response=eval(decodeURIComponent(args))}catch(ex){return void rt.logger.error("Error evaluating response.",this)}func.call(func.$parent,response)},rt.utils.timer.start("tmr_fsh"),ut.dom.createDOMFragment({tag:"div",parent:document.body,style:{display:"block",position:"absolute",top:"1px",left:"1px",width:"1px",height:"1px"},innerHTML:['<object id="',id,'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" width="1" height="1" align="middle">','<param name="movie" value="',swf,'" />','<param name="quality" value="high" />','<param name="allowScriptAccess" value="always" />','<param name="wmode" value="transparent" />','<param name="flashvars" value="environment=IE&pcode=',st.impression.pcode,"&",flashVars,'" />',"</object>","<sc","ript event=FSCommand(command,args) for=",id,">\n ",id,"_DoFSCommand(command, args)</sc","ript>"].join("")}),this.flashLoadComplete()},flashLoadUpdate:function(e){this.flashLoadAmount=e},flashLoadComplete:function(){var e=this.$root;for(this.flashLoadAmount=10,this.flashElement=window["ilfc"+e.utils.number.get("flashEmbedConter")]||document.ilfc,e.utils.timer.stop("tmr_fsh");this.$parent.pendingRequests.length;)e.event.fire("sendImpression",e.comm.pendingRequests.shift())},sendURLRequest:function(e,t,n,o,i,r){this.requests[e]={request:{url:e,method:t,params:n,success:o,error:i,contextReferenceKey:r,open:!1,complete:!1}},this.flashElement.sendURLRequest(e,t,n,o,i,r)},requestOpenHandler:function(e){this.requests[e.url].request.open=!0},requestCompleteHandler:function requestCompleteHandler(response){var rt=this.$root,data,request=this.requests[response.url];if(request){if(request.request.complete=!0,request.response=response,response.success){var event=response.success;try{data=eval(response.data.replace(/^data=/,""))}catch(e){return void rt.logger.error("Error Evaluating Response.")}rt.event.fire(event,data)}}else rt.logger.error("Missing Request Object")},requestError:function(e){var t;(this.requests[e.url].response=e).error&&(t=e.error,this.$root.event.fire(t,e))},getFlashVersion:function(){var e=-1,t="Shockwave Flash",n=navigator.plugins,o=this.$root.browser;if(-1==(e=n&&n.length&&(n=n[t+" 2.0"]||n[t])?parseFloat(n.description.replace(/[a-z ]+([0-9\.]+)[a-z ]+/i,"$1.")):e)&&o.IE&&o.Windows){for(var i,r=[".9",".7",".6",".3",".3",""],s=[null,null,"WIN 6,0,21,0",null,"WIN 3,0,18,0","WIN 2,0,0,11"],a=0,d=r.length;a<d;a++){try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"+r[a]),e=s[a]||i.GetVariable("$version")}catch(e){}if(-1!=e)break}-1!=e&&(e=parseFloat(e.replace(/^[a-z ]+/i,"").replace(/,/g,".")))}return e}},{requests:{}},!1),comm.bind({event:"initComm",listener:{init:function(){var e=this.$root,t=this.settings,n=e.browser;t.initialized||(t.initialized=!0,t.flashVersion=this.flash.getFlashVersion(),e.comm.settings.listeningToMessages||e.event.dom.bind(window,{event:"message",listener:this.receiveMessage}),(n.iPhone||n.iPad)&&window.postMessage?t.mode="formsubmit":this.supportsCORS()?t.mode="cors":window.postMessage?(t.mode="messaging",t.messagingReady=!1,e.utils.dom.createDOMFragment({tag:"div",style:{display:"none"},parent:document.body,innerHTML:['<iframe id="iceCommFrame" src="',e.settings.protocol,t.responses.gsd.rs,'/comm2.htm" width="1" height="1" frameborder="0" scrolling="no"></iframe>'].join("")})):9<=t.flashVersion?(t.mode="flash",e.browser.IE||this.flash.embed()):(t.mode="unsupported",e.logger.error("Unsupported comm mode",this.init)))}}}),comm.bind({event:"sendImpression",listener:{sendImpression:function(e){var t,n,o,i=this.$root,r=i.browser,s=i.settings,a=this.settings,d=i.utils.array,l=e.data.options,c=e.data.beforeSend,u="function"==i.what(c);if(r.iPhone||r.iPad){var h,m,g=[];for(m in u&&c.call(i,"i"),l.params)d.push(g,{tag:"input",type:"hidden",attributes:{name:m},value:l.params[m]});(h=document.getElementById("IL_FORM_CONT"))&&h.parentNode.removeChild(h),i.utils.dom.createDOMFragment({tag:"div",parent:document.body,id:"IL_FORM_CONT",style:{display:"none"},children:[{tag:"form",id:"IL_FORM",children:g,attributes:{method:l.method,action:l.url,target:"IL_FRAME"}},{tag:"div",id:"IL_FRAME_CONT",innerHTML:'<iframe id="IL_FRAME" name="IL_FRAME" src="'+s.blankURL+'" width="1" height="1" frameborder="0" scrolling="no"></iframe>'}]})&&document.getElementById("IL_FORM").submit()}else if("cors"==a.mode)u&&c.call(i,"a"),this.sendAjaxRequest(l);else if("messaging"==a.mode)a.messagingReady?(u&&c.call(i,"a"),h=i.utils.object.stringify({action:"ajax",data:l}),this.sendMessage(h)):i.utils.array.push(this.pendingRequests,e.data);else if("flash"==a.mode)r.IE?(u&&c.call(i,"f"),this.flash.embedIE(l)):10==this.flash.flashLoadAmount&&this.flash.flashElement?(u&&c.call(i,"f"),this.flash.sendURLRequest(l.url,l.method,l.params,l.onSuccess,l.onSuccess,1)):i.utils.array.push(this.pendingRequests,e.data);else{for(u&&c.call(i,"s"),s=l.params.ptxt,(t=i.utils.string.qw("ptxt plinks pimgs phdrs pdesc page_keyw ptitle")).length,n=0,o=t.length;n<o;n++)l.params[t[n]]="";i.utils.object.clean(l.params),h=i.utils.object.toQueryString(l.params).length+l.url.length+document.location.href.length+navigator.userAgent.length+document.cookie.length+400,(a={IE:2048,Other:8192}[r.IE?"IE":"Other"]-h)<0?i.logger.error("Request too long for GET.",this.sendImpression):(l.params.ptxt=0<a?s.substring(0,a):"",l.params.twnum=i.helpers.countWords(l.params.ptxt),this.loadScript(l.url,l.params))}}}}),comm.bind({event:"callGetAds",listener:{callGetAds:function(e){var t,n=this.$root,o={},i=n.settings,r=e.data.hookId,s=n.comm.settings.responses.gsd,a=n.utils;for(t in n.helpers.getHookData(r)||n.helpers.setHookData(r,"pending"),o=this.setAdsParams(e.data),a.cookie.getCCP()&&(o.usprivacy=a.cookie.getCCP()),"undefined"!=n.what(window.x1)&&"undefined"!=n.what(window.x2)&&(o[window.x1]=window.x2),localStorage.getItem("intentiq-apn")&&(o["intentiq-apn"]=localStorage.getItem("intentiq-apn")),i.il_ls)o[t]=i.il_ls[t];o.hbnr=!!n.settings.pbIceLoaded,o.msgvwcoo&&delete o.msgvwcoo,o.msgvwimp&&delete o.msgvwimp,n.comm.loadScript(s.rs+"/action/getads.htm",o)}}}),comm.bind({event:"getAdsResponse",listener:{getAdsResponse:function(e){var t,n,o=this.$root,i=o.settings,r=o.helpers,s=o.comm.settings.responses.impression,a=o.comm.settings;for(t in e.data=this.addSpecialGetAdsParams(e.data),r.checkForAttrToRemove(e.data.msgvwcoo,e.data.msgvwimp,s),e.data){if(!isNaN(t))return void o.event.fire("getadsResponseBubble",e.data[t]);if(-1!=t.indexOf(i.getAdsProds.u))o.event.fire("getadsResponseInplace",e.data[t]);else if(-1!=t.indexOf(i.getAdsProds.k))o.event.fire("getadsResponseIncube",e.data[t]);else switch(t.replace(/[0-9]/g,"")){case i.getAdsProds.z:case i.getAdsProds.b:case i.getAdsProds.e:o.event.fire("getadsResponseBubble",e.data[t]);break;case i.getAdsProds.h:a.isInscreenE?(a.intopData=e.data[t],a.getadsResponseIntopPending=!0):(a.getadsResponseIntopPending=!1,o.event.fire("getadsResponseIntop",e.data[t]));break;case i.getAdsProds.s:case i.getAdsProds.x:case i.getAdsProds.o:case i.getAdsProds.d:a.isInscreenE?(a.insearchData=e.data[t],a.getadsResponseInsearchPending=!0):(a.getadsResponseInsearchPending=!1,o.event.fire("getadsResponseInsearch",e.data[t]));break;case i.getAdsProds.c:case i.getAdsProds.n:case i.getAdsProds.a:e.data[t].prod=i.inContentProducts[t.replace(/[0-9]/g,"")],o.event.fire("getadsResponseIncontent",e.data[t]);break;case i.getAdsProds.fl:case i.getAdsProds.fr:o.event.fire("getadsResponseInframe",e.data[t])}e.data[t].lid&&(n=document.getElementById("getAds_"+e.data[t].lid))&&n.parentElement.removeChild(n)}}}}),comm.bind({event:"setVpfc",listener:{setVpfc:function(e){var t,n,o;this.$root.helpers.supportsSessionStorage()&&(t=window.sessionStorage,n=JSON.parse(t.getItem("vpfc"))||{},"u"==(o=e.data.prod)?(e=e.data.id,n[o]=n[o]||{},n[o][e]=n[o][e]?parseInt(n[o][e])+1:1):n[o]=n[o]?parseInt(n[o])+1:1,t.setItem("vpfc",JSON.stringify(n)))}}}),comm.bind({event:"sendAdView",listener:{sendAdView:function(e){for(var t,n=this.$root,o=this.settings.responses.gsd,i=n.utils,r=n.settings,s=e.data.params,a=n.settings.hooksMap[e.data.hookId],d=n.helpers.getHookData(a.id),l="undefined",c=[],u=[],h=n.utils.array.push,m=0;m<d.ads.length;m++)d.ads[m].dontShow||(h(c,d.ads[m].midx),h(u,a.bdc));e&&e.data&&e.data.capara&&0<i.object.size(e.data.capara)&&(t=i.object.stringify(e.data.capara));e=i.object.clean(i.object.extend({rid:o.rid,bdc:n.what(s.bdc)!=l?s.bdc:u.join("~"),midx:n.what(s.midx)!=l?s.midx:c.join("~"),emd:n.what(s.emd)!=l?s.emd:d.ads[a.currentAdIndex].emd||"",rts:i.date.now(),trce:r.trce,prod_t:"unknown",jsv:n.version,ifip:n.settings.ifip||"",skin:a.skin,theme:a.theme,themeset:a.themeset,capara:t,cmpid:d.ads[a.currentAdIndex]?d.ads[a.currentAdIndex].campaignUuid:""},n.helpers.getHookSD(a.id),s,r.nativeAppParams)),o=n.helpers.createAdViewUrl({hookId:a.id,params:e});this.sendAjaxRequest({url:o})}}}),comm.bind({event:"sendClientLog",listener:{sendClientLog:function(e){var t=this.settings.responses.gsd,e=this.createClientLogParams(e);this.loadScript([t.rs,"/action/dcl.htm"].join(""),e)}}}),comm.bind({event:"adViewed",listener:{adViewed:function(e){this.$root.settings.hooksMap[e.data.hookId].viewed=!0}}}),comm.bind({event:"doRedirect",listener:{doRedirect:function(e){var t=e.data,n=this.$root,o=n.settings,i=n.browser,r=n.utils,s=t.hook,a=n.helpers.getHookBehavior(s.id,e.data.behavior).adsReuseWindow;if("k"===s.prod){if("complete"===s.clickStatus[e.data.side])return}else if("complete"==o.clickStatus)return;t.maxLength||(t.maxLength=i.IE?2048:8192);var d=n.helpers.getHookData(s.id),d=t.url||n.helpers.getAdByMidx(d.ads,d.ads[s.currentAdIndex].midx).redirectURL,l=(n.event.fire(s.type+"HookMouseout",{hookId:s.id}),s.node&&s.node.id||t.cleanHookID);if("k"===s.prod?s.clickStatus[e.data.side]="complete":o.clickStatus="complete",a||s.bubble&&n.event.fire("hideBubble",{hookId:s.id}),s=null,d.length<t.maxLength){e=l;try{e=o.adWin.name}catch(e){}if(t.cleanHookID&&(e=t.cleanHookID),i.IE&&i.getVersion(!0)<9){s=n.utils.dom.createDOMFragment({tag:"a",parent:document.body,attributes:{href:d},style:{display:"none"}});!a&&o.adWin&&e==l&&(s.target=e),s.click()}else if(!a&&o.adWin&&e==l)try{o.adWin.location=d}catch(e){window.location=d,o.adWin.close(),o.adWin=null}else window.location=d}else{var t=d,c=null,i=d.indexOf("?");if(-1!=i){var u,t=d.substring(0,i),h=r.string.toObject(d.substring(i+1),null,!0),c=[];for(u in h)r.array.push(c,{tag:"input",type:"hidden",value:h[u],attributes:{name:u}})}r.dom.createDOMFragment({tag:"form",parent:document.body,style:{display:"none"},children:c,attributes:r.object.extend({action:t,method:"post"},a?{}:{target:l})}).submit()}}}}),comm.bind({event:"productClick",listener:{productClick:function(e){var t,n=this.$root,o=n.settings,i=e.data.hookId,r=o.hooksMap[i],s=n.helpers,a=n.helpers.getHookData(i),d=e.data.clickType||r.clickType,l=e.data.cleanHookID,s=s.getHookBehavior(i,e.data.behavior),c=n.utils;if("k"===r.prod){if(t=e.data.side,r.clickStatus&&r.clickStatus[t]&&"complete"===r.clickStatus[t])return void("false"!==s.rmc&&n.event.fire("sendClientLog",{params:{hookId:i,misclickProd:(new Date).getTime()}}));r.clickStatus[t]="pending"}else if("complete"==o.clickStatus)return void("false"!==s.rmc&&n.event.fire("sendClientLog",{params:{hookId:i,misclickProd:(new Date).getTime()}}));("onLink"==d||"onLinkAfterWinOpen"==d)&&a&&a.ads&&a.ads[r.currentAdIndex]&&!a.ads[r.currentAdIndex].redirectURL?(o.clickStatus="none",o.adWin&&(n.event.fire("hideBubble",{hookId:i}),o.adWin.close(),o.adWin=null)):(a=this.getRedirectUrl(r,e.data.url||null,d,e.data),s.mi&&-1==s.mi.indexOf(o.mobileIntext.old)?(n.event.fire("sendClientLog",{params:{hookId:r.id,clickLocation:e.data.clickLocation,timeUntilClick:c.timer.poll("mi_timer")}}),"onWin"==d&&n.event.fire("startClick",{url:a,hook:r,cleanHookID:l,side:t||null})):(n.helpers.getHookBehavior(r.id,e.data.behavior).adsReuseWindow?setTimeout(function(){n.event.fire("sendClientLog",{params:{hookId:r.id,noLoadEvent:!0}})},3e3):o.adWin=window.open("",r.node?r.node.id:l),n.event.fire("startClick",{url:a,hook:r,cleanHookID:l,behavior:e.data.behavior||null,side:t||null})))}}}),comm.bind({event:"startClick",listener:{updateClickCookie:function(e){var t=this.$root,n=t.settings,o=t.utils,i=o.object,r=t.utils.date.now(),s=e.data.hook,a=t.helpers.getHookData(s.id),d=t.helpers.getAdByMidx(a.ads,a.ads[s.currentAdIndex].midx),a=s.midx||a.ads[s.currentAdIndex].midx,i=i.clean(i.extend({rid:this.settings.responses.gsd.rid,bdc:s.bdc,midx:a,emd:d.emd||"",rts:r,vt:o.timer.poll("adView"+s.id),clk_t:s.clickType,jsv:t.version,prod_t:s.prod||"",tcln:s.tcln||"",pst:s.pst||"",trce:n.trce,ifip:n.ifip||""},t.helpers.getHookSD(s.id))),a={method:"GET",callback:{event:"doRedirect",data:e.data},url:[t.settings.protocol,this.settings.responses.gsd.rs,"/",r,"/ck.js?",encodeURIComponent(JSON.stringify(i))].join("")};this.sendAjaxRequest(a)}}}),comm.bind({event:"commRemoteReady",listener:{commRemoteReady:function(){for(this.settings.messagingReady=!0;this.pendingRequests.length;)this.$root.event.fire("sendImpression",this.pendingRequests.shift())}}}),comm.bind({event:"sendErrorReport",listener:{sendErrorReport:function(e){var t=this.$root,n=t.settings,o=t.comm.settings.responses.gsd,i=null,r=null;e.data.cbdata&&(i=e.data.cbdata.evt,r=e.data.cbdata.data,delete e.data.cbdata),this.loadScript(this.settings.errorReportingUrl,t.utils.object.extend({pid:n.customerId,wsid:n.websiteId,jsv:t.version,trce:n.trce,rid:o?o.rid:""},e.data||{}),i,r)}}}),$root.$create("settings",{},{supportedClients:{IE:6,Edge:12,Firefox:1.5,Safari:3,MobileSafari:1,Opera:10,Chrome:1,AppleWebKit:533,ucweb:2},hosts:{resourcesDefault:"resources.infolinks.com",scriptDefaultPath:"/js/"},productCodes:{i:"intext",t:"intag",s:"insearch",f:"inframe",e:"inscreen",c:"incontent",n:"inrecommend",a:"inarticle",h:"intop",u:"inplace",K:"incube"},singleGetAdsProds:{},getAdsProds:{fl:"IL_IF_LEFT",fr:"IL_IF_RIGHT",c:"IL_IN_CONTENT",n:"IL_IN_RECOMMEND",a:"IL_IN_ARTICLE",u:"u_IL_INPLACE",k:"k_IL_INCUBE",h:"h_IL_INTOP",s:"s_IL_INSEARCH",x:"x_IL_INSEARCH",o:"o_IL_INSEARCH",d:"d_IL_INSEARCH",e:"IL_INSCREEN_e",b:"IL_INSCREEN_b",z:"IL_INSCREEN_z"},inContentProducts:{IL_IN_CONTENT:"c",IL_IN_RECOMMEND:"n",IL_IN_ARTICLE:"a"},nodeTypes:{ELEMENT:1,DOCUMENT:9,TEXT:3,COMMENT:8},baseZIndex:1e10,bdc:0,behavior:{def:{linkColor:"009900",bubbleShowDelay:200,bubbleHideDelay:1e3,adsReuseWindow:!0,hoverRequestDelay:20},sanitizer:{linkColor:"color",linkHoverColor:"color",linkHoverBgColor:"color",bubbleShowDelay:"int",bubbleHideDelay:"int",adsReuseWindow:"bool",hoverRequestDelay:"int"}},hooksMap:{},hooksCount:0,baseClass:"IL_BASE",clickStatus:"none",defaultLabel:"infolinks",defaultHomeUrl:"http://www.infolinks.com/<%= langPath %>?kid=<%=kid%>&trackerid=101",defaultHelpUrl:"http://www.infolinks.com/<%= lang %>learn-more-about-infolinks/?pid=<%= cid %>&wsid=<%= wsid %>",white_labelLoaded:!1,kid:{i:"TX",t:"TG",s:"SR",x:"XS",o:"OS",f:"FR",e:"ISE",z:"ISZ",b:"ISB",c:"CT",n:"RE",a:"AR"},siteUrl:window.location.href,runScript:!0,protocol:window.location.href.substr(0,window.location.href.indexOf("://")+3),startInFold:!1,bubbleAdMsgIdx:"",countDownTimers:{},emptyString:"",useClParams:{},productAttributes:{options:{inherit:["array","inherit"],adc:["color","adDescriptionColor"],adfs:["int","adDescriptionFontSize"],adt:["int","adDescriptionTop"],adw:["int","adDescriptionWidth"],adh:["int","adDescriptionHeight"],adbt:["int","adDescriptionAndButtonTop"],aub:["int","adDisplayUrlBottom"],uc:["color","adDisplayUrlColor"],aufs:["int","adDisplayUrlFontSize"],auh:["int","adDisplayUrlHeight"],aut:["int","adDisplayUrlTop"],atl:["int","adTextsLeft"],tc:["color","adTitleColor"],atfs:["int","adTitleFontSize"],atmh:["int","adTitleMaxHeight"],attd:["str","adTitleTextDecoration"],atmt:["str","adTitleMarginTop"],atw:["int","adTitleWidth"],att:["int","adTitleTop"],aataat:["int","adAreaTop"],bgc:["color","BackgroundColor"],bgi:["str","backgroundImage"],bbc:["color","bodyBorderColor"],bbw:["int","bodyBorderWidth"],bpt:["int","bodyPaddingTop"],blc:["color","borderLeftColor"],blw:["int","borderLeftWidth"],brc:["color","borderRightColor"],brw:["int","borderRightWidth"],hbc:["color","headerBorderColor"],hbw:["int","headerBorderWidth"],bcn:["str","buttonClassName"],bcno:["str","buttonClassNameOver"],bbi:["str","buttonBackgroundImage"],bbpo:["str","buttonBackgroundPositionOver"],bbgc:["color","buttonBackgroundColor"],bbco:["color","buttonBackgroundColorOver"],bbr:["str","buttonBorder"],bbrr:["str","buttonBorderRadius"],bbp:["int","buttonBottom"],bc:["color","buttonColor"],bfs:["int","buttonFontSize"],bwd:["int","buttonWidth"],brp:["int","buttonRight"],bt:["str","buttonText"],btp:["int","buttonTop"],bht:["int","buttonHeight"],cef:["enum","closeEffect"],fi:["str","favicon"],ff:["int","fontFamily"],bte:["bool","hasButton"],ht:["bool","hasTail"],hbgc:["color","headerBackgroundColor"],hbgi:["str","headerBackgroundImage"],hgt:["int","height"],hgtc:["int","heightClosed"],hpcn:["str","helpButtonClassName"],hpbi:["str","helpButtonBackgroundImage"],hpp:["str","helpButtonBackgroundPosition"],hppo:["str","helpButtonBackgroundPositionOver"],hph:["int","helpButtonHeight"],hpl:["str","helpButtonLink"],hpcb:["function","helpButtonCallback"],hpw:["int","helpButtonWidth"],hpr:["int","helpButtonRight"],hpt:["int","helpButtonTop"],lbc:["color","leadBrandColor"],lgh:["int","logoHeight"],lgl:["str","logoLink"],lgu:["str","logoUrl"],lgw:["int","logoWidth"],lt:["int","logoTop"],oef:["enum","openEffect"],rc:["int","roundedCorners"],sdw:["bool","shadow"],sdwo:["bool","shadow"],stfs:["int","searchTitleFontSize"],stc:["int","searchTitleColor"],spfs:["int","searchPrefixFontSize"],stp:["str","searchTitlePrefix"],stpc:["str","searchTitlePrefixColor"],sts:["str","searchTitleSuffix"],tt:["enum","tailType"],tcl:["function","tailColor"],wdh:["int","width"],xbcn:["str","xButtonClassName"],xbi:["str","xButtonBackgroundImage"],xbp:["int","xButtonBackgroundPosition"],xbpo:["int","xButtonBackgroundPositionOver"],xbh:["int","xButtonHeight"],xbw:["int","xButtonWidth"],xbr:["int","xButtonRight"],xbt:["int","xButtonTop"],cpt:["str","caption"],cpw:["int","captionWidth"],cph:["int","captionHeight"],cptp:["int","captionTop"],cprt:["int","captionRight"],cplt:["int","captionLeft"],cpcl:["color","captionColor"],cpfs:["int","captionFontSize"],cphpu:["str","captionHorizontalPlacementUnits"],cphpt:["str","captionHorizontalPlacementTranslate"],cpfw:["str","captionFontWeight"],rct:["str","resultContentTop"]}},textLimits:{def:{plinks:{t:2,i:100},pimgs:{t:2,i:100},phdrs:{t:2,i:100},pdesc:1,page_keyw:2}},loadedData:{},translations:{advertisement:{en:"Advertisement",es:"Aviso Publicitario"},clickHere:{en:"Click here",es:"Presione%20Aqu%C3%AD"},searchingFor:{en:"Searching for",es:"%C2%BFBuscando"},nextSearchResultFor:{en:"Next search result for",es:"Nueva%20b%C3%BAsqueda%20para"},learnMore:{en:"Learn More",es:"Saber%20m%C3%A1s"},adsBy:{en:"Ads by",es:"Anuncios"},continueToSite:{en:"Continue to site in",es:"Continuar%20al%20sitio%20en"}},prs:{t:{}},intagMinContentWidth:200,waitForViewEvent:!1,msgvwcoo:"",msgvwimp:"",prodvw:"",fc:{},autoMarkerCls:"IL_IN_AUTO",capara:{},c:"",strg:"",singleGetAdsPrs:{},msgvwcooToRemove:"msgvwcoo",msgvwImpToRemove:"msgvwImp",oldIE:(()=>{var e=$root.browser;return e.IE&&("BackCompat"==document.compatMode||e.getVersion(!0)<9)})(),webkitTransformOrigin:"-webkit-perspective: 1000; -webkit-transform-origin: 0 0; transform-origin: 0 0; -ms-transform-origin: 0 0;",inContentSets:{inContentAutoExecuted:!1,instanceCounter:0,inContentManualExist:!1},mobileIntext:{old:"old",twoClick:"twoclick",countDown:"countdown",defaultCountDownTime:5e3},nativeAppParmas:{},appParamLimits:10,paramCharLimit:300,defaultLocation:2,noIframe:"NO_IFRAME",noUnit:"NO_UNIT",maxWidth:"MAX_WIDTH",inTagSettings:{relatedTags:"IL_RELATED_TAGS",prodId:"IL_IN_TAG"},inFrameSettings:{width:{thin:120,wide:160},buffer:15}}),$root.$create("harvest",{createInstance:function(){var e={texts:[],nodes:[],stopped:!1,harvesting:!1,firstNode:null,charCount:0,insideAllowedNode:null,useAllowSettings:!1};return e},setConditionalTags:function(){var e=this.$root.settings,t=this.settings,e=(e.white_label||e.defaultLabel).toUpperCase();t.tagGenericOff="INTEXT_OFF",t.tagGenericOn="INTEXT_ON",t.tagGenericStop="INTEXT_STOP",t.tagGenericToggle="INTEXT_TOGGLE",t.tagOff=e+"_OFF",t.tagOn=e+"_ON",t.tagStop=e+"_STOP",t.tagToggle=e+"_TOGGLE"},setHarvestEnabled:function(){function e(e){return n.indexOf(["\x3c!--",e,"--\x3e"].join(""))}var t=this.settings,n=document.body.innerHTML,o=e(t.tagGenericOn),i=e(t.tagOn),o=-1==o||-1==i?Math.max(o,i):Math.min(o,i),i=e(t.tagGenericOff),r=e(t.tagOff),i=-1==i||-1==r?Math.max(i,r):Math.min(i,r);t.enabled=-1==o||-1!=i&&i<o},getHarvestedText:function(e){var t=this.$root,n=t.settings,o=this.settings,i=t.helpers,t=t.utils,r=t.array,s=n.highlightDeny,n=n.highlightAllow,a=this.createInstance();if(o.instances[o.instances.length]=a,1==o.instances.length&&t.timer.start("tmr_har"),n){for(var d in o.allowedTags=r.toObject(n.tags,{},1),o.allowedIds=r.toObject(n.ids,{},1),o.allowedCls=r.toObject(n.cls,{},1),o.allowedTags)o.deniedTags[d]&&delete o.deniedTags[d];n.min||(n.min=1),a.useAllowSettings=!0}s&&(o.deniedTags=r.toObject(s.tags_ex,o.deniedTags,1),o.deniedIds=r.toObject(s.ids_ex,o.deniedIds,1),o.deniedCls=r.toObject(s.cls_ex,o.deniedCls,1)),this.setConditionalTags(),this.setHarvestEnabled(),o.allowOnclick=i.getVar("allow_onclick"),this.harvestText(e||document.body);r=a.texts.join("|"),r=i.normalizeText(r),s=i.countWords(r);return a.useAllowSettings&&s<n.min&&(a.useAllowSettings=!1,this.harvestText(e||document.body),r=a.texts.join("|"),r=i.normalizeText(r),i.countWords(r)),1==o.instances.length&&t.timer.stop("tmr_har"),a.text=r,a},isHarvestableNode:function(e){var t=this.settings,n=this.$root.utils,o=n.dom;return!(null!=e.getAttribute("onclick")&&e!=document.body&&!t.allowOnclick||t.deniedTags[e.tagName.toLowerCase()]||e.id&&t.deniedIds[e.id]||e.className&&"function"==typeof e.className.split&&n.object.hasKey(t.deniedCls,e.className.split(/\s+/))||!this.$root.comm.settings.responses.gsd.wd.ht&&!n.dom.element.isVisible(e)||!o.element.isVisible(e))},harvestText:function(e){var t,n,o,i=this.$root,r=this.settings,s=null,a=i.utils,d=a.object,l=a.timer,i=i.settings.nodeTypes,c=r.instances.length-1,u=r.instances[c],h=(u.harvesting||(u.harvesting=!0,u.stopped=!1,l.start("harvest"+c),u.nodes=[],u.texts=[],u.charCount=0,u.firstNode=e,u.useAllowSettings)||(u.insideAllowedNode=e),u.stopped||-1!=r.timeLimit&&l.poll("harvest"+c)>=r.timeLimit?u.stopped=!0:s=e.nodeType,0<d.keys(r.allowedIds).length),m=0<d.keys(r.allowedCls).length;switch(s){case i.DOCUMENT:case i.ELEMENT:if(this.isHarvestableNode(e)){for(u.useAllowSettings&&!u.insideAllowedNode&&!r.deniedTags[e.tagName.toLowerCase()]&&(!h&&!m||h&&e.id&&r.allowedIds[e.id]||m&&e.className&&d.hasKey(r.allowedCls,e.className.split(/\s+/)))&&(u.insideAllowedNode=e),t=0,n=e.childNodes.length;t<n&&!u.stopped;t++)this.harvestText(e.childNodes[t]);u.insideAllowedNode==e&&(u.insideAllowedNode=null)}break;case i.TEXT:r.enabled&&u.insideAllowedNode&&3<(o=a.string.trim(e.data).replace(/\s+/g," ")).length&&(-1!=r.charLimit&&u.charCount+o.length>r.charLimit&&(u.stopped=!0,o=o.substring(0,r.charLimit-u.charCount).replace(/\S+$/,"")),a.array.push(u.nodes,e),a.array.push(u.texts,o),u.charCount+=o.length);break;case i.COMMENT:this.checkConditionalTags(a.string.trim(e.data),r)}u.firstNode==e&&(u.harvesting=!1,l.stop("harvest"+c))},checkConditionalTags:function(e,t){var n=this.settings;switch(e){case n.tagOff:case n.tagGenericOff:t.enabled=!1;break;case n.tagOn:case n.tagGenericOn:t.enabled=!0;break;case n.tagToggle:case n.tagGenericToggle:t.enabled=!t.enabled;break;case n.tagStop:case n.tagGenericStop:n.instances[n.instances.length-1].stopped=!0}}},{settings:{allowedCls:null,allowedIds:null,charLimit:8e3,deniedCls:{footer:1,wibiyaToolbar_window:1},deniedIds:{footer:1,wibiyaToolbar:1,wibiyaToolbar_window_template:1},deniedTags:{a:1,acronym:1,address:1,br:1,dd:1,dl:1,dt:1,embed:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,iframe:1,input:1,label:1,legend:1,noscript:1,object:1,param:1,script:1,select:1,style:1,textarea:1,th:1,title:1,m:1,svg:1},enabled:!0,timeLimit:1e3,instances:[]}}),$root.$create("shared",{prepareVisitCount:function(e){var t=this.$root,t=t.utils,n="",o="",i=window.location.hostname;window.location.hostname;try{for(var r=0;r<i.length;r+=2)n+=i[r];return o+=n+"s",n=t.base64.encodeBase64(n).replace(/=/g,""),o=t.base64.encodeBase64(o).replace(/=/g,""),"undefined"!=typeof Storage&&window.JSON&&window.JSON.parse?this.saveToStorage(n,o):this.saveToCookie(n,o)}catch(e){return!1}},saveToStorage:function(e,t){var n,o=this.$root.utils,i=1,r=1,s=new Date;return o.storage.passedExpireDate(e)&&localStorage.removeItem(e),sessionStorage.getItem(t)?localStorage.getItem(e)&&(r=(n=JSON.parse(localStorage.getItem(e))).pi+1,i=n.vc,n={d:o.date.now(),vc:i,pi:r},localStorage.setItem(e,JSON.stringify(n)),o.storage.setExpireDate(e,s.getTime()+2592e6)):(n=(localStorage.getItem(e)&&(i=(n=JSON.parse(localStorage.getItem(e))).vc+1,r=n.pi+1),{d:o.date.now(),vc:i,pi:r}),localStorage.setItem(e,JSON.stringify(n)),o.storage.setExpireDate(e,s.getTime()+2592e6)),sessionStorage.setItem(t,!0),JSON.parse(localStorage.getItem(e))},intopPassback:function(e,t,n,o,i){var r,s=$root,a=s.settings,d=s.helpers;e.ads.splice(n,1),e.ads[0].dontShow=!1,s.helpers.setHookData(t.hookId,e),1==o?(a.startInFold=!0,e&&e.ads[0].emd&&d.saveFcAndPvToStorage(e.ads[0].emd,i.prod),e&&e.ads[0]&&((r=e.ads[0]).width&&-1!=r.width||(r.width=728),r.height&&-1!=r.height||(r.height=90)),d.moveAndHideElement(i.node,r.hn),s.event.fire("createIntopUnit",{hookId:t.hookId,isPassBack:!0})):(e&&e.ads[o].emd&&(d.setViews("fc","msgvwcoo"),d.setViews("pv","prodvw"),d.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),s.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod}}),a.startInFold=!0)},insearchPassback:function(e,t,n,o,i){var r,s=$root,a=s.settings,d=s.helpers;e.ads.splice(n,1),e.ads[0].dontShow=!1,s.helpers.setHookData(t.hookId,e),1==o?(a.startInFold=!0,e&&e.ads[0].emd&&d.saveFcAndPvToStorage(e.ads[0].emd,i.prod),e&&e.ads[0]&&((r=e.ads[0]).width&&-1!=r.width||(r.width=728),r.height&&-1!=r.height||(r.height=90)),d.moveAndHideElement(i.node,r.hn),s.event.fire("createInsearchUnit",{hookId:t.hookId,isPassBack:!0})):(e&&e.ads[o].emd&&(d.setViews("fc","msgvwcoo"),d.setViews("pv","prodvw"),d.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),s.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod}}),a.startInFold=!0)},inframePassback:function(e,t,n,o,i){var r=$root,s=(r.settings,r.helpers),a=r.products.inframe.settings;0==o?(e&&e.ads[0].emd&&s.saveFcAndPvToStorage(e.ads[0].emd,i.prod),s.moveAndHideElement(i.node,e.ads[0].hn),r.event.fire("createInframe",{hookId:t.hookId,ad:e.ads[0],isPassback:!0})):(e&&e.ads[o].emd&&(s.setViews("fc","msgvwcoo"),s.setViews("pv","prodvw"),s.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),s=-1!=event.data.hookId.indexOf("RIGHT")?"right":"left",r.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod,bdc:a.adViewParams[s].bdc.join("~"),midx:a.adViewParams[s].midx.join("~"),emd:a.adViewParams[s].emd.join("~")}}))},incontentPassback:function(e,t,n,o,i,r){var s=$root,a=s.helpers;1==o?(e.ads.splice(n,1),s.helpers.setHookData(t.hookId,e),i.doneAnimating=!!0,s.event.fire("createIncontentUnit",{hookId:t.hookId,hook:i,isPassback:!0,prod:r})):(e&&e.ads[o].emd&&(e.ads.splice(n,e.ads.length),s.helpers.setHookData(t.hookId,e),a.setViews("fc","msgvwcoo"),a.setViews("pv","prodvw"),a.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),s.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod}}))},bubblePassback:function(e,t,n,o,i){var r=$root,s=r.settings,a=r.helpers,d={};i.bubble.status="null",e.width<200&&(e.width=r.bubble.settings.def.width),e.height<60&&(e.height=r.bubble.settings.def.height),e.ads.splice(n,1),e.ads[0].dontShow=!1,r.helpers.setHookData(t.hookId,e),s.waitForViewEvent?(1==o?(e&&e.ads[0].emd&&a.saveFcAndPvToStorage(e.ads[0].emd,i.prod),a.moveAndHideElement(i.bubble.node,e.ads[0].hn),r.event.fire("showBubble",{hookId:t.hookId,isPassback:!0})):(s.useClParams.itl?d.hii=i.instanceIndex:d=null,r.helpers.getHookData(t.hookId).hoverd||(e&&e.ads[o].emd&&(a.setViews("fc","msgvwcoo"),a.setViews("pv","prodvw"),a.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),e.hoverd=!0,r.helpers.setHookData(t.hookId,e))),r.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod},capara:d}),r.utils.timer.start("adView"+t.hookId),i.startBubble=!0):r.event.fire("showBubble",{hookId:t.hookId})},saveToCookie:function saveToCookie(cnameB64,scnameB64){var rt=this.$root,ut=rt.utils,hp=rt.helpers,st=rt.settings,visit,vc=1,pi=1,date=new Date;return ut.cookie.has(scnameB64)?(ut.cookie.has(cnameB64)&&(visit=eval("("+ut.cookie.get(cnameB64)+")"),pi=visit.pi+1,vc=visit.vc,visit={d:ut.date.now(),vc:vc,pi:pi},date.setTime(date.getTime()+2592e6),ut.cookie.set(cnameB64,ut.object.stringify(visit),date)),ut.cookie.set(scnameB64,!0)):(visit=(ut.cookie.has(cnameB64)&&(visit=eval("("+ut.cookie.get(cnameB64)+")"),vc=visit.vc+1,pi=visit.pi+1),{d:ut.date.now(),vc:vc,pi:pi}),date.setTime(date.getTime()+2592e6),ut.cookie.set(cnameB64,ut.object.stringify(visit),date),ut.cookie.set(scnameB64,ut.object.stringify(visit))),eval("("+ut.cookie.get(cnameB64)+")")}},null,!0)),products=(shared.bind({event:"main",listener:{main:function(){var e=this.$root,t=e.utils,n=e.settings,o=e.helpers;$ice.VERSION="1959.008-4.010","false"!==o.getVar("usync")&&(e.helpers.getCustomerId(),o="https://router.infolinks.com/usync/manage?pid="+n.customerId+"&wsid="+n.websiteId+"&pdom="+encodeURIComponent(location.hostname)+"&purl="+encodeURIComponent(n.customerUrl),t.dom.createIframe({tag:"iframe",id:"IL_MANAGE",parent:document.body,style:{position:"absolute",margin:"0 0",display:"none"},src:t.cookie.getCCP()?o+"&usprivacy="+t.cookie.getCCP():o,sandbox:"allow-same-origin allow-scripts allow-top-navigation"})),n.cconf=t.string.toObject(t.cookie.get("$ice-conf"))||{},n.cconf.logto&&(e.logger.output=n.cconf.logto),n.cconf.er&&(e.logger.errorReporting=parseInt(n.cconf.er,10)),e.utils.timer.start("tmr_wait"),e.settings.boot=window.INFOLINKS&&window.INFOLINKS._boot?window.INFOLINKS._boot:window.$iceboot||null;e.helpers.getVar("white_label",e.settings),e.helpers.chanceIntegration()||this.$root.event.fire("domready")}}}),shared.bind({event:"pbiceLoaded",listener:{pbiceLoaded:function(e){this.$root.settings.pbIceLoaded=!0}}}),shared.bind({event:"domready",listener:{domready:function(){var e,t,n=this.$root,o=n.helpers;n.utils.timer.stop("tmr_wait"),n.utils.timer.start("tmr_all"),t=o.getVar("no_if"),!o.isGSF()&&(0!=t&&o.inIframe()||o.shouldBlock())||((e=n.settings._initialized?"Trying to re-run an application that has already been initialized.":e)?n.logger.error(e,this.domready):(n.settings._initialized=!0,o.setHosts(),n.event.fire("loadPlugins")))}}}),shared.bind({event:"loadPlugins",listener:{loadPlugins:function(){var e,t,n,o,i=this.$root,r=i.settings,s=r.hosts;if(i.settings.white_label&&!i.settings.white_labelLoaded)i.settings.white_labelLoaded=!0,i.comm.loadScript([s.resources,s.scriptDefaultPath,"0/wl/",r.white_label,".js"].join(""),null,"loadPlugins");else{var s=i.helpers.getVar("inline_plugin"),a=(s&&"function"==i.what(s)&&s(),i.helpers.getVar("plugins"));if(a)for(e=i.settings.hosts.src?"/src":"","string"==i.what(a)&&(a=[a]),i.settings.plugins={},t=0,n=a.length;t<n;t++)o=a[t].match(/https?:\/\//)?a[t]:[i.settings.hosts.resources,"/js",e,"/0/plugins/",a[t],".js"].join(""),i.settings.plugins[o]=!1,i.comm.loadScript(o,null,"pluginLoaded",{plugin:o});else i.event.fire("beforeGSD")}}}}),shared.bind({event:"pluginLoaded",listener:{pluginLoaded:function(e){var t,n=this.$root,o=n.settings;if(o.plugins[e.data.plugin]=!0,-1==n.utils.array.indexOf(n.utils.object.values(o.plugins),!1)){for(t in n.plugins)n.plugins[t]&&"function"==n.what(n.plugins[t].init)&&n.plugins[t].init();n.event.fire("beforeGSD")}}}}),shared.bind({event:"beforeGSD",listener:{prepareGSD:function(){var e=this.$root,t=e.settings,n=e.helpers,o=n.getVar("suspended"),i=(n.getCustomerId(),n.getReferrer()),r=t.websiteId,s=e.utils.object.clean({pid:t.customerId,wsid:t.websiteId,pdom:n.isGSF()?window.document.referrer:location.hostname,purl:n.isGSF()?window.document.referrer:t.customerUrl,usprivacy:e.utils.cookie.getCCP()}),s=(e.comm.loadScript("https://router.infolinks.com/usync/lcmanage",s),"undefined"==e.what(n.getVar("wsid"))&&(r=""),t.trce=n.getVar("trce"),e.utils.object.clean({evt:"afterGSD",pid:t.customerId,wsid:r,pdom:n.isGSF()?window.document.referrer:location.hostname,purl:n.isGSF()?window.document.referrer:t.customerUrl,jsv:e.version,ref:t.refvar||i.ref,refq:i.refq,trce:t.trce,_cb:[e.utils.date.now(),e.utils.number.next("nocache")].join(""),ic:n.getVar("i_counter"),ix:n.getVar("i_disabled"),sc:n.getVar("s_counter"),sx:n.getVar("s_disabled")}));localStorage.getItem("il_cuid")&&(s.il_cuid=localStorage.getItem("il_cuid")),e.utils.timer.start("tmr_gsd"),o&&t.runScript?(e.event.dom.bind(window,{event:"message",listener:e.comm.receiveMessage}),e.comm.settings.listeningToMessages=!0):e.comm.loadScript([t.hosts.router,"/gsd"].join(""),s)}}}),shared.bind({event:"afterGSD",listener:{gsdCallback:function(e){var t=this.$root,e=e.data,n=t.settings.textLimits,o=t.settings,i=t.helpers,r=(t.utils.timer.stop("tmr_gsd"),t.event.dom.bind(window,{event:"message",listener:this.receiveMessage}),e.rs=t.utils.string.toObject(location.search,"il.rt")||t.helpers.getVar("runtime_server")||e.rs||null,"");e.rs||(r="GSD Response is missing `rs`."),(r=e.prs?r:"GSD Response is missing `prs`.")?t.logger.error(r,this.gsdCallback):(e.rs=e.rs.toLowerCase(),e.makey||(e.makey=""),t.helpers.setDefaultWebsiteDirectives(e),n.merged=t.utils.object.extend(n.def,e.wd||{}),e.wsid&&(o.websiteId=e.wsid),(t.comm.settings.responses.gsd=e).cks&&localStorage.setItem("il_cuid",e.cks.cuid),i.fixCorruptLocalStorageItem("fc"),i.fixCorruptLocalStorageItem("pv"),t.event.fire("initComm"),this.initCl(),(r=document.getElementById("afterGSD"))&&r.parentElement.removeChild(r),/i|t|x|e|d/.test(e.prs)?t.event.fire("beforeHarvest"):t.event.fire("beforeImpression"))},initCl:function(){var e,t=this.$root,n=t.settings;if(t.comm.settings.responses.gsd.cfg)for(var o in e=Math.random().toPrecision(1),t.comm.settings.responses.gsd.cfg)t.comm.settings.responses.gsd.cfg[o]&&e<=t.comm.settings.responses.gsd.cfg[o]&&(n.useClParams[o]=!0)}}}),shared.receiveMessage=function(e){var t,n=e.domEvent,o=$root;o.settings;try{t=JSON.parse(n.data)}catch(e){return}if("FALLBACK"===t.message){if(void 0===t.hookId||void 0===o.settings.hooksMap[t.hookId])try{if(void 0===e.domEvent.source.hookId||void 0===o.settings.hooksMap[e.domEvent.source.hookId])return void console.log("could not find hookId in fallback event source window: ",e.domEvent.source);t.hookId=String(e.domEvent.source.hookId)}catch(e){return void console.log("failed getting hookId from fallback event source: ",e)}shared.showAd(1,t)}"DESTROY"===t.message&&t.apiK===o.comm.settings.responses.impression.behavior_imp.apiK&&o.event.fire("destroy"),"RESTORE"===t.message&&t.apiK===o.comm.settings.responses.impression.behavior_imp.apiK&&o.event.fire("restore")},shared.showAd=function(e,t){var n,o=$root,i=(o.helpers,o.settings),r=o.helpers.getHookData(t.hookId),s=[i.getAdsProds.s,i.getAdsProds.x,i.getAdsProds.o,i.getAdsProds.d],a=0==e?1:0;if(r&&r.ads[0]){1==r.ads.length&&(e=0),r.width=r.ads[e].width,r.height=r.ads[e].height,r.cacheOverride=!1;o=o.settings.hooksMap[t.hookId];o.externalTag=!1;for(var d=0;d<s.length;d++)t.hookId==s[d]&&(n=!0);n?this.insearchPassback(r,t,a,e,o):t.hookId.replace(/[0-9]/g,"")in i.inContentProducts?this.incontentPassback(r,t,a,e,o,i.inContentProducts[t.hookId.replace(/[0-9]/g,"")]):t.hookId==i.singleGetAdsProds.fl||t.hookId==i.singleGetAdsProds.fr?this.inframePassback(r,t,a,e,o):t.hookId==i.getAdsProds.h?this.intopPassback(r,t,a,e,o):this.bubblePassback(r,t,a,e,o)}},shared.bind({event:"beforeHarvest",listener:{prepareHarvest:function(){var e=this.$root,t=e.helpers,n=e.settings,o=null,i=e.comm.settings.responses.gsd,o=t.getVar("highlight_deny")||i.wd.hd||{},n=("undefined"!=e.what(window.vBulletin)&&(o.cls||(o.cls=[]),e.utils.array.push(o.cls,"thead","tcat","navbar","tfoot","alt2")),n.$extend({highlightDeny:o,highlightAllow:t.getVar("highlight_allow")||i.wd.ha}),e.harvest.getHarvestedText());e.event.fire("beforeImpression",{ptxt:n.text})}}}),shared.bind({event:"beforeImpression",listener:{prepareImpression:function(e){var t,n,o,i=this.$root,r=i.utils,s=i.helpers,a=i.settings,d=i.comm,l=d.settings.responses.gsd,c=i.browser,u=document.getElementsByName(a.inTagSettings.relatedTags).length||"",h=document.getElementsByName(a.inTagSettings.prodId).length||"",m=(r.cookie.remove("pv"),r.cookie.remove("fc"),t=s.getTimeZone(),n=r.object.stringify({inIframe:s.inIframe(),hbe:!!window.pbjs}),(p=s.getVar("refvar"))&&(a.refvar=p),a.impression||(a.impression={params:{}}),a.impression),g=m.params,p=r.array.toObject(l.prs.split(","),{},!0);switch(e.data&&e.data.updater&&(p={i:!0}),g.ptxt=e.data&&"s"!=l.prs?e.data.ptxt:"",g.twnum=s.countWords(g.ptxt),p.i&&g.twnum<l.wd.qmin&&delete p.i,!p.t||"m"!=l.wd.rtm||u||h||delete p.t,(o=this.prepareVisitCount())&&(g.nov=o.vc,g.tolv=o.d,g.nop=o.pi),!0===i.helpers.getVar("inframe_disable")&&delete p.f,p.f&&((o=s.buildImpPageMarginsParam())?g.ifs=o:delete p.f),g.prs=r.object.keys(p).join(","),""==g.prs&&(g.prs=".",g.ptxt=""),s.getCookieSupport()){case!1:a.c=g.c="sc";break;case!0:a.c=g.c="c";break;default:a.c=g.c="none"}s.supportsStorage()?a.strg=g.strg=!0:a.strg=g.strg=!1,s.supportsSessionStorage()&&sessionStorage.removeItem("vpfc"),s.setViews("pv","prodvw"),s.setNativeAppParams(),e.data&&e.data.updater||(r.cookie.getCCP()&&(g.usprivacy=r.cookie.getCCP()),g.pid=a.customerId,g.wsid=a.websiteId,g.makey=l.makey,g.anow=s.getVar("anow")||"",g.rid=l.rid||"",g.purl=s.isGSF()?a.impression.params.ref:a.customerUrl,g.jsv=i.version,g.ms=l.ms||"",g.gid=l.wd.gid||"",g.rh=s.getVar("require_highlight")||"",g.by="u",g.crt=u,g.ctc=h,g.tzo=t,g.trce=a.trce,g.cfv=d.settings.flashVersion,a.ifip=s.getVar("ifip")||"",a.blankURL=["//",a.hosts.resources,"/static/blank.html"].join(""),g.ifip=a.ifip,g.pf=s.getPlatform(),g.ptitle=s.normalizeText(document.title),g.ref=a.refvar||a.ref,g.refq=a.refq,g.aid=s.getVar("appid"),g.cms=s.getVar("plugin_version"),g.prodvw=a.prodvw||"",a.ose&&(g.ose=a.ose),g.os=c.getOS(),g.ov=c.getOSVersion(),g.br=c.getName(),g.bv=c.getVersion(),g.en=c.getEngine(),g.dv=c.getDevice(),g.ce=navigator.cookieEnabled?"t":"f",g.cd=screen.colorDepth||screen.pixelDepth||0,g.sr=[screen.availWidth,screen.availHeight].join("X"),g.pl=s.getPluginsChecksum(),g.pv=s.getPlatformVersion(g.pf),localStorage.getItem("pitc")&&(g.pitc=localStorage.getItem("pitc")),g.capara=n,l.fn&&(g.fn=s.getFontsChecksum()),null!=g.prs.match(/[^so,\.]/)&&(g.plinks=s.getTagTexts("a","text","plinks"),g.pimgs=s.getTagTexts("img","alt","pimgs"),g.phdrs=s.getTagTexts(r.string.qw("h1 h2 h3 h4 h5 h6"),"text","phdrs"),g.pdesc=s.getMetaContent("description",a.textLimits.merged.pdesc),g.page_keyw=s.getMetaContent("keywords",a.textLimits.merged.page_keyw)),m.pcode=(s.getVar("encoding")||document.characterSet||document.charset||"").toLowerCase(),m.url=[i.settings.protocol,l.rs,"/action/doq.htm","?pcode=",m.pcode,"&r=",r.date.now(),r.number.next("nocache")].join(""),i.browser.IE&&"cors"==d.settings.mode&&(m.url+="&oct=1"),m.method="POST",m.onSuccess="afterImpression"),r.object.extend(g,l.cks||{},a.nativeAppParams),g.rts=r.date.now(),navigator.userAgentData?navigator.userAgentData.getHighEntropyValues(["architecture","bitness","mobile","model","platform","platformVersion","uaFullVersion","fullVersionList"]).then(function(e){e.brands&&delete e.brands,g.sua=JSON.stringify(e),a.sua=g.sua,m.params=r.object.clean(g),i.event.fire("sendImpression",{options:m,beforeSend:function(e){m.params.by=e,r.timer.poll("tmr_imp")||r.timer.start("tmr_imp")}})}):(m.params=r.object.clean(g),i.event.fire("sendImpression",{options:m,beforeSend:function(e){m.params.by=e,r.timer.poll("tmr_imp")||r.timer.start("tmr_imp")}}))}}}),shared.bind({event:"afterImpression",listener:{handleImpressionResponse:function(e){var t,n,o=this,i=this.$root,r=i.settings,s=i.utils,a=i.utils.timer;if(r.afterDOQ=!0,a.delta("tmr_imp")||a.stop("tmr_imp"),t=i.helpers.processImpressionResponse(e.data),"object"!=i.what(t))i.logger.error("Bad Impression response.",this.handleImpressionResponse);else{t.pitc&&localStorage.setItem("pitc",t.pitc);if("IntersectionObserver"in window?i.settings.observer=new IntersectionObserver(function(e,t){return o.intersectionCallback(e,t,o.$root)},{rootMargin:"0px",threshold:.5}):i.settings.observer={observe:function(e){i.loggly.errorLog(null,"IntersectionObserver.observe not supported")},unobserve:function(e){}},(n=t.prs).r&&(n.t?(n.t.sentences=i.utils.array.uniq(i.utils.array.concat(n.t.sentences,n.r.sentences)),i.utils.object.extend(n.t.behavior,n.r.behavior)):(n.t=n.r,delete n.r)),n.c&&(n.t?(i.utils.object.extend(n.c.behavior,n.t.behavior),r.prs.t=n.t,delete n.t):delete n.c),t.prs)if(i.comm.settings.responses.impression=t,!this.getStandaloneBehavior("u")&&!this.getStandaloneBehavior("k")||!0!==window.infolinks_initFromFrame&&!i.helpers.isGSF()){for(n in t.prs)switch(n){case"c":case"n":case"a":case"t":this.intagincontentLoadPending=!0;break;case"i":this.intextLoadPending=!0;break;case"u":this.preRegisterInPlace();break;case"k":this.preRegisterInCube();break;case"h":this.loadInTop();break;case"s":case"x":case"o":case"d":this.loadInsearch();break;case"e":i.comm.settings.isInscreenE=!0;case"b":case"z":this.inscreenLoadPending=!0;break;case"f":this.inframeLoadPending=!0;default:i.settings.singleGetAdsPrs[n]=t.prs[n]}this.afterCheckQueue()}else{for(var d in this.getStandaloneBehavior("u")&&this.preRegisterInPlace(),this.getStandaloneBehavior("k")&&this.preRegisterInCube(),r.queue=[],t.prs)this.getStandaloneBehavior(d)||r.queue.push(d);s.gpt.destroySlots(),r.checkQueuePending&&i.event.fire("checkQueue"),(this.getStandaloneBehavior("u")&&0<t.prs.u.bdrs.length||this.getStandaloneBehavior("k")&&0<t.prs.k.bdrs.length)&&(window.$ICE_HB||i.comm.loadScript("https://resources.infolinks.com/js/pbice/4.010/pbice.js",null,"pbiceLoaded")),i.event.fire("preRenderProducts")}}}}}),shared.intersectionCallback=function(e,t,c){var n,u=c.settings;e.forEach(function(d){var l=u.hooksMap[d.target.getAttribute("data-hook-id")];n=l.mrcVideoAdMode?2e3:1e3,l&&!l.mrcSent&&(d.isIntersecting?l.mrcSent||(l.mrcTimeout=setTimeout(function(){var e,t,n,o=l,i=d,r=c,s=r.helpers.getHookData(o.id),a=[],s=(o.mrcSent=!0,{hookId:o.id,bdc:o.bdc,midx:s.ads[o.currentAdIndex].midx,customParams:!0,capara:{ve:"mrc50"}});"k"===o.prod&&(s.capara.cubeSide=o.cubeSide,o.mrcCubeSidesSent)&&!o.mrcCubeSidesSent[o.cubeSide]&&(o.mrcCubeSidesSent[o.cubeSide]=!0,o.fallback[o.cubeSide]=!1),o.externalIframe?(e=document.querySelectorAll("[data-hookid='"+i.target.getAttribute("data-hook-id")+"']")[0])&&(n=o.mrc50URL?"array"===r.what(o.mrc50URL)?o.mrc50URL:[o.mrc50URL]:null,t=r.comm.getMrcTrackingPixelUrl(s),n&&(a=n),t&&a.push(t),a)&&0<a.length&&(n=JSON.stringify({name:"IL_sendExternalMrc",mrcTrackingPixels:a}),e.contentWindow.postMessage(n,"*")):(r.event.fire("sendClientLog",{params:s}),o.mrc50URL&&r.helpers.hitURL(o.mrc50URL)),u.observer.unobserve(i.target),o.mrcSent=!1,clearTimeout(o.mrcTimeout),o.mrcTimeout=void 0},n)):(clearTimeout(l.mrcTimeout),l.mrcTimeout=null))})},shared.getStandaloneBehavior=function(e){var t=this.$root.comm.settings.responses.impression,n=!1;return n=t.prs[e]?t.behavior_imp.standalone?"true"===t.behavior_imp.standalone:"true"===t.prs[e].behavior.standalone:n},shared.afterCheckQueue=function(){var i,a,d,l,e=this.$root,t=e.comm.settings.responses.impression;if((t.prs.c||t.prs.n||t.prs.a||t.prs.t||t.prs.i||t.prs.e||t.prs.b||t.prs.z||t.prs.f||t.prs.u&&!this.getStandaloneBehavior("u")||t.prs.k&&!this.getStandaloneBehavior("k"))&&this.loadBubble(),e.externalTags.init(),t.behavior_imp.prepareVideoPlayer&&(a={"//imasdk.googleapis.com/js/sdkloader/ima3.js":{loaded:!(i=function(s){return new Promise(function(n,o){var i=0,r=void 0;(function e(){var t=document.querySelector('script[src="'+s+'"]');t&&document.head.removeChild(t),l<=i?o("Failed to load script after "+l+" attempts: "+s):((t=document.createElement("script")).src=s,t.onload=function(){clearTimeout(r),a[s].loaded=!0,n("Script loaded: "+s)},t.onerror=function(){clearTimeout(r),i++,e()},document.head.appendChild(t),r=setTimeout(function(){i++,e()},d))})()})})}},d=3e3,l=3,function t(n){var e,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return o>=n.length?Promise.resolve():a[e=n[o]].loaded?t(n,o+1):i(e).then(function(){return t(n,o+1)}).catch(function(e){return t(n,o+1)})}(Object.keys(a)).then(function(){e.event.fire("preRenderVideoProducts")})),t.prs)for(var n in t.prs)if(0<t.prs[n].bdrs.length)if(!window.$ICE_HB){e.comm.loadScript("https://resources.infolinks.com/js/pbice/4.010/pbice.js",null,"pbiceLoaded");break}e.event.fire("preRenderProducts")},shared.bind({event:"checkQueue",listener:{checkQueue:function(){var e=this.$root,t=e.settings,n=e.comm.settings.responses.impression;if(t.afterDOQ){if(t.checkQueuePending=!1,t.queue&&0<t.queue.length&&window.infolinks_initFromFrame){window.infolinks_initFromFrame=!1;for(var o=0;o<t.queue.length;o++)switch(t.queue[o]){case"c":case"n":case"a":case"t":this.intagincontentLoadPending=!0;break;case"i":this.intextLoadPending=!0;break;case"h":this.loadInTop();break;case"s":case"x":case"o":case"d":this.loadInsearch();break;case"e":e.comm.settings.isInscreenE=!0;case"b":case"z":this.inscreenLoadPending=!0;break;case"f":this.inframeLoadPending=!0;case"u":this.getStandaloneBehavior("u")||this.preRegisterInPlace();break;case"k":this.getStandaloneBehavior("k")||this.preRegisterInCube();break;default:e.settings.singleGetAdsPrs[t.queue[o]]=n.prs[t.queue[o]]}this.afterCheckQueue()}}else t.checkQueuePending=!0}}}),shared.preRegisterInPlace=function(){this.$root.helpers.isGSF()?this.createInPlaceSF():this.preregisterOriginalInplace()},shared.preregisterOriginalInplace=function(){var o=this;window.addEventListener("message",function(e){var t,n;try{t=JSON.parse(e.data)}catch(e){}!t||"registerSlot"!=t.name||t.slot.isRegistered||t.slot.type&&"incube"==t.slot.type||(n=o.$root.products.inplace?o.$root.products.inplace.instances.find(function(e){return e.slot.id==t.slot.id}):n)||(t.slot.isRegistered=!0,o.createInPlace(t.slot))}),window.infolinks_slots&&window.infolinks_slots.forEach(function(e,t){var n;e.isRegistered||e.type&&"inplace"!=e.type||(n=JSON.stringify({name:"isIceApiReady",slot:e}),(e=document.getElementById(e.id))&&e.contentWindow.postMessage(n,"*"))})},shared.preRegisterInCube=function(){var o=this;window.addEventListener("message",function(e){var t,n;try{t=JSON.parse(e.data)}catch(e){}t&&"registerInCubeSlot"==t.name&&!t.slot.isRegistered&&t.slot.type&&"incube"==t.slot.type&&!(n=o.$root.products.incube?o.$root.products.incube.instances.find(function(e){return e.slot.id==t.slot.id}):n)&&(t.slot.isRegistered=!0,o.createInCube(t.slot))}),window.infolinks_slots&&window.infolinks_slots.forEach(function(e,t){var n;!e.isRegistered&&"incube"==e.type&&(n=JSON.stringify({name:"isIceInCubeApiReady",slot:e}),e=document.getElementById(e.id))&&e.contentWindow.postMessage(n,"*")})},shared.loadBubble=function(){var e,t=this.$root;this.bubbleLoadStart||(this.bubbleLoadStart=!0,e="https://resources.infolinks.com/js/"+t.version+"/bubble.js",t.comm.loadScript(e,null,"bubbleLoaded"))},shared.loadInplace=function(e){var t=this.$root,n=window.infolinks_basePath+"/in_place.js";this.inPlaceLoadStart||(t.comm.loadScript(n,null,"ipLoaded",{plugin:n}),this.inPlaceLoadStart=!0)},shared.loadInplaceSF=function(e){var t=this.$root,n=window.infolinks_basePath+"/in_place_sf.js";this.inPlaceSFLoadStart||(t.comm.loadScript(n,null,"ipSFLoaded",{plugin:n}),this.inPlaceSFLoadStart=!0)},shared.loadIncube=function(e){var t=this.$root,n=window.infolinks_basePath+"/in_cube.js";this.inCubeLoadStart||(t.comm.loadScript(n,null,"inCubeLoaded",{plugin:n}),this.inCubeLoadStart=!0)},shared.loadInTop=function(){var e=this.$root,t="icemobile"===e.versionFile?"https://resources.infolinks.com/js/"+e.version+"/mobile_intop.js":"https://resources.infolinks.com/js/"+e.version+"/in_top.js";e.comm.loadScript(t,null,"inTopLoaded")},shared.loadInsearch=function(){var e,t=this.$root;this.insearchPending||(this.insearchPending=!0,e="icemobile"===t.versionFile?"https://resources.infolinks.com/js/"+t.version+"/mobile_insearch.js":"https://resources.infolinks.com/js/"+t.version+"/in_search.js",t.comm.loadScript(e,null,"inSearchLoaded"))},shared.loadInscreen=function(){var e=this.$root,t="https://resources.infolinks.com/js/"+e.version+"/in_screen.js";e.comm.loadScript(t,null,"inScreenLoaded")},shared.loadIntext=function(){var e=this.$root;"icemobile"===e.versionFile?this.inTextUrl="https://resources.infolinks.com/js/"+e.version+"/mobile_intext.js":this.inTextUrl="https://resources.infolinks.com/js/"+e.version+"/in_text.js",e.comm.loadScript(this.inTextUrl,null,"inTextLoaded")},shared.loadIntagIncontent=function(){var e=this.$root;"icemobile"===e.versionFile?this.inTagInContentUrl="https://resources.infolinks.com/js/"+e.version+"/mobile_intag_incontent.js":this.inTagInContentUrl="https://resources.infolinks.com/js/"+e.version+"/intag_incontent.js",e.comm.loadScript(this.inTagInContentUrl,null,"inTagInContentLoaded")},shared.loadInframe=function(){var e=this.$root;"icemobile"===e.versionFile?this.inFrameUrl="https://resources.infolinks.com/js/"+e.version+"/mobile_inframe.js":this.inFrameUrl="https://resources.infolinks.com/js/"+e.version+"/in_frame.js",e.comm.loadScript(this.inFrameUrl,null,"inFrameLoaded")},shared.bind({event:"inFrameLoaded",listener:{inTextLoaded:function(e){var t=this.$root;this.inframeLoadPending=!1,t.event.fire("renderInframeProduct")}}}),shared.bind({event:"inTextLoaded",listener:{inTextLoaded:function(e){var t=this.$root;this.intextLoadPending=!1,t.event.fire("renderIntextProduct")}}}),shared.bind({event:"inTagInContentLoaded",listener:{inTagInContentLoaded:function(e){var t=this.$root;this.intagincontentLoadPending=!1,t.event.fire("renderIntagProduct"),t.event.fire("renderInContentProduct")}}}),shared.bind({event:"bubbleLoaded",listener:{bubbleLoaded:function(e){this.$root;this.isBubbleLoaded||(this.isBubbleLoaded=!0,this.intextLoadPending&&this.loadIntext(),this.intagincontentLoadPending&&this.loadIntagIncontent(),this.inscreenLoadPending&&this.loadInscreen(),this.inframeLoadPending&&this.loadInframe())}}}),shared.bind({event:"inScreenLoaded",listener:{inScreenLoaded:function(e){var t=this.$root;this.inscreenLoadPending=!1,t.event.fire("renderInscreenProduct")}}}),shared.bind({event:"inSearchLoaded",listener:{inSearchLoaded:function(e){this.$root.event.fire("renderInsearchProduct")}}}),shared.bind({event:"ipLoaded",listener:{ipLoaded:function(e){for(var t=this.$root,n=0;n<window.infolinks_slots.length;n++)window.infolinks_slots[n].type&&"inplace"!=window.infolinks_slots[n].type||window.infolinks_slots[n].created||(window.infolinks_slots[n].created=!0,t.event.fire("createInPlaceInstance",{slot:window.infolinks_slots[n]}))}}}),shared.bind({event:"ipSFLoaded",listener:{ipSFLoaded:function(e){for(var t=this.$root,n=0;n<window.infolinks_slots.length;n++)window.infolinks_slots[n].type&&"inplace"!=window.infolinks_slots[n].type||window.infolinks_slots[n].created||(window.infolinks_slots[n].created=!0,t.event.fire("createInPlaceSFInstance",{slot:window.infolinks_slots[n]}))}}}),shared.bind({event:"inCubeLoaded",listener:{inCubeLoaded:function(e){for(var t=this.$root,n=0;n<window.infolinks_slots.length;n++)"incube"!=window.infolinks_slots[n].type||window.infolinks_slots[n].created||(window.infolinks_slots[n].created=!0,t.event.fire("createInCubeInstance",{slot:window.infolinks_slots[n]}))}}}),shared.bind({event:"inTopLoaded",listener:{inTopLoaded:function(e){this.$root.event.fire("renderInTopProduct")}}}),shared.createInPlace=function(e){var t=this.$root;t.products.inplace?(e.created=!0,t.event.fire("createInPlaceInstance",{slot:e})):this.loadInplace()},shared.createInPlaceSF=function(){var e=this.$root;window.infolinks_slots=[window.infolinks_config.inplace_slot],e.products.inplace_sf?(window.infolinks_slots[0].created=!0,e.event.fire("createInPlaceSFInstance",{slot:window.infolinks_slots[0]})):this.loadInplaceSF()},shared.createInCube=function(e){var t=this.$root;t.products.incube?(e.created=!0,t.event.fire("createInCubeInstance",{slot:e})):this.loadIncube()},shared.bind({event:"preRenderProducts",listener:{preRenderProducts:function(){var e=this.$root,t=e.helpers,n=e.settings,o=n.behavior,i=e.utils,r=e.helpers.getSiteLanguage(),s=e.comm.settings.responses.impression;e.comm.settings.responses.gsd;if(!n.preRenderProductsFired){n.preRenderProductsFired=!0,o.customer=t.getCustomerBehavior("link_color link_hover_color link_hover_bg_color ads_reuse_window bubble_direction bubble_logo_url bubble_logo_url_downgrade bubble_logo_width bubble_logo_height bubble_logo_link bubble_help_link skin themeset theme"),o.customer&&("nologo"==o.customer.skin?(o.customer.skin="variant",o.customer.theme="nologo"):"cdtodg"==o.customer.skin?(o.customer.skin="variant",o.customer.theme="cdtodg"):"yell"==o.customer.skin&&(o.customer.skin="variant",o.customer.theme="yell")),"true"==s.behavior_imp.nologo&&(o.customer.theme="nologo"),o.impression=t.renameBehaviorProperties(e.comm.settings.responses.impression.behavior_imp||{}),t.createBaseClasses();for(var a=["sanitizer","longName"],d=0;d<a.length;d++)n.productAttributes[a[d]]=i.object.map(n.productAttributes.options,function(e){return e[d]});delete n.productAttributes.options,n.homeUrl=o.customer.bubbleLogoLink||n.defaultHomeUrl,n.helpUrl=e.utils.VeST(o.customer.bubbleHelpLink||o.customer.bubbleLogoLink||n.defaultHelpUrl,{cid:n.customerId,wsid:n.websiteId,lang:"en"!=r?r+"/":""}),n.productRenderStatus=i.array.toObject(i.object.keys(n.productCodes),{},"before"),s&&(s.cjs&&t.renderCustomJS(s.cjs,!0),s.customCode)&&t.renderDoqCustomCode(s.customCode),this.$root.event.fire("renderProduct"),i.gpt.destroySlots()}}}}),shared.bind({event:"productRenderStatus",listener:{productRenderStatus:function(e){var t=this.$root,n=t.settings,o=t.utils,i=n.productRenderStatus,e=e.data;i[e.prod]=e.status,"failed"==e.status&&t.logger.error([n.productCodes[e.prod]," failed. reason: ",e.reason].join(""),this.productRenderStatus),/before|during/.test(o.object.values(i).join(","))||this.$root.event.fire("afterRenderProducts")}}}),shared.bind({event:"afterRenderProducts",listener:{productsRendedred:function(){var e,t,n=this.$root,o=(n.helpers,n.settings),i=n.comm.settings.responses.gsd,r=o.hosts.src?"/src":"";n.comm.settings.responses.impression;if(/i|r|t/.test(i.prs)&&n.helpers.mapUnhoverableAreas(),"undefined"!=n.what(i.incs))for(e=0,t=i.incs.length;e<t;++e){var s=((e,t)=>function(){n.plugins[e]&&"function"==n.what(n.plugins[e].init)&&n.plugins[e].init(t)})(i.incs[e].s,i.incs[e].p);n.comm.loadScript([o.hosts.resources,"/js",r,"/0/plugins/",i.incs[e].s,".js"].join(""),null,s)}n.updater.settings.className="undefined"!=n.what(window.blogger)?"hentry":n.helpers.getVar("updater_class")||n.helpers.getVar("refreshed_container")||n.comm.settings.responses.impression.behavior_imp.udcl,n.updater.settings.className&&n.event.fire("initUpdater"),n.utils.timer.stop("tmr_all"),n.event.fire("sendImpressionLog")}}}),shared.bind({event:"sendImpressionLog",listener:{sendImpressionLog:function(){var e=this.$root,t=e.settings,n=e.utils,o=n.array,i=n.timer,r=e.comm.settings.responses,s=r.gsd;if(t.sendClientLog=e.helpers.getVar("send_client_log")||s.scl||!1,t.sendClientLog){var a,d,l,c,u=e.products,h=u.intext.settings,u=u.intag.settings,m=[],t={rid:s.rid,makey:s.makey,ifip:t.ifip||"",tmr_scr:t.boot&&t.boot.tmr_scr?n.date.now()-t.boot.tmr_scr:-1,tmr_wait:i.delta("tmr_wait")||-1,tmr_gsd:i.delta("tmr_gsd")||-1,tmr_har:i.delta("tmr_har")||-1,tmr_imp:i.delta("tmr_imp")||-1,tmr_dwq:i.delta("tmr_imp")||-1,tmr_hi:i.delta("tmr_hi")||-1,tmr_fsh:i.delta("tmr_fsh")||-1,tmr_all:i.delta("tmr_all")||-1};if(-1!=s.prs.indexOf(h.prodCode)){for(a in t.intxt_num=[h.rendered,n.object.keys(h.sentences).length].join("*"),h.sentences)for(d=0,l=h.sentences[a].hooks.length;d<l;d++)c=h.sentences[a].hooks[d],o.push(m,[a,c.visible?1:0,c.pos.left,c.pos.top].join("_"));t.intxt_sen=m.join("*")}-1!=s.prs.indexOf(u.prodCode)&&(i=(r.impression.prs[u.prodCode]||{sentences:[]}).sentences.length,t.tCld_num=[o.sum(o.map(u.instances,function(e){return e.hooksCount})),i].join("*"),u.instances.length)&&(t.tCld_pos=[u.instances[0].pos.left,u.instances[0].pos.top].join("*")),document.getElementById("IL_INSEARCH")&&(document.getElementById("IL_INSEARCH").style.zIndex=e.helpers.findMaxZindex()+1),document.getElementById("IL_INTOP")&&(document.getElementById("IL_INTOP").style.zIndex=e.helpers.findMaxZindex()+1),e.comm.loadScript(s.rs+"/action/dcil.htm",t)}}}}),$root.event.dom.bind(document,{event:"keyup",listener:{keyboardShortcuts:function(e){var t=e.domEvent,e=e.$root,n=e.logger;76==t.keyCode&&t.ctrlKey&&t.altKey?(n.output="console"==n.output?"none":"console","undefined"!=e.what(window.console)&&console.info("Logging to console turned "+("console"==n.output?"on.":"off."))):67==t.keyCode&&t.ctrlKey&&t.altKey&&"undefined"!=e.what(window.console)&&console.clear()}}}),$root.$create("products",{},null,!0)),autoPlacement=$root.$create("autoPlacement",{createMarker:function(e,t,n,o,i){var r,s,a=this.$root,d=this.settings,l=a.utils.dom.element,c=a.settings,u=[],h=[];"array"==a.what(e)&&(e=e[0]),d.result[e]?u=d.result[e]:d.result=u=this.findPlacement(n,i);for(var m=0;m<u.length;m++)s=a.utils.dom.createDOMFragment({tag:"input",type:"hidden",attributes:{name:e,value:t}}),"IL_IN_ARTICLE"!=e&&"before"!=u[m].placement&&(r=l.getStyle(u[m].node,"height"))&&-1!=r.indexOf("px")&&l.setStyle(u[m].node,{minHeight:parseInt(r,10)+45+"px"}),"append"==u[m].placement?u[m].node.appendChild(s):"prepend"==u[m].placement?u[m].node.insertBefore(s,u[m].node.firstChild):u[m].node.parentNode.insertBefore(s,u[m].node),o&&(s.className=c.autoMarkerCls),h.push({node:s,refNode:u[m].node,capara:u[m].capara});return h},findPlacement:function(e,t){var n,o,i=this.$root.utils,r=this.settings,s=[],a="headerM"==e||"topM"==e,d="append",l=i.string.qw("pageContent content_body contentBody contentWrapper main_content_section main-content bodyarea content-wrap Blog1 content"),c=i.string.qw("commentlist comments respond commentpost commentform disqus_thread idc-container-parent");if("header"==e||"headerM"==e?(n=this.findHeaderPosition())||(n=this.placeOnTop(l))&&(d="prepend"):"top"!=e&&"topM"!=e||(n=this.findBestContainer(e))&&"body"==n.tagName.toLowerCase()&&(n=this.placeOnTop(l))&&"body"!=n.tagName.toLowerCase()&&(d="prepend"),n){if(!a)return[{node:n,placement:d}];s.push({node:n,placement:d})}if(t&&"legacy"!=t.bottomPlacementAlgo)if(o=this.findBestContainer(null,t))for(var u=0;o&&u<o.length;u++){var h=o[u];h.node&&null!=h.node.offsetParent&&(!t.mwfa||r.winnerWordCount>parseInt(t.mwfa))?(n=h.node,h=h.capara,s.push({node:n,placement:"append",capara:h})):"true"==t.fbit&&(s=this.findBottomPostion(c,l,s))}else"true"==t.fbit&&(s=this.findBottomPostion(c,l,s));else s=this.findBottomPostion(c,l,s);return s},findBottomPostion:function(e,t,n){for(var o,i=this.$root.utils.dom.element,r=0,s=e.length;r<s;r++)if((o=i.$(e[r]))&&i.isVisible(o))return n.push({node:o,placement:/respond|commentform|disqus_thread/.test(e[r])?"before":"prepend"}),n;for(r=0,s=t.length;r<s;r++)if((o=i.$(t[r]))&&i.isVisible(o))return n.push({node:o,placement:"append"}),n;return n.push({node:this.findBestContainer(),placement:"append"}),n},findHeaderPosition:function(){var e=this.getValidNode("tag","header");return e=(e=(e=(e=(e=e||this.getValidNode("tag","h1"))||this.getValidNode("tag","h2"))||this.getValidNode("tag","h3"))||this.getValidNode("id","head"))||this.getValidNode("id","header")},getValidNode:function(e,t){var n,o,i=this.$root.utils.dom.element;return"tag"==e?(n=document.getElementsByTagName(t))&&1==n.length&&(o=n[0]):"id"==e&&(o=document.getElementById(t)),o=(o=o&&(i.offset(o).top<400?o:""))&&this.isNodeHasPropertyValue(o,"position",["fixed","absolute"])?null:o},palgo:function(e){for(var t,n,o,i=[],r=0,s=0,a=$root,d=this.settings,l=[],c=!0,u=0,h=0,m=this.settings,g=[],p=0,f=document.getElementsByTagName("p"),v=0;v<f.length;v++)i[v]=(o=v,h=autoPlacement.getWords(f[o]),{parentNode:f[o].parentNode,wordCount:h.split(/\s+/).length});for(var b=0;b<i.length;b++)i[b].parentNode.getAttribute("IL_CC"+d.pIndex)?(r=i[b].parentNode.getAttribute("IL_CC"+d.pIndex),i[b].parentNode.setAttribute("IL_CC"+d.pIndex,++r)):i[b].parentNode.setAttribute("IL_CC"+d.pIndex,1),s<r&&(s=r,t=i[b].parentNode),i[b].wordCount>u&&(u=i[b].wordCount,n=i[b].parentNode);for(var w=0;w<i.length;w++)l[w]=i[w].parentNode.getAttribute("IL_CC"+d.pIndex);for(var y=0;y<i.length;y++)l[y]!==l[0]&&(c=!1);if((t=c?n:t)&&parseInt(e.mp)<=t.getAttribute("IL_CC"+d.pIndex)){for(var x=t.getElementsByTagName("p"),I=0;I<x.length;I++)x[I].parentNode==t&&(g[p]=x[I],p++);if(m.winnerWordCount=autoPlacement.getWords(t).split(/\s+/).length,d.pIndex++,e&&e.pn)return e.pn=parseInt(e.pn),e.pn>s&&(e.pn=s),0<e.pn?[g[e.pn-1]]:[g[e.pn]]}else a.loggly.warnLog("Minimum paragraph number not reached, palgo failed, number of paragraphs found: ",t.getAttribute("IL_CC"+d.pIndex),"minimun paragraph required: ",e.mp)},aapalgo:function(e){for(var n=[],t=[],o=$root,i=(this.settings,0),r=0,s=[],a=(o=$root).utils.dom.element,d=parseInt(e.pn),l=parseInt(e.mp),c=this.settings,u=o.comm.settings.responses.impression.prs.a.sentences,h=e.mwfa||e.mwfab,m=e.pg?parseInt(e.pg):1,g=e.mwfp?parseInt(e.mwfp):4,p=document.getElementsByTagName("p"),f=0;f<p.length;f++)t[f]=(e=>{if("none"!==a.getStyle(p[e].parentNode,"display")&&"visible"==a.getStyle(p[e].parentNode,"visibility")&&(r=p[e].parentNode.getAttribute("data-word-count")?parseInt(p[e].parentNode.getAttribute("data-word-count")):autoPlacement.getWords(p[e].parentNode).split(/\s+/).length,p[e].parentNode.setAttribute("data-word-count",r),!((i=autoPlacement.getWords(p[e]).split(/\s+/).length)<g))){var t;if("none"!==a.getStyle(p[e],"display")&&"visible"==a.getStyle(p[e],"visibility"))return-1==n.indexOf(p[e].parentNode)?(n.push(p[e].parentNode),p[e].parentNode.setAttribute("data-p-count",1)):(t=parseInt(p[e].parentNode.getAttribute("data-p-count"))+1,p[e].parentNode.setAttribute("data-p-count",t)),{paragraph:p[e],parentNode:p[e].parentNode,wordCount:i};r-=i,p[e].parentNode.setAttribute("data-word-count",r)}})(f);function v(e){var t=[],n=0;if(0<m){for(;n<e.length-1&&e[n];)t.push(e[n]),n+=m;return t.splice(0,u.length)}return[e[0]]}if((s=t.filter(function(e){return null!=e&&parseInt(e.parentNode.getAttribute("data-p-count"))>l&&parseInt(e.parentNode.getAttribute("data-word-count"))>parseInt(h)})).length>=d){for(f=d-1;f<s.length;f++)if(100==a.isOnViewport(s[f].paragraph))return c.winnerWordCount=s[f].parentNode.getAttribute("data-word-count"),c.pIndex=f,v(s=s.splice(f));return c.winnerWordCount=s[d-1].parentNode.getAttribute("data-word-count"),c.pIndex=d-1,v(s=s.splice(d-1))}o.loggly.warnLog("Minimum paragraph number not reached, aapalgo failed, minimun paragraph required: ",e.mp)},classAlgo:function(e){var t=$root;if(e.mwfab=e.mwfa,e.mwfa=!1,"ice"===t.versionFile?e.cnfa=e.pcnfa:e.cnfa=e.mcnfa,t=document.getElementsByClassName(e.cnfa),e&&e.pn)return e.pn=parseInt(e.pn),t[e.pn]?0<e.pn?[t[e.pn-1]]:[t[e.pn]]:[t[0]]},getWords:function(e){for(var t="",n=e.childNodes.length,o=0;o<n;o++){var i=e.childNodes[o];8!=i.nodeType&&(t+=1!=i.nodeType?i.nodeValue:this.getWords(i))}return t},runMiddleAlgos:function(e){var t,n,o=$root,i=o.utils,r=[],s=i.dom.element,a=[],d={capara:{}};if(!e||!e.bottomPlacementAlgo)return this.palgo(e);for(var l=e.bottomPlacementAlgo.split(","),c=0;c<l.length;c++)if(l)try{for(var u=autoPlacement[l[c].replace(/\s/g,"")](e),h=0;h<u.length;h++)(d={}).node=u[h].paragraph||u[h],d.capara={},d&&d.node?(t={top:s.offset(d.node).top+i.dom.element.getActualHeightFixed(d.node),left:s.offset(d.node).left},n=s.isOnViewport(d.node),i.object.extend(d.capara,{successfulAlgo:l[c]},t,{isAboveFold:n}),r.push(d)):(i.array.push(a,l[c]),o.event.fire("sendClientLog",{params:{failedAlgos:l[c]}}));return r}catch(e){i.array.push(a,l[c]),d&&i.object.extend(d.capara,{failedAlgos:a}),o.event.fire("sendClientLog",{params:{failedAlgos:l[c]}})}i.object.extend(d.capara,{failedAlgos:a})},findBestContainer:function(e,t){var n,o,i,r,s,a,d=this.$root,l=d.settings,c=this.settings,u=d.utils,h=null,m=-1e3,g=u.dom,p=g.element,f=u.array.toObject(u.string.qw("body tbody table tr ul dl ol span embed marquee"),{},1);if("top"!=e&&"topM"!=e||(a=!0,m=0),t&&"legacy"!=t.bottomPlacementAlgo)return this.runMiddleAlgos(t);var v,b,w,u=g.findWidestNode(),y=u.node==document.body?(s=g.document.getWidth(),g.document.getHeight()):(s=u.width,u.height);for(this.harvest(document.body),n=0,o=c.candidates.length;n<o;n++)f[(r=(i=c.candidates[n]).node).tagName.toLowerCase()]||(i.wordsCount=parseInt(p.getData(r,"iceapw"),10)||0,i.childrenCount=parseInt(p.getData(r,"iceapc"),10)||0,i.wordsCount&&(i.childrenCount||a)&&(b=(i.width/(s||1)+i.height/(y||1))/4+i.wordsCount/(c.totalWordsCount||1)-i.childrenCount/(c.totalValidNodes||1),w=a?(v=p.isOnViewport(r,70),w=this.isNodeHasPropertyValue(r,"position",["fixed","absolute"]),i.score=!w&&100==v&&0<p.offset(r).top&&10<i.height&&i.width>l.intagMinContentWidth?g.viewport.getHeight()-p.offset(r).top+b:0):i.score=b,"number"==d.what(w))&&m<w&&(m=w,h=i));if(h&&!a)for(n=0,o=c.candidates.length;n<o;n++)(i=c.candidates[n]).wordsCount==h.wordsCount&&i.node!=h.node&&p.inHierarchy(i.node,h.node)&&(h=i);return(c.winner=h)?h.node:document.body},isNodeHasPropertyValue:function(e,t,n){for(var o,i=this.$root.utils.dom.element,r=e;r&&-1==r.nodeName.toLowerCase().indexOf("document");){for(o=0;o<n.length;o++)if(i.getStyle(r,t)==n[o])return!0;r=r.parentNode}return!1},placeOnTop:function(e){for(var t,n,o,i=this.$root.utils.dom,r=i.element,s=i.viewport.getHeight(),a=0;a<e.length;a++)(t=document.getElementById(e[a]))&&(o=r.offset(t).top)<s&&(s=o,n=t);return n},harvest:function(e){var t,n,o,i,r,s,a,d,l=this.$root,c=this.settings,u=l.utils,h=u.dom.element,m=u.timer,g=l.settings.nodeTypes;switch(c.harvesting||(c.harvesting=!0,c.stopped=!1,m.start("apHarvest"),c.candidates=[],c.firstNode=e,c.enabled=!0,c.timeLimit=1e3,c.totalWordsCount=0,c.totalValidNodes=0),c.stopped||-1!=c.timeLimit&&m.poll("apHarvest")>=c.timeLimit?c.stopped=!0:t=e.nodeType,t){case g.DOCUMENT:case g.ELEMENT:if("svganimatedstring"!=l.what(e.className)&&(-1==e.className.indexOf(l.settings.baseClass)&&-1==e.className.indexOf("IL_AD")&&h.isVisible(e)&&l.harvest.isHarvestableNode(e))){for(n=0,o=e.childNodes.length;n<o&&!c.stopped;n++)this.harvest(e.childNodes[n]);for(c.totalValidNodes++,s=e.parentNode;s&&s!=document&&"html"!=s.tagName.toLowerCase();)d=(parseInt(h.getData(s,"iceapc"),10)||0)+1,h.setData(s,"iceapc",d),s=s.parentNode;u.array.push(c.candidates,{node:e,parent:e.parentNode,width:h.getActualWidth(e),height:h.getActualHeight(e)})}break;case g.TEXT:if(c.enabled&&(r=u.string.trim(e.data).replace(/\s+/g," ")).match(/\S/))for(i=r.split(/\s+/).length,c.totalWordsCount+=i,s=e.parentNode;s&&s!=document&&"html"!=s.tagName.toLowerCase();)a=(parseInt(h.getData(s,"iceapw"),10)||0)+i,h.setData(s,"iceapw",a),s=s.parentNode;break;case g.COMMENT:l.harvest.checkConditionalTags(u.string.trim(e.data),c)}c.firstNode==e&&(c.harvesting=!1,m.stop("apHarvest"))}},{settings:{result:{},pIndex:1}},!1),externalTags=$root.$create("externalTags",{init:function(){var e,t,n,o=this.$root,i=o.comm.settings.responses.impression,r=o.utils,s=r.array,a=r.object,d=this.settings;if(i.messages)if("icemobile"===o.versionFile)delete i.messages;else for(d.bidCallbackVar=(o.settings.white_label||"infolinks")+"_etag",e=0,t=i.messages.length;e<t;e++)(n=i.messages[e].ads[0]).prs=s.toObject(n.prs?n.prs.split(","):s.discard(s.discard(s.discard(s.discard(a.keys(i.prs),"s"),"o"),"x"),"d"),{},!0),i.messages[e].msg=e,n.emd&&(d.tags[n.emd]=i.messages[e])},getProductAdSizes:function(e,t){switch(e){case"i":case"x":case"e":case"r":case"t":return[{w:300,h:250}];case"s":case"o":case"x":case"d":return[{w:728,h:90}];case"f":return[{w:t.instance.width||160,h:600}]}},setExternalTagData:function(e,t){var n=this.$root.utils.object,o=e.currentAdIndex,i=t.ads[o];if(i.content)i.content=this.$root.utils.base64.decodeBase64(i.content),e.externalTag=!0;else if(i.url||i.contentUrl)i.url&&(i.contentUrl=i.url),e.externalTag=!0;else for(var i=e.externalTag,e=this.settings,r=t.ads[o].emd,s=e.tags[r],a=e.bidResponses[i],d=0,l=a.length;d<l;d++)a[d].emd==r&&(t.width=a[d].size.w,t.height=a[d].size.h,t.ads[o].contentUrl=a[d].result[s.ads[0].jat],n.extend(t.ads[o],s.ads[0]));return t},getBidData:function(e){var t,n,o=this.$root,i=this.settings;return"number"!=o.what(e)?{}:(e=i.bidResponses[e],t=o.utils.array.map(e,function(e){return e.emd||""}),n=o.utils.array.map(e,function(e){e=e.result[i.tags[e.emd].ads[0].jpt];return o.utils.base64.encodeBase64(("number"==o.what(e)?e:-1).toString()).split("").reverse().join("")||""}),e=o.utils.array.map(e,function(e){return[e.size.w,e.size.h].join("*")||""}),{emd:t.join("~"),nj:n.join("~"),jsd:e.join("~")})},updateViewedTags:function(e){var t,n=this.$root,o=n.settings.hooksMap[e],e=n.helpers.getHookData(e),n=n.externalTags.settings;(t=e.ads[o.currentAdIndex]?e.ads[o.currentAdIndex].emd:t)&&(n.uemd[t]||(n.uemd[t]={}),n.uemd[t][o.prod]||(n.uemd[t][o.prod]=0),n.uemd[t][o.prod]++)},getViewedTagsParam:function(){var e,t,n=this.$root,o=this.settings,i=[];if(!n.utils.object.keys(o.uemd).length)return{};for(e in o.uemd)for(t in o.uemd[e])n.utils.array.push(i,[e,t,o.uemd[e][t]].join("!"));return{uemd:i.join("~")}}},{settings:{bidInvocation:0,bidResponses:{},bidCount:0,tags:{},bidRequestTimeout:300,uemd:{}}},!0),updater=$root.$create("updater",{handleUpdaterImpression:function(e){var t=this.$root,n=this.settings,n=n.instances[n.instances.length-1],e=t.helpers.processImpressionResponse(e.data);"object"!=t.what(e)?t.logger.error("Bad Impression response.",this.handleUpdaterImpression):(n.impression=e,n.impression.prs[t.products.intext.settings.prodCode]&&t.event.fire("initIntext",{updater:n}))}},{settings:{def:{interval:5,container:null,tag:null},counter:0,instances:[]}},!0),simplePlayer=(updater.bind({event:"initUpdater",listener:{init:function(){for(var e=this.$root,t=this.settings,n=e.helpers,o=n.getVar("updater_container")||e.comm.settings.responses.impression.behavior_imp.udco,i=(t.interval=n.getVar("updater_interval")||e.comm.settings.responses.impression.behavior_imp.udi||t.def.interval,t.container=o?e.utils.dom.element.$(o):t.def.container,t.tag=n.getVar("updater_tag")||e.comm.settings.responses.impression.behavior_imp.udt||t.def.tag,e.utils.dom.filterByClass(t.className,t.tag,t.container)),r=0,s=i.length;r<s;r++)i[r].setAttribute("iceupdated","true");e.event.unbind("afterImpression"),e.event.bind({event:"afterImpression",listener:this.handleUpdaterImpression}),e.event.repeat("updaterContentChange",1e3*t.interval)}}}),updater.bind({event:"updaterContentChange",listener:{updaterContentChange:function(){for(var e,t,n=this.$root,o=n.utils,i=this.settings,r=[],s=[],a=n.utils.dom.filterByClass(i.className,i.tag,i.container),d=0,l=a.length;d<l;d++)"true"!=a[d].getAttribute("iceupdated")&&(n.harvest.settings.enabled=!0,0<(e=n.harvest.getHarvestedText(a[d])).text.length)&&(a[d].setAttribute("iceupdated","true"),o.array.push(r,e.text),s=o.array.concat(s,e.nodes));r.length&&(t=i.instances[i.counter++]={nodes:s,text:r.join("P")},n.event.fire("beforeImpression",{ptxt:t.text,updater:i.counter}))}}}),$root.$create("simplePlayer",{create:function(e){var t,n,o,i,r,s,a,d={settings:e.settings,root:e.root,width:e.settings.mobileVideoWidth||e.settings.firstAdWidth,height:e.settings.videoAdHeight||e.settings.firstAdHeight,currentPlayer:document.getElementById(e.videoId),videoContent:e.settings.vastTags[0].postLoadVideo,id:e.videoId,adContainerId:e.adCntId,canPlayCalled:!1,disposed:!1,adsManagerLoaded:!1,adPausedTimeout:null,adNeverLoadedTimeout:null,adLoadFailDuration:12,adsRequestCounter:0,adViewCounter:0,adsLength:e.settings.vastTags.length,hasShownRequiredContentDuration:!1,adRequestCounter:0,postLoadDuration:Number(e.settings.behavior.merged.vpld)||3,log:function(){},pausedAdId:null};function l(){document.hidden?d.inactiveTabRefreshTimeout=setTimeout(function(){d.root.event.fire(d.settings.resumeRefreshEvtHandler)},1e3*(d.settings.behavior.merged.rpt||60)):(clearTimeout(d.inactiveTabRefreshTimeout),d.currentPlayer.src!==d.videoContent&&g(d.pausedAdId))}d.settings.isInAdMode=!1,d.settings.postLoadVideoMode=!1,clearTimeout(d.inactiveTabRefreshTimeout),d.log("currentPlayer ",d.currentPlayer);function c(e){var t;d.adsManagerDestroyed=!1,d.disposed||(document.addEventListener("visibilitychange",l),d.log("onAdsManagerLoaded ",e),d.adsManagerLoaded=!0,Date.now(),s[1],(t=new google.ima.AdsRenderingSettings).restoreCustomPlaybackStateOnAdBreakComplete=!0,(i=e.getAdsManager(d.currentPlayer,t)).setVolume(0),i.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,T),i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,f),i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,v),i.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,b),i.addEventListener(google.ima.AdEvent.Type.LOADED,w),i.addEventListener(google.ima.AdEvent.Type.IMPRESSION,y),i.addEventListener(google.ima.AdEvent.Type.STARTED,x),i.addEventListener(google.ima.AdEvent.Type.PAUSED,I),i.addEventListener(google.ima.AdEvent.Type.RESUMED,k),i.addEventListener(google.ima.AdEvent.Type.SKIPPED,S),i.addEventListener(google.ima.AdEvent.Type.COMPLETE,C),E())}function u(){var e=document.createElement("script");e.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",e.onload=function(){A(d)},e.onerror=function(){console.error("Failed to load the IMA3 SDK")},document.head.appendChild(e)}var h=function(e){var t=e.currentPlayer;i&&(i.destroy(),e.adsManagerDestroyed=!0),clearTimeout(a),clearTimeout(e.adNeverLoadedTimeout),e.settings.vastTags.shift(),e.settings.vastTags[0]&&(e.adRequestCounter++,e.settings.isInAdMode=!0,e.adLoadTime=Date.now(),p(e),t.paused&&t.play(),(t=new google.ima.AdsRequest).adsResponse=d.settings.vastTags[0].vastTag,t.setAdWillAutoPlay(!0),t.setAdWillPlayMuted(!0),s=[e.adsManagerLoaded,Date.now()],o.requestAds(t))},m=function(e){d.pausedAdId=null;e.currentPlayer;var t=e.root;e.adRequestCounter<e.adsLength?(h(e),e.settings.postLoadVideoMode=!1,e.settings.isInAdMode=!1):e.settings.refreshPending||0<e.adViewCounter?(e.settings.postLoadVideoMode=!1,e.settings.isInAdMode=!1,e.settings.refreshCount<parseInt(e.settings.garl)&&!e.settings.refreshAdsCalled?(e.settings.refreshAdsCalled=!0,t.event.fire(e.settings.resumeRefreshEvtHandler)):(e.settings.refreshCount,parseInt(e.settings.garl))):(e.settings.isInAdMode=!1,e.settings.postLoadVideoMode=!1)},g=function(e){clearTimeout(d.adPausedTimeout),d.adPausedTimeout=setTimeout(function(){e==d.pausedAdId&&d.currentPlayer.paused&&!document.hidden&&d.currentPlayer.play()},2e3)},p=function(e){e.adNeverLoadedTimeout&&clearTimeout(e.adNeverLoadedTimeout),e.adNeverLoadedTimeout=setTimeout(function(){e.settings.stopRefresh||"started"!==e.adStatus&&(e.settings.isInAdMode=!1,e.root.event.fire("sendClientLog",{params:{hookId:e.settings.instance.hook.id,bdc:e.settings.instance.hook.bdc,midx:e.settings.vastTags[0].midx,customParams:!0,capara:{"vast-adError":"446699","vast-adErrorMessage":"-"}}}),m(e))},1e3*e.adLoadFailDuration)},f=function(){d.log(">>> on onContentPauseRequested"),d.currentPlayer.paused||d.currentPlayer.pause()},v=function(){d.log(">>> on onContentResumeRequested",d.id),d.currentPlayer.paused&&d.currentPlayer.play()},b=function e(){clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),i.removeEventListener(google.ima.AdEvent.Type.AD_PROGRESS,e)},w=function(){d.log(">>> on ad loaded"),d.adStatus="loaded",clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),d.root.event.fire("sendClientLog",{params:{hookId:d.settings.instance.hook.id,bdc:d.settings.instance.hook.bdc,midx:d.settings.vastTags[0].midx,customParams:!0,capara:{"vast-adLoadTime":Date.now()-d.adLoadTime}}}),d.loadFailDurationTimeout=setTimeout(function(){d.loadFailDurationTimeout&&clearTimeout(d.loadFailDurationTimeout),"started"!==d.adStatus&&(d.settings.isInAdMode=!1,d.root.event.fire("sendClientLog",{params:{hookId:d.settings.instance.hook.id,bdc:d.settings.instance.hook.bdc,midx:d.midx,customParams:!0,capara:{"vast-adError":"336699","vast-adErrorMessage":"VAST loaded but ad never started, ended or error"}}}),d.settings.isInAdMode=!1,d.settings.postLoadVideoMode=!1,m(d))},1e3*d.adLoadFailDuration)},y=function(){clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout)},x=function(){d.log(">>> on ad started show player"),d.adStatus="started",d.adViewCounter++,clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),d.pausedAdId=d.pausedAdId||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),d.root.event.fire(d.settings.showVideoEvtHandler,{instance:d.settings}),d.settings.instance.hook.currentAdIndex=d.settings.vastTags[0].midx;var e={prod_t:d.settings.instance.hook.prod,bdc:d.settings.instance.hook.bdc,midx:d.settings.vastTags[0].midx,emd:d.settings.vastTags[0].emd,capara:JSON.stringify(d.root.settings.capara)};0===Object.keys(d.root.settings.capara).length&&delete e.capara,d.root.event.fire("setVpfc",{prod:d.settings.prodCode}),d.settings.instance.hook.adContainer&&(d.settings.instance.hook.mrcVideoAdMode=!0,d.root.settings.observer.unobserve(d.settings.instance.hook.adContainer),d.root.settings.observer.observe(d.settings.instance.hook.adContainer),setTimeout(function(){d.settings.instance.hook.mrcVideoAdMode=!1,d.root.settings.observer.unobserve(d.settings.instance.hook.adContainer)},2e3)),d.root.event.fire("sendAdView",{hookId:d.settings.instance.hook.id,params:e})},I=function(){clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),d.pausedAdId&&(d.currentPlayer.src===d.videoContent||document.hidden?(clearTimeout(a),a=setTimeout(function(){try{i.resume()}catch(e){d.adStatus="failedResume",clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),clearTimeout(d.inactiveTabRefreshTimeout),document.removeEventListener("visibilitychange",l),d.settings.isInAdMode=!1,d.settings.postLoadVideoMode=!1,m(d)}},3e3)):g(d.pausedAdId))},k=function(){clearTimeout(a),clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),d.currentPlayer.src===d.videoContent||document.hidden||clearTimeout(d.adPausedTimeout)},S=function(){d.log(">>> on ad complete"),d.adStatus="skipped",clearTimeout(a),clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),clearTimeout(d.inactiveTabRefreshTimeout),document.removeEventListener("visibilitychange",l),d.settings.isInAdMode=!1,d.settings.postLoadVideoMode=!1,m(d)},C=function(){d.log(">>> on ad complete"),d.adStatus="complete",clearTimeout(a),clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),clearTimeout(d.inactiveTabRefreshTimeout),document.removeEventListener("visibilitychange",l),d.settings.isInAdMode=!1,d.settings.postLoadVideoMode=!1,d.pausedAdId=null,d.root.event.fire("sendClientLog",{params:{hookId:d.settings.instance.hook.id,bdc:d.settings.instance.hook.bdc,midx:d.settings.vastTags[0].midx,customParams:!0,capara:{"vast-adCompletion":!0}}}),m(d)},T=function(e){d.log(">> onAdError",e.getError()),d.adStatus="errored",clearTimeout(a),clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),clearTimeout(d.inactiveTabRefreshTimeout),document.removeEventListener("visibilitychange",l),d.settings.isInAdMode=!1,d.settings.postLoadVideoMode=!1,d.root.event.fire("sendClientLog",{params:{hookId:d.settings.instance.hook.id,bdc:d.settings.instance.hook.bdc,midx:d.settings.vastTags[0].midx,customParams:!0,capara:{"vast-adError":e.getError().getErrorCode(),"vast-adErrorMessage":e.getError().getMessage()}}}),i&&(i.destroy(),d.adsManagerDestroyed=!0),m(d)},E=function(){try{r||(n.initialize(),r=!0),d.log(" >>>>>>>> start adsanager ",d.width,d.height+" || "+d.settings.videoAdHeight),d.adRequestCounter++,i.init(d.width,d.height,google.ima.ViewMode.NORMAL),i.start(),d.adStatus="requested"}catch(e){}},A=function(e){(window.google&&window.google.ima?(d.currentPlayer.play(),t=document.getElementById(d.adContainerId),n=new google.ima.AdDisplayContainer(t,e.currentPlayer),(o=new google.ima.AdsLoader(n)).getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),o.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,c,!1),o.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,T,!1),d.currentPlayer.volume=0,d.currentPlayer.muted=!0,L):u)()},L=function(){var e;d.disposed||(d.currentPlayer.pause(),d.adLoadTime=Date.now(),d.root.event.fire("sendClientLog",{params:{hookId:d.settings.instance.hook.id,bdc:d.settings.instance.hook.bdc,midx:d.settings.vastTags[0].midx,customParams:!0,capara:{"vast-opportunityReached":!0}}}),(e=new google.ima.AdsRequest).adsResponse=d.settings.vastTags[0].vastTag,e.setAdWillAutoPlay(!0),e.setAdWillPlayMuted(!0),s=[d.adsManagerLoaded,Date.now()],o.requestAds(e),d.adStatus="waiting",p(d))};return d.currentPlayer.addEventListener("ended",function(e){}),d.currentPlayer.addEventListener("pause",function(){d.currentPlayer.src!==d.videoContent&&!document.hidden&&d.pausedAdId&&g(d.pausedAdId)}),d.currentPlayer.addEventListener("play",function(){d.currentPlayer.src===d.videoContent||document.hidden||clearTimeout(d.adPausedTimeout)}),d.dispose=function(){d.disposed||(d.disposed=!0,d.pausedAdId=null,i&&(i.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,T),i.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,f),i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,v),i.removeEventListener(google.ima.AdEvent.Type.AD_PROGRESS,b),i.removeEventListener(google.ima.AdEvent.Type.LOADED,w),i.removeEventListener(google.ima.AdEvent.Type.IMPRESSION,y),i.removeEventListener(google.ima.AdEvent.Type.STARTED,x),i.removeEventListener(google.ima.AdEvent.Type.PAUSED,I),i.removeEventListener(google.ima.AdEvent.Type.RESUMED,k),i.removeEventListener(google.ima.AdEvent.Type.SKIPPED,S),i.removeEventListener(google.ima.AdEvent.Type.COMPLETE,C),i.discardAdBreak(),i.destroy(),d.adsManagerDestroyed=!0,d.adsManagerLoaded=!1),d.currentPlayer&&document.getElementById(d.id)&&(d.currentPlayer.pause(),d.currentPlayer.src="",d.currentPlayer.load()),d.settings.isInAdMode=!1,d.settings.postLoadVideoMode=!1,d.adNeverLoadedTimeout&&(clearTimeout(a),clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),clearTimeout(d.inactiveTabRefreshTimeout)),document.removeEventListener("visibilitychange",l),d.adContainerId&&document.getElementById(d.adContainerId)&&(document.getElementById(d.adContainerId).innerHTML=""))},d.startPreloadBannerHideTimer=function(e){d.disposed||(d.log("startPreloadBannerHideTimer thisInstance ",e),d.settings.vastTags[0]&&(d.settings.isInAdMode=!0,A(e)))},d.switchContentClearAds=function(e){d.currentPlayer.src!=e&&(d.videoContent=e,d.currentPlayer.src=e,d.currentPlayer.play(),i&&(i.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,T),i.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,f),i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,v),i.removeEventListener(google.ima.AdEvent.Type.AD_PROGRESS,b),i.removeEventListener(google.ima.AdEvent.Type.LOADED,w),i.removeEventListener(google.ima.AdEvent.Type.IMPRESSION,y),i.removeEventListener(google.ima.AdEvent.Type.STARTED,x),i.removeEventListener(google.ima.AdEvent.Type.PAUSED,I),i.removeEventListener(google.ima.AdEvent.Type.RESUMED,k),i.removeEventListener(google.ima.AdEvent.Type.SKIPPED,S),i.removeEventListener(google.ima.AdEvent.Type.COMPLETE,C),i.discardAdBreak(),i.destroy(),d.adsManagerLoaded=!1),d.settings.isInAdMode=!1,d.settings.postLoadVideoMode=!1,clearTimeout(a),clearTimeout(d.adNeverLoadedTimeout),clearTimeout(d.loadFailDurationTimeout),clearTimeout(d.inactiveTabRefreshTimeout),document.removeEventListener("visibilitychange",l),d.adContainerId)&&document.getElementById(d.adContainerId)&&(document.getElementById(d.adContainerId).innerHTML="")},d.isVideoShowing=function(){return!(!d||!d.currentPlayer)&&(d.settings.refreshPending=d.settings.isInAdMode||d.settings.postLoadVideoMode,d.settings.refreshPending)},d}},{},!0)),event.fire("main"))}catch(ex){"object"==(void 0===$root?"undefined":_typeof($root))&&$root.logger&&$root.logger.error&&$root.logger.error("CatchAll. Exception: "+ex.message,window),"object"==(void 0===$root?"undefined":_typeof($root))&&$root.loggly&&$root.loggly.errorLog&&$root.loggly.errorLog(ex,"CatchAll. Exception: "+ex.message,window)}}();